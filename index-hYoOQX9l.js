function JS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lx={exports:{}},ch={},sx={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),tw=Symbol.for("react.portal"),nw=Symbol.for("react.fragment"),rw=Symbol.for("react.strict_mode"),iw=Symbol.for("react.profiler"),aw=Symbol.for("react.provider"),ow=Symbol.for("react.context"),lw=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),uw=Symbol.for("react.memo"),cw=Symbol.for("react.lazy"),Jg=Symbol.iterator;function fw(e){return e===null||typeof e!="object"?null:(e=Jg&&e[Jg]||e["@@iterator"],typeof e=="function"?e:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cx=Object.assign,fx={};function us(e,t,n){this.props=e,this.context=t,this.refs=fx,this.updater=n||ux}us.prototype.isReactComponent={};us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dx(){}dx.prototype=us.prototype;function J0(e,t,n){this.props=e,this.context=t,this.refs=fx,this.updater=n||ux}var ev=J0.prototype=new dx;ev.constructor=J0;cx(ev,us.prototype);ev.isPureReactComponent=!0;var ey=Array.isArray,hx=Object.prototype.hasOwnProperty,tv={current:null},mx={key:!0,ref:!0,__self:!0,__source:!0};function px(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)hx.call(t,r)&&!mx.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:sc,type:e,key:a,ref:o,props:i,_owner:tv.current}}function dw(e,t){return{$$typeof:sc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nv(e){return typeof e=="object"&&e!==null&&e.$$typeof===sc}function hw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ty=/\/+/g;function ep(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hw(""+e.key):t.toString(36)}function cd(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case sc:case tw:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+ep(o,0):r,ey(i)?(n="",e!=null&&(n=e.replace(ty,"$&/")+"/"),cd(i,t,n,"",function(f){return f})):i!=null&&(nv(i)&&(i=dw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ty,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",ey(e))for(var l=0;l<e.length;l++){a=e[l];var u=r+ep(a,l);o+=cd(a,t,n,u,i)}else if(u=fw(e),typeof u=="function")for(e=u.call(e),l=0;!(a=e.next()).done;)a=a.value,u=r+ep(a,l++),o+=cd(a,t,n,u,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Df(e,t,n){if(e==null)return e;var r=[],i=0;return cd(e,r,"","",function(a){return t.call(n,a,i++)}),r}function mw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sr={current:null},fd={transition:null},pw={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:fd,ReactCurrentOwner:tv};Yt.Children={map:Df,forEach:function(e,t,n){Df(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Df(e,function(){t++}),t},toArray:function(e){return Df(e,function(t){return t})||[]},only:function(e){if(!nv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Yt.Component=us;Yt.Fragment=nw;Yt.Profiler=iw;Yt.PureComponent=J0;Yt.StrictMode=rw;Yt.Suspense=sw;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw;Yt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cx({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=tv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)hx.call(t,u)&&!mx.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:sc,type:e.type,key:i,ref:a,props:r,_owner:o}};Yt.createContext=function(e){return e={$$typeof:ow,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aw,_context:e},e.Consumer=e};Yt.createElement=px;Yt.createFactory=function(e){var t=px.bind(null,e);return t.type=e,t};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(e){return{$$typeof:lw,render:e}};Yt.isValidElement=nv;Yt.lazy=function(e){return{$$typeof:cw,_payload:{_status:-1,_result:e},_init:mw}};Yt.memo=function(e,t){return{$$typeof:uw,type:e,compare:t===void 0?null:t}};Yt.startTransition=function(e){var t=fd.transition;fd.transition={};try{e()}finally{fd.transition=t}};Yt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Yt.useCallback=function(e,t){return sr.current.useCallback(e,t)};Yt.useContext=function(e){return sr.current.useContext(e)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(e){return sr.current.useDeferredValue(e)};Yt.useEffect=function(e,t){return sr.current.useEffect(e,t)};Yt.useId=function(){return sr.current.useId()};Yt.useImperativeHandle=function(e,t,n){return sr.current.useImperativeHandle(e,t,n)};Yt.useInsertionEffect=function(e,t){return sr.current.useInsertionEffect(e,t)};Yt.useLayoutEffect=function(e,t){return sr.current.useLayoutEffect(e,t)};Yt.useMemo=function(e,t){return sr.current.useMemo(e,t)};Yt.useReducer=function(e,t,n){return sr.current.useReducer(e,t,n)};Yt.useRef=function(e){return sr.current.useRef(e)};Yt.useState=function(e){return sr.current.useState(e)};Yt.useSyncExternalStore=function(e,t,n){return sr.current.useSyncExternalStore(e,t,n)};Yt.useTransition=function(){return sr.current.useTransition()};Yt.version="18.2.0";sx.exports=Yt;var D=sx.exports;const vx=Z0(D),vw=JS({__proto__:null,default:vx},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=D,yw=Symbol.for("react.element"),xw=Symbol.for("react.fragment"),Ew=Object.prototype.hasOwnProperty,_w=gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sw={key:!0,ref:!0,__self:!0,__source:!0};function gx(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ew.call(t,r)&&!Sw.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:yw,type:e,key:a,ref:o,props:i,_owner:_w.current}}ch.Fragment=xw;ch.jsx=gx;ch.jsxs=gx;lx.exports=ch;var g=lx.exports,Yp={},yx={exports:{}},kr={},xx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ve,Ve){var Ge=ve.length;ve.push(Ve);e:for(;0<Ge;){var Te=Ge-1>>>1,qe=ve[Te];if(0<i(qe,Ve))ve[Te]=Ve,ve[Ge]=qe,Ge=Te;else break e}}function n(ve){return ve.length===0?null:ve[0]}function r(ve){if(ve.length===0)return null;var Ve=ve[0],Ge=ve.pop();if(Ge!==Ve){ve[0]=Ge;e:for(var Te=0,qe=ve.length,Tt=qe>>>1;Te<Tt;){var Mt=2*(Te+1)-1,jt=ve[Mt],Qt=Mt+1,Ut=ve[Qt];if(0>i(jt,Ge))Qt<qe&&0>i(Ut,jt)?(ve[Te]=Ut,ve[Qt]=Ge,Te=Qt):(ve[Te]=jt,ve[Mt]=Ge,Te=Mt);else if(Qt<qe&&0>i(Ut,Ge))ve[Te]=Ut,ve[Qt]=Ge,Te=Qt;else break e}}return Ve}function i(ve,Ve){var Ge=ve.sortIndex-Ve.sortIndex;return Ge!==0?Ge:ve.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],m=1,h=null,d=3,w=!1,b=!1,L=!1,I=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(ve){for(var Ve=n(f);Ve!==null;){if(Ve.callback===null)r(f);else if(Ve.startTime<=ve)r(f),Ve.sortIndex=Ve.expirationTime,t(u,Ve);else break;Ve=n(f)}}function F(ve){if(L=!1,v(ve),!b)if(n(u)!==null)b=!0,bt($);else{var Ve=n(f);Ve!==null&&nt(F,Ve.startTime-ve)}}function $(ve,Ve){b=!1,L&&(L=!1,y(se),se=-1),w=!0;var Ge=d;try{for(v(Ve),h=n(u);h!==null&&(!(h.expirationTime>Ve)||ve&&!Fe());){var Te=h.callback;if(typeof Te=="function"){h.callback=null,d=h.priorityLevel;var qe=Te(h.expirationTime<=Ve);Ve=e.unstable_now(),typeof qe=="function"?h.callback=qe:h===n(u)&&r(u),v(Ve)}else r(u);h=n(u)}if(h!==null)var Tt=!0;else{var Mt=n(f);Mt!==null&&nt(F,Mt.startTime-Ve),Tt=!1}return Tt}finally{h=null,d=Ge,w=!1}}var ee=!1,_e=null,se=-1,ot=5,Ie=-1;function Fe(){return!(e.unstable_now()-Ie<ot)}function Ke(){if(_e!==null){var ve=e.unstable_now();Ie=ve;var Ve=!0;try{Ve=_e(!0,ve)}finally{Ve?Je():(ee=!1,_e=null)}}else ee=!1}var Je;if(typeof T=="function")Je=function(){T(Ke)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,et=Qe.port2;Qe.port1.onmessage=Ke,Je=function(){et.postMessage(null)}}else Je=function(){I(Ke,0)};function bt(ve){_e=ve,ee||(ee=!0,Je())}function nt(ve,Ve){se=I(function(){ve(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ve){ve.callback=null},e.unstable_continueExecution=function(){b||w||(b=!0,bt($))},e.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<ve?Math.floor(1e3/ve):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(ve){switch(d){case 1:case 2:case 3:var Ve=3;break;default:Ve=d}var Ge=d;d=Ve;try{return ve()}finally{d=Ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ve,Ve){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Ge=d;d=ve;try{return Ve()}finally{d=Ge}},e.unstable_scheduleCallback=function(ve,Ve,Ge){var Te=e.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?Te+Ge:Te):Ge=Te,ve){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Ge+qe,ve={id:m++,callback:Ve,priorityLevel:ve,startTime:Ge,expirationTime:qe,sortIndex:-1},Ge>Te?(ve.sortIndex=Ge,t(f,ve),n(u)===null&&ve===n(f)&&(L?(y(se),se=-1):L=!0,nt(F,Ge-Te))):(ve.sortIndex=qe,t(u,ve),b||w||(b=!0,bt($))),ve},e.unstable_shouldYield=Fe,e.unstable_wrapCallback=function(ve){var Ve=d;return function(){var Ge=d;d=Ve;try{return ve.apply(this,arguments)}finally{d=Ge}}}})(Ex);xx.exports=Ex;var ww=xx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x=D,Pr=ww;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sx=new Set,Bu={};function Vo(e,t){es(e,t),es(e+"Capture",t)}function es(e,t){for(Bu[e]=t,e=0;e<t.length;e++)Sx.add(t[e])}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qp=Object.prototype.hasOwnProperty,Tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ny={},ry={};function bw(e){return Qp.call(ry,e)?!0:Qp.call(ny,e)?!1:Tw.test(e)?ry[e]=!0:(ny[e]=!0,!1)}function Cw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Aw(e,t,n,r){if(t===null||typeof t>"u"||Cw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ur(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qn[e]=new ur(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qn[t]=new ur(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qn[e]=new ur(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qn[e]=new ur(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qn[e]=new ur(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qn[e]=new ur(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qn[e]=new ur(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qn[e]=new ur(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qn[e]=new ur(e,5,!1,e.toLowerCase(),null,!1,!1)});var rv=/[\-:]([a-z])/g;function iv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rv,iv);qn[t]=new ur(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rv,iv);qn[t]=new ur(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rv,iv);qn[t]=new ur(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qn[e]=new ur(e,1,!1,e.toLowerCase(),null,!1,!1)});qn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qn[e]=new ur(e,1,!1,e.toLowerCase(),null,!0,!0)});function av(e,t,n,r){var i=qn.hasOwnProperty(t)?qn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Aw(t,n,i,r)&&(n=null),r||i===null?bw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ki=_x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mf=Symbol.for("react.element"),kl=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),ov=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),wx=Symbol.for("react.provider"),Tx=Symbol.for("react.context"),lv=Symbol.for("react.forward_ref"),qp=Symbol.for("react.suspense"),Zp=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),bx=Symbol.for("react.offscreen"),iy=Symbol.iterator;function fu(e){return e===null||typeof e!="object"?null:(e=iy&&e[iy]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,tp;function Au(e){if(tp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tp=t&&t[1]||""}return`
`+tp+e}var np=!1;function rp(e,t){if(!e||np)return"";np=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{np=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Au(e):""}function Lw(e){switch(e.tag){case 5:return Au(e.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return e=rp(e.type,!1),e;case 11:return e=rp(e.type.render,!1),e;case 1:return e=rp(e.type,!0),e;default:return""}}function Jp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Il:return"Fragment";case kl:return"Portal";case Kp:return"Profiler";case ov:return"StrictMode";case qp:return"Suspense";case Zp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Tx:return(e.displayName||"Context")+".Consumer";case wx:return(e._context.displayName||"Context")+".Provider";case lv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sv:return t=e.displayName||null,t!==null?t:Jp(e.type)||"Memo";case ba:t=e._payload,e=e._init;try{return Jp(e(t))}catch{}}return null}function Rw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jp(t);case 8:return t===ov?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function za(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ow(e){var t=Cx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jf(e){e._valueTracker||(e._valueTracker=Ow(e))}function Ax(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Cx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function bd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function e0(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ay(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=za(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lx(e,t){t=t.checked,t!=null&&av(e,"checked",t,!1)}function t0(e,t){Lx(e,t);var n=za(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?n0(e,t.type,n):t.hasOwnProperty("defaultValue")&&n0(e,t.type,za(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function n0(e,t,n){(t!=="number"||bd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Lu=Array.isArray;function Wl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+za(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function r0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ly(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(Lu(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:za(n)}}function Rx(e,t){var n=za(t.value),r=za(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ox(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ox(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ff,Nx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ff.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Nu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nw=["Webkit","ms","Moz","O"];Object.keys(Nu).forEach(function(e){Nw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nu[t]=Nu[e]})});function Px(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Nu.hasOwnProperty(e)&&Nu[e]?(""+t).trim():t+"px"}function kx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Px(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Pw=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a0(e,t){if(t){if(Pw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function o0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=null;function uv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var s0=null,Xl=null,Yl=null;function uy(e){if(e=fc(e)){if(typeof s0!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=ph(t),s0(e.stateNode,e.type,t))}}function Ix(e){Xl?Yl?Yl.push(e):Yl=[e]:Xl=e}function Dx(){if(Xl){var e=Xl,t=Yl;if(Yl=Xl=null,uy(e),t)for(e=0;e<t.length;e++)uy(t[e])}}function Mx(e,t){return e(t)}function jx(){}var ip=!1;function Fx(e,t,n){if(ip)return e(t,n);ip=!0;try{return Mx(e,t,n)}finally{ip=!1,(Xl!==null||Yl!==null)&&(jx(),Dx())}}function zu(e,t){var n=e.stateNode;if(n===null)return null;var r=ph(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var u0=!1;if(Wi)try{var du={};Object.defineProperty(du,"passive",{get:function(){u0=!0}}),window.addEventListener("test",du,du),window.removeEventListener("test",du,du)}catch{u0=!1}function kw(e,t,n,r,i,a,o,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(m){this.onError(m)}}var Pu=!1,Cd=null,Ad=!1,c0=null,Iw={onError:function(e){Pu=!0,Cd=e}};function Dw(e,t,n,r,i,a,o,l,u){Pu=!1,Cd=null,kw.apply(Iw,arguments)}function Mw(e,t,n,r,i,a,o,l,u){if(Dw.apply(this,arguments),Pu){if(Pu){var f=Cd;Pu=!1,Cd=null}else throw Error(ke(198));Ad||(Ad=!0,c0=f)}}function Ho(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $x(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cy(e){if(Ho(e)!==e)throw Error(ke(188))}function jw(e){var t=e.alternate;if(!t){if(t=Ho(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return cy(i),e;if(a===r)return cy(i),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function Bx(e){return e=jw(e),e!==null?Gx(e):null}function Gx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gx(e);if(t!==null)return t;e=e.sibling}return null}var zx=Pr.unstable_scheduleCallback,fy=Pr.unstable_cancelCallback,Fw=Pr.unstable_shouldYield,$w=Pr.unstable_requestPaint,In=Pr.unstable_now,Bw=Pr.unstable_getCurrentPriorityLevel,cv=Pr.unstable_ImmediatePriority,Ux=Pr.unstable_UserBlockingPriority,Ld=Pr.unstable_NormalPriority,Gw=Pr.unstable_LowPriority,Vx=Pr.unstable_IdlePriority,fh=null,_i=null;function zw(e){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(fh,e,void 0,(e.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:Hw,Uw=Math.log,Vw=Math.LN2;function Hw(e){return e>>>=0,e===0?32:31-(Uw(e)/Vw|0)|0}var $f=64,Bf=4194304;function Ru(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ru(l):(a&=o,a!==0&&(r=Ru(a)))}else o=n&~i,o!==0?r=Ru(o):a!==0&&(r=Ru(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ti(t),i=1<<n,r|=e[n],t&=~i;return r}function Ww(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ti(a),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Ww(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}function f0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hx(){var e=$f;return $f<<=1,!($f&4194240)&&($f=64),e}function ap(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ti(t),e[t]=n}function Yw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ti(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function fv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ti(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var rn=0;function Wx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xx,dv,Yx,Qx,Kx,d0=!1,Gf=[],ka=null,Ia=null,Da=null,Uu=new Map,Vu=new Map,Aa=[],Qw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dy(e,t){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":Uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(t.pointerId)}}function hu(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=fc(t),t!==null&&dv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Kw(e,t,n,r,i){switch(t){case"focusin":return ka=hu(ka,e,t,n,r,i),!0;case"dragenter":return Ia=hu(Ia,e,t,n,r,i),!0;case"mouseover":return Da=hu(Da,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Uu.set(a,hu(Uu.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Vu.set(a,hu(Vu.get(a)||null,e,t,n,r,i)),!0}return!1}function qx(e){var t=Co(e.target);if(t!==null){var n=Ho(t);if(n!==null){if(t=n.tag,t===13){if(t=$x(n),t!==null){e.blockedOn=t,Kx(e.priority,function(){Yx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=h0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);l0=r,n.target.dispatchEvent(r),l0=null}else return t=fc(n),t!==null&&dv(t),e.blockedOn=n,!1;t.shift()}return!0}function hy(e,t,n){dd(e)&&n.delete(t)}function qw(){d0=!1,ka!==null&&dd(ka)&&(ka=null),Ia!==null&&dd(Ia)&&(Ia=null),Da!==null&&dd(Da)&&(Da=null),Uu.forEach(hy),Vu.forEach(hy)}function mu(e,t){e.blockedOn===t&&(e.blockedOn=null,d0||(d0=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,qw)))}function Hu(e){function t(i){return mu(i,e)}if(0<Gf.length){mu(Gf[0],e);for(var n=1;n<Gf.length;n++){var r=Gf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ka!==null&&mu(ka,e),Ia!==null&&mu(Ia,e),Da!==null&&mu(Da,e),Uu.forEach(t),Vu.forEach(t),n=0;n<Aa.length;n++)r=Aa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Aa.length&&(n=Aa[0],n.blockedOn===null);)qx(n),n.blockedOn===null&&Aa.shift()}var Ql=Ki.ReactCurrentBatchConfig,Od=!0;function Zw(e,t,n,r){var i=rn,a=Ql.transition;Ql.transition=null;try{rn=1,hv(e,t,n,r)}finally{rn=i,Ql.transition=a}}function Jw(e,t,n,r){var i=rn,a=Ql.transition;Ql.transition=null;try{rn=4,hv(e,t,n,r)}finally{rn=i,Ql.transition=a}}function hv(e,t,n,r){if(Od){var i=h0(e,t,n,r);if(i===null)pp(e,t,r,Nd,n),dy(e,r);else if(Kw(i,e,t,n,r))r.stopPropagation();else if(dy(e,r),t&4&&-1<Qw.indexOf(e)){for(;i!==null;){var a=fc(i);if(a!==null&&Xx(a),a=h0(e,t,n,r),a===null&&pp(e,t,r,Nd,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else pp(e,t,r,null,n)}}var Nd=null;function h0(e,t,n,r){if(Nd=null,e=uv(r),e=Co(e),e!==null)if(t=Ho(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$x(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nd=e,null}function Zx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bw()){case cv:return 1;case Ux:return 4;case Ld:case Gw:return 16;case Vx:return 536870912;default:return 16}default:return 16}}var Ra=null,mv=null,hd=null;function Jx(){if(hd)return hd;var e,t=mv,n=t.length,r,i="value"in Ra?Ra.value:Ra.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return hd=i.slice(e,1<r?1-r:void 0)}function md(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zf(){return!0}function my(){return!1}function Ir(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zf:my,this.isPropagationStopped=my,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zf)},persist:function(){},isPersistent:zf}),t}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pv=Ir(cs),cc=_n({},cs,{view:0,detail:0}),eT=Ir(cc),op,lp,pu,dh=_n({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pu&&(pu&&e.type==="mousemove"?(op=e.screenX-pu.screenX,lp=e.screenY-pu.screenY):lp=op=0,pu=e),op)},movementY:function(e){return"movementY"in e?e.movementY:lp}}),py=Ir(dh),tT=_n({},dh,{dataTransfer:0}),nT=Ir(tT),rT=_n({},cc,{relatedTarget:0}),sp=Ir(rT),iT=_n({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=Ir(iT),oT=_n({},cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lT=Ir(oT),sT=_n({},cs,{data:0}),vy=Ir(sT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fT[e])?!!t[e]:!1}function vv(){return dT}var hT=_n({},cc,{key:function(e){if(e.key){var t=uT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=md(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(e){return e.type==="keypress"?md(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?md(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mT=Ir(hT),pT=_n({},dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=Ir(pT),vT=_n({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),gT=Ir(vT),yT=_n({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xT=Ir(yT),ET=_n({},dh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_T=Ir(ET),ST=[9,13,27,32],gv=Wi&&"CompositionEvent"in window,ku=null;Wi&&"documentMode"in document&&(ku=document.documentMode);var wT=Wi&&"TextEvent"in window&&!ku,eE=Wi&&(!gv||ku&&8<ku&&11>=ku),yy=" ",xy=!1;function tE(e,t){switch(e){case"keyup":return ST.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dl=!1;function TT(e,t){switch(e){case"compositionend":return nE(t);case"keypress":return t.which!==32?null:(xy=!0,yy);case"textInput":return e=t.data,e===yy&&xy?null:e;default:return null}}function bT(e,t){if(Dl)return e==="compositionend"||!gv&&tE(e,t)?(e=Jx(),hd=mv=Ra=null,Dl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eE&&t.locale!=="ko"?null:t.data;default:return null}}var CT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!CT[e.type]:t==="textarea"}function rE(e,t,n,r){Ix(r),t=Pd(t,"onChange"),0<t.length&&(n=new pv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Iu=null,Wu=null;function AT(e){mE(e,0)}function hh(e){var t=Fl(e);if(Ax(t))return e}function LT(e,t){if(e==="change")return t}var iE=!1;if(Wi){var up;if(Wi){var cp="oninput"in document;if(!cp){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),cp=typeof _y.oninput=="function"}up=cp}else up=!1;iE=up&&(!document.documentMode||9<document.documentMode)}function Sy(){Iu&&(Iu.detachEvent("onpropertychange",aE),Wu=Iu=null)}function aE(e){if(e.propertyName==="value"&&hh(Wu)){var t=[];rE(t,Wu,e,uv(e)),Fx(AT,t)}}function RT(e,t,n){e==="focusin"?(Sy(),Iu=t,Wu=n,Iu.attachEvent("onpropertychange",aE)):e==="focusout"&&Sy()}function OT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hh(Wu)}function NT(e,t){if(e==="click")return hh(t)}function PT(e,t){if(e==="input"||e==="change")return hh(t)}function kT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ri=typeof Object.is=="function"?Object.is:kT;function Xu(e,t){if(ri(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qp.call(t,i)||!ri(e[i],t[i]))return!1}return!0}function wy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ty(e,t){var n=wy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wy(n)}}function oE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lE(){for(var e=window,t=bd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bd(e.document)}return t}function yv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IT(e){var t=lE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oE(n.ownerDocument.documentElement,n)){if(r!==null&&yv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Ty(n,a);var o=Ty(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DT=Wi&&"documentMode"in document&&11>=document.documentMode,Ml=null,m0=null,Du=null,p0=!1;function by(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;p0||Ml==null||Ml!==bd(r)||(r=Ml,"selectionStart"in r&&yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Du&&Xu(Du,r)||(Du=r,r=Pd(m0,"onSelect"),0<r.length&&(t=new pv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ml)))}function Uf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jl={animationend:Uf("Animation","AnimationEnd"),animationiteration:Uf("Animation","AnimationIteration"),animationstart:Uf("Animation","AnimationStart"),transitionend:Uf("Transition","TransitionEnd")},fp={},sE={};Wi&&(sE=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function mh(e){if(fp[e])return fp[e];if(!jl[e])return e;var t=jl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sE)return fp[e]=t[n];return e}var uE=mh("animationend"),cE=mh("animationiteration"),fE=mh("animationstart"),dE=mh("transitionend"),hE=new Map,Cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(e,t){hE.set(e,t),Vo(t,[e])}for(var dp=0;dp<Cy.length;dp++){var hp=Cy[dp],MT=hp.toLowerCase(),jT=hp[0].toUpperCase()+hp.slice(1);Ha(MT,"on"+jT)}Ha(uE,"onAnimationEnd");Ha(cE,"onAnimationIteration");Ha(fE,"onAnimationStart");Ha("dblclick","onDoubleClick");Ha("focusin","onFocus");Ha("focusout","onBlur");Ha(dE,"onTransitionEnd");es("onMouseEnter",["mouseout","mouseover"]);es("onMouseLeave",["mouseout","mouseover"]);es("onPointerEnter",["pointerout","pointerover"]);es("onPointerLeave",["pointerout","pointerover"]);Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function Ay(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Mw(r,t,void 0,e),e.currentTarget=null}function mE(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;Ay(i,l,f),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,f=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;Ay(i,l,f),a=u}}}if(Ad)throw e=c0,Ad=!1,c0=null,e}function fn(e,t){var n=t[E0];n===void 0&&(n=t[E0]=new Set);var r=e+"__bubble";n.has(r)||(pE(t,e,2,!1),n.add(r))}function mp(e,t,n){var r=0;t&&(r|=4),pE(n,e,r,t)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function Yu(e){if(!e[Vf]){e[Vf]=!0,Sx.forEach(function(n){n!=="selectionchange"&&(FT.has(n)||mp(n,!1,e),mp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vf]||(t[Vf]=!0,mp("selectionchange",!1,t))}}function pE(e,t,n,r){switch(Zx(t)){case 1:var i=Zw;break;case 4:i=Jw;break;default:i=hv}n=i.bind(null,t,n,e),i=void 0,!u0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pp(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Co(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}Fx(function(){var f=a,m=uv(n),h=[];e:{var d=hE.get(e);if(d!==void 0){var w=pv,b=e;switch(e){case"keypress":if(md(n)===0)break e;case"keydown":case"keyup":w=mT;break;case"focusin":b="focus",w=sp;break;case"focusout":b="blur",w=sp;break;case"beforeblur":case"afterblur":w=sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=nT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=gT;break;case uE:case cE:case fE:w=aT;break;case dE:w=xT;break;case"scroll":w=eT;break;case"wheel":w=_T;break;case"copy":case"cut":case"paste":w=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=gy}var L=(t&4)!==0,I=!L&&e==="scroll",y=L?d!==null?d+"Capture":null:d;L=[];for(var T=f,v;T!==null;){v=T;var F=v.stateNode;if(v.tag===5&&F!==null&&(v=F,y!==null&&(F=zu(T,y),F!=null&&L.push(Qu(T,F,v)))),I)break;T=T.return}0<L.length&&(d=new w(d,b,null,n,m),h.push({event:d,listeners:L}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&n!==l0&&(b=n.relatedTarget||n.fromElement)&&(Co(b)||b[Xi]))break e;if((w||d)&&(d=m.window===m?m:(d=m.ownerDocument)?d.defaultView||d.parentWindow:window,w?(b=n.relatedTarget||n.toElement,w=f,b=b?Co(b):null,b!==null&&(I=Ho(b),b!==I||b.tag!==5&&b.tag!==6)&&(b=null)):(w=null,b=f),w!==b)){if(L=py,F="onMouseLeave",y="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(L=gy,F="onPointerLeave",y="onPointerEnter",T="pointer"),I=w==null?d:Fl(w),v=b==null?d:Fl(b),d=new L(F,T+"leave",w,n,m),d.target=I,d.relatedTarget=v,F=null,Co(m)===f&&(L=new L(y,T+"enter",b,n,m),L.target=v,L.relatedTarget=I,F=L),I=F,w&&b)t:{for(L=w,y=b,T=0,v=L;v;v=Ol(v))T++;for(v=0,F=y;F;F=Ol(F))v++;for(;0<T-v;)L=Ol(L),T--;for(;0<v-T;)y=Ol(y),v--;for(;T--;){if(L===y||y!==null&&L===y.alternate)break t;L=Ol(L),y=Ol(y)}L=null}else L=null;w!==null&&Ly(h,d,w,L,!1),b!==null&&I!==null&&Ly(h,I,b,L,!0)}}e:{if(d=f?Fl(f):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var $=LT;else if(Ey(d))if(iE)$=PT;else{$=OT;var ee=RT}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&($=NT);if($&&($=$(e,f))){rE(h,$,n,m);break e}ee&&ee(e,d,f),e==="focusout"&&(ee=d._wrapperState)&&ee.controlled&&d.type==="number"&&n0(d,"number",d.value)}switch(ee=f?Fl(f):window,e){case"focusin":(Ey(ee)||ee.contentEditable==="true")&&(Ml=ee,m0=f,Du=null);break;case"focusout":Du=m0=Ml=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,by(h,n,m);break;case"selectionchange":if(DT)break;case"keydown":case"keyup":by(h,n,m)}var _e;if(gv)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else Dl?tE(e,n)&&(se="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(se="onCompositionStart");se&&(eE&&n.locale!=="ko"&&(Dl||se!=="onCompositionStart"?se==="onCompositionEnd"&&Dl&&(_e=Jx()):(Ra=m,mv="value"in Ra?Ra.value:Ra.textContent,Dl=!0)),ee=Pd(f,se),0<ee.length&&(se=new vy(se,e,null,n,m),h.push({event:se,listeners:ee}),_e?se.data=_e:(_e=nE(n),_e!==null&&(se.data=_e)))),(_e=wT?TT(e,n):bT(e,n))&&(f=Pd(f,"onBeforeInput"),0<f.length&&(m=new vy("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:f}),m.data=_e))}mE(h,t)})}function Qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pd(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=zu(e,n),a!=null&&r.unshift(Qu(e,a,i)),a=zu(e,t),a!=null&&r.push(Qu(e,a,i))),e=e.return}return r}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ly(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=zu(n,a),u!=null&&o.unshift(Qu(n,u,l))):i||(u=zu(n,a),u!=null&&o.push(Qu(n,u,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var $T=/\r\n?/g,BT=/\u0000|\uFFFD/g;function Ry(e){return(typeof e=="string"?e:""+e).replace($T,`
`).replace(BT,"")}function Hf(e,t,n){if(t=Ry(t),Ry(e)!==t&&n)throw Error(ke(425))}function kd(){}var v0=null,g0=null;function y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var x0=typeof setTimeout=="function"?setTimeout:void 0,GT=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,zT=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(e){return Oy.resolve(null).then(e).catch(UT)}:x0;function UT(e){setTimeout(function(){throw e})}function vp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Hu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hu(t)}function Ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ny(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),Ei="__reactFiber$"+fs,Ku="__reactProps$"+fs,Xi="__reactContainer$"+fs,E0="__reactEvents$"+fs,VT="__reactListeners$"+fs,HT="__reactHandles$"+fs;function Co(e){var t=e[Ei];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xi]||n[Ei]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ny(e);e!==null;){if(n=e[Ei])return n;e=Ny(e)}return t}e=n,n=e.parentNode}return null}function fc(e){return e=e[Ei]||e[Xi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function ph(e){return e[Ku]||null}var _0=[],$l=-1;function Wa(e){return{current:e}}function dn(e){0>$l||(e.current=_0[$l],_0[$l]=null,$l--)}function un(e,t){$l++,_0[$l]=e.current,e.current=t}var Ua={},nr=Wa(Ua),yr=Wa(!1),Mo=Ua;function ts(e,t){var n=e.type.contextTypes;if(!n)return Ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function xr(e){return e=e.childContextTypes,e!=null}function Id(){dn(yr),dn(nr)}function Py(e,t,n){if(nr.current!==Ua)throw Error(ke(168));un(nr,t),un(yr,n)}function vE(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ke(108,Rw(e)||"Unknown",i));return _n({},n,r)}function Dd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ua,Mo=nr.current,un(nr,e),un(yr,yr.current),!0}function ky(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=vE(e,t,Mo),r.__reactInternalMemoizedMergedChildContext=e,dn(yr),dn(nr),un(nr,e)):dn(yr),un(yr,n)}var zi=null,vh=!1,gp=!1;function gE(e){zi===null?zi=[e]:zi.push(e)}function WT(e){vh=!0,gE(e)}function Xa(){if(!gp&&zi!==null){gp=!0;var e=0,t=rn;try{var n=zi;for(rn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zi=null,vh=!1}catch(i){throw zi!==null&&(zi=zi.slice(e+1)),zx(cv,Xa),i}finally{rn=t,gp=!1}}return null}var Bl=[],Gl=0,Md=null,jd=0,Gr=[],zr=0,jo=null,Ui=1,Vi="";function wo(e,t){Bl[Gl++]=jd,Bl[Gl++]=Md,Md=e,jd=t}function yE(e,t,n){Gr[zr++]=Ui,Gr[zr++]=Vi,Gr[zr++]=jo,jo=e;var r=Ui;e=Vi;var i=32-ti(r)-1;r&=~(1<<i),n+=1;var a=32-ti(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ui=1<<32-ti(t)+i|n<<i|r,Vi=a+e}else Ui=1<<a|n<<i|r,Vi=e}function xv(e){e.return!==null&&(wo(e,1),yE(e,1,0))}function Ev(e){for(;e===Md;)Md=Bl[--Gl],Bl[Gl]=null,jd=Bl[--Gl],Bl[Gl]=null;for(;e===jo;)jo=Gr[--zr],Gr[zr]=null,Vi=Gr[--zr],Gr[zr]=null,Ui=Gr[--zr],Gr[zr]=null}var Nr=null,Or=null,pn=!1,Jr=null;function xE(e,t){var n=Ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Iy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nr=e,Or=Ma(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nr=e,Or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jo!==null?{id:Ui,overflow:Vi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nr=e,Or=null,!0):!1;default:return!1}}function S0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function w0(e){if(pn){var t=Or;if(t){var n=t;if(!Iy(e,t)){if(S0(e))throw Error(ke(418));t=Ma(n.nextSibling);var r=Nr;t&&Iy(e,t)?xE(r,n):(e.flags=e.flags&-4097|2,pn=!1,Nr=e)}}else{if(S0(e))throw Error(ke(418));e.flags=e.flags&-4097|2,pn=!1,Nr=e}}}function Dy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nr=e}function Wf(e){if(e!==Nr)return!1;if(!pn)return Dy(e),pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!y0(e.type,e.memoizedProps)),t&&(t=Or)){if(S0(e))throw EE(),Error(ke(418));for(;t;)xE(e,t),t=Ma(t.nextSibling)}if(Dy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Or=Ma(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Or=null}}else Or=Nr?Ma(e.stateNode.nextSibling):null;return!0}function EE(){for(var e=Or;e;)e=Ma(e.nextSibling)}function ns(){Or=Nr=null,pn=!1}function _v(e){Jr===null?Jr=[e]:Jr.push(e)}var XT=Ki.ReactCurrentBatchConfig;function qr(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Fd=Wa(null),$d=null,zl=null,Sv=null;function wv(){Sv=zl=$d=null}function Tv(e){var t=Fd.current;dn(Fd),e._currentValue=t}function T0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kl(e,t){$d=e,Sv=zl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function Hr(e){var t=e._currentValue;if(Sv!==e)if(e={context:e,memoizedValue:t,next:null},zl===null){if($d===null)throw Error(ke(308));zl=e,$d.dependencies={lanes:0,firstContext:e}}else zl=zl.next=e;return t}var Ao=null;function bv(e){Ao===null?Ao=[e]:Ao.push(e)}function _E(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,bv(t)):(n.next=i.next,i.next=n),t.interleaved=n,Yi(e,r)}function Yi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ca=!1;function Cv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yi(e,n)}return i=r.interleaved,i===null?(t.next=t,bv(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yi(e,n)}function pd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fv(e,n)}}function My(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bd(e,t,n,r){var i=e.updateQueue;Ca=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,o===null?a=f:o.next=f,o=u;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=f:l.next=f,m.lastBaseUpdate=u))}if(a!==null){var h=i.baseState;o=0,m=f=u=null,l=a;do{var d=l.lane,w=l.eventTime;if((r&d)===d){m!==null&&(m=m.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,L=l;switch(d=t,w=n,L.tag){case 1:if(b=L.payload,typeof b=="function"){h=b.call(w,h,d);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=L.payload,d=typeof b=="function"?b.call(w,h,d):b,d==null)break e;h=_n({},h,d);break e;case 2:Ca=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else w={eventTime:w,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(f=m=w,u=h):m=m.next=w,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(m===null&&(u=h),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);$o|=o,e.lanes=o,e.memoizedState=h}}function jy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var wE=new _x.Component().refs;function b0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gh={isMounted:function(e){return(e=e._reactInternals)?Ho(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lr(),i=$a(e),a=Hi(r,i);a.payload=t,n!=null&&(a.callback=n),t=ja(e,a,i),t!==null&&(ni(t,e,i,r),pd(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lr(),i=$a(e),a=Hi(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ja(e,a,i),t!==null&&(ni(t,e,i,r),pd(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lr(),r=$a(e),i=Hi(n,r);i.tag=2,t!=null&&(i.callback=t),t=ja(e,i,r),t!==null&&(ni(t,e,r,n),pd(t,e,r))}};function Fy(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Xu(n,r)||!Xu(i,a):!0}function TE(e,t,n){var r=!1,i=Ua,a=t.contextType;return typeof a=="object"&&a!==null?a=Hr(a):(i=xr(t)?Mo:nr.current,r=t.contextTypes,a=(r=r!=null)?ts(e,i):Ua),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function $y(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gh.enqueueReplaceState(t,t.state,null)}function C0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wE,Cv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Hr(a):(a=xr(t)?Mo:nr.current,i.context=ts(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(b0(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&gh.enqueueReplaceState(i,i.state,null),Bd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;l===wE&&(l=i.refs={}),o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function Xf(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function By(e){var t=e._init;return t(e._payload)}function bE(e){function t(y,T){if(e){var v=y.deletions;v===null?(y.deletions=[T],y.flags|=16):v.push(T)}}function n(y,T){if(!e)return null;for(;T!==null;)t(y,T),T=T.sibling;return null}function r(y,T){for(y=new Map;T!==null;)T.key!==null?y.set(T.key,T):y.set(T.index,T),T=T.sibling;return y}function i(y,T){return y=Ba(y,T),y.index=0,y.sibling=null,y}function a(y,T,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<T?(y.flags|=2,T):v):(y.flags|=2,T)):(y.flags|=1048576,T)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,T,v,F){return T===null||T.tag!==6?(T=Tp(v,y.mode,F),T.return=y,T):(T=i(T,v),T.return=y,T)}function u(y,T,v,F){var $=v.type;return $===Il?m(y,T,v.props.children,F,v.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ba&&By($)===T.type)?(F=i(T,v.props),F.ref=vu(y,T,v),F.return=y,F):(F=_d(v.type,v.key,v.props,null,y.mode,F),F.ref=vu(y,T,v),F.return=y,F)}function f(y,T,v,F){return T===null||T.tag!==4||T.stateNode.containerInfo!==v.containerInfo||T.stateNode.implementation!==v.implementation?(T=bp(v,y.mode,F),T.return=y,T):(T=i(T,v.children||[]),T.return=y,T)}function m(y,T,v,F,$){return T===null||T.tag!==7?(T=ko(v,y.mode,F,$),T.return=y,T):(T=i(T,v),T.return=y,T)}function h(y,T,v){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Tp(""+T,y.mode,v),T.return=y,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Mf:return v=_d(T.type,T.key,T.props,null,y.mode,v),v.ref=vu(y,null,T),v.return=y,v;case kl:return T=bp(T,y.mode,v),T.return=y,T;case ba:var F=T._init;return h(y,F(T._payload),v)}if(Lu(T)||fu(T))return T=ko(T,y.mode,v,null),T.return=y,T;Xf(y,T)}return null}function d(y,T,v,F){var $=T!==null?T.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return $!==null?null:l(y,T,""+v,F);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mf:return v.key===$?u(y,T,v,F):null;case kl:return v.key===$?f(y,T,v,F):null;case ba:return $=v._init,d(y,T,$(v._payload),F)}if(Lu(v)||fu(v))return $!==null?null:m(y,T,v,F,null);Xf(y,v)}return null}function w(y,T,v,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return y=y.get(v)||null,l(T,y,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Mf:return y=y.get(F.key===null?v:F.key)||null,u(T,y,F,$);case kl:return y=y.get(F.key===null?v:F.key)||null,f(T,y,F,$);case ba:var ee=F._init;return w(y,T,v,ee(F._payload),$)}if(Lu(F)||fu(F))return y=y.get(v)||null,m(T,y,F,$,null);Xf(T,F)}return null}function b(y,T,v,F){for(var $=null,ee=null,_e=T,se=T=0,ot=null;_e!==null&&se<v.length;se++){_e.index>se?(ot=_e,_e=null):ot=_e.sibling;var Ie=d(y,_e,v[se],F);if(Ie===null){_e===null&&(_e=ot);break}e&&_e&&Ie.alternate===null&&t(y,_e),T=a(Ie,T,se),ee===null?$=Ie:ee.sibling=Ie,ee=Ie,_e=ot}if(se===v.length)return n(y,_e),pn&&wo(y,se),$;if(_e===null){for(;se<v.length;se++)_e=h(y,v[se],F),_e!==null&&(T=a(_e,T,se),ee===null?$=_e:ee.sibling=_e,ee=_e);return pn&&wo(y,se),$}for(_e=r(y,_e);se<v.length;se++)ot=w(_e,y,se,v[se],F),ot!==null&&(e&&ot.alternate!==null&&_e.delete(ot.key===null?se:ot.key),T=a(ot,T,se),ee===null?$=ot:ee.sibling=ot,ee=ot);return e&&_e.forEach(function(Fe){return t(y,Fe)}),pn&&wo(y,se),$}function L(y,T,v,F){var $=fu(v);if(typeof $!="function")throw Error(ke(150));if(v=$.call(v),v==null)throw Error(ke(151));for(var ee=$=null,_e=T,se=T=0,ot=null,Ie=v.next();_e!==null&&!Ie.done;se++,Ie=v.next()){_e.index>se?(ot=_e,_e=null):ot=_e.sibling;var Fe=d(y,_e,Ie.value,F);if(Fe===null){_e===null&&(_e=ot);break}e&&_e&&Fe.alternate===null&&t(y,_e),T=a(Fe,T,se),ee===null?$=Fe:ee.sibling=Fe,ee=Fe,_e=ot}if(Ie.done)return n(y,_e),pn&&wo(y,se),$;if(_e===null){for(;!Ie.done;se++,Ie=v.next())Ie=h(y,Ie.value,F),Ie!==null&&(T=a(Ie,T,se),ee===null?$=Ie:ee.sibling=Ie,ee=Ie);return pn&&wo(y,se),$}for(_e=r(y,_e);!Ie.done;se++,Ie=v.next())Ie=w(_e,y,se,Ie.value,F),Ie!==null&&(e&&Ie.alternate!==null&&_e.delete(Ie.key===null?se:Ie.key),T=a(Ie,T,se),ee===null?$=Ie:ee.sibling=Ie,ee=Ie);return e&&_e.forEach(function(Ke){return t(y,Ke)}),pn&&wo(y,se),$}function I(y,T,v,F){if(typeof v=="object"&&v!==null&&v.type===Il&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Mf:e:{for(var $=v.key,ee=T;ee!==null;){if(ee.key===$){if($=v.type,$===Il){if(ee.tag===7){n(y,ee.sibling),T=i(ee,v.props.children),T.return=y,y=T;break e}}else if(ee.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===ba&&By($)===ee.type){n(y,ee.sibling),T=i(ee,v.props),T.ref=vu(y,ee,v),T.return=y,y=T;break e}n(y,ee);break}else t(y,ee);ee=ee.sibling}v.type===Il?(T=ko(v.props.children,y.mode,F,v.key),T.return=y,y=T):(F=_d(v.type,v.key,v.props,null,y.mode,F),F.ref=vu(y,T,v),F.return=y,y=F)}return o(y);case kl:e:{for(ee=v.key;T!==null;){if(T.key===ee)if(T.tag===4&&T.stateNode.containerInfo===v.containerInfo&&T.stateNode.implementation===v.implementation){n(y,T.sibling),T=i(T,v.children||[]),T.return=y,y=T;break e}else{n(y,T);break}else t(y,T);T=T.sibling}T=bp(v,y.mode,F),T.return=y,y=T}return o(y);case ba:return ee=v._init,I(y,T,ee(v._payload),F)}if(Lu(v))return b(y,T,v,F);if(fu(v))return L(y,T,v,F);Xf(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,T!==null&&T.tag===6?(n(y,T.sibling),T=i(T,v),T.return=y,y=T):(n(y,T),T=Tp(v,y.mode,F),T.return=y,y=T),o(y)):n(y,T)}return I}var rs=bE(!0),CE=bE(!1),dc={},Si=Wa(dc),qu=Wa(dc),Zu=Wa(dc);function Lo(e){if(e===dc)throw Error(ke(174));return e}function Av(e,t){switch(un(Zu,t),un(qu,e),un(Si,dc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i0(t,e)}dn(Si),un(Si,t)}function is(){dn(Si),dn(qu),dn(Zu)}function AE(e){Lo(Zu.current);var t=Lo(Si.current),n=i0(t,e.type);t!==n&&(un(qu,e),un(Si,n))}function Lv(e){qu.current===e&&(dn(Si),dn(qu))}var xn=Wa(0);function Gd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yp=[];function Rv(){for(var e=0;e<yp.length;e++)yp[e]._workInProgressVersionPrimary=null;yp.length=0}var vd=Ki.ReactCurrentDispatcher,xp=Ki.ReactCurrentBatchConfig,Fo=0,En=null,Gn=null,Wn=null,zd=!1,Mu=!1,Ju=0,YT=0;function Zn(){throw Error(ke(321))}function Ov(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ri(e[n],t[n]))return!1;return!0}function Nv(e,t,n,r,i,a){if(Fo=a,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vd.current=e===null||e.memoizedState===null?ZT:JT,e=n(r,i),Mu){a=0;do{if(Mu=!1,Ju=0,25<=a)throw Error(ke(301));a+=1,Wn=Gn=null,t.updateQueue=null,vd.current=eb,e=n(r,i)}while(Mu)}if(vd.current=Ud,t=Gn!==null&&Gn.next!==null,Fo=0,Wn=Gn=En=null,zd=!1,t)throw Error(ke(300));return e}function Pv(){var e=Ju!==0;return Ju=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?En.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Wr(){if(Gn===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=Gn.next;var t=Wn===null?En.memoizedState:Wn.next;if(t!==null)Wn=t,Gn=e;else{if(e===null)throw Error(ke(310));Gn=e,e={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Wn===null?En.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function ec(e,t){return typeof t=="function"?t(e):t}function Ep(e){var t=Wr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Gn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,u=null,f=a;do{var m=f.lane;if((Fo&m)===m)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=h,o=r):u=u.next=h,En.lanes|=m,$o|=m}f=f.next}while(f!==null&&f!==a);u===null?o=r:u.next=l,ri(r,t.memoizedState)||(gr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,En.lanes|=a,$o|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _p(e){var t=Wr(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ri(a,t.memoizedState)||(gr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function LE(){}function RE(e,t){var n=En,r=Wr(),i=t(),a=!ri(r.memoizedState,i);if(a&&(r.memoizedState=i,gr=!0),r=r.queue,kv(PE.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,tc(9,NE.bind(null,n,r,i,t),void 0,null),Xn===null)throw Error(ke(349));Fo&30||OE(n,t,i)}return i}function OE(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function NE(e,t,n,r){t.value=n,t.getSnapshot=r,kE(t)&&IE(e)}function PE(e,t,n){return n(function(){kE(t)&&IE(e)})}function kE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ri(e,n)}catch{return!0}}function IE(e){var t=Yi(e,1);t!==null&&ni(t,e,1,-1)}function Gy(e){var t=yi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:e},t.queue=e,e=e.dispatch=qT.bind(null,En,e),[t.memoizedState,e]}function tc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function DE(){return Wr().memoizedState}function gd(e,t,n,r){var i=yi();En.flags|=e,i.memoizedState=tc(1|t,n,void 0,r===void 0?null:r)}function yh(e,t,n,r){var i=Wr();r=r===void 0?null:r;var a=void 0;if(Gn!==null){var o=Gn.memoizedState;if(a=o.destroy,r!==null&&Ov(r,o.deps)){i.memoizedState=tc(t,n,a,r);return}}En.flags|=e,i.memoizedState=tc(1|t,n,a,r)}function zy(e,t){return gd(8390656,8,e,t)}function kv(e,t){return yh(2048,8,e,t)}function ME(e,t){return yh(4,2,e,t)}function jE(e,t){return yh(4,4,e,t)}function FE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $E(e,t,n){return n=n!=null?n.concat([e]):null,yh(4,4,FE.bind(null,t,e),n)}function Iv(){}function BE(e,t){var n=Wr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ov(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function GE(e,t){var n=Wr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ov(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zE(e,t,n){return Fo&21?(ri(n,t)||(n=Hx(),En.lanes|=n,$o|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=n)}function QT(e,t){var n=rn;rn=n!==0&&4>n?n:4,e(!0);var r=xp.transition;xp.transition={};try{e(!1),t()}finally{rn=n,xp.transition=r}}function UE(){return Wr().memoizedState}function KT(e,t,n){var r=$a(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VE(e))HE(t,n);else if(n=_E(e,t,n,r),n!==null){var i=lr();ni(n,e,r,i),WE(n,t,r)}}function qT(e,t,n){var r=$a(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VE(e))HE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ri(l,o)){var u=t.interleaved;u===null?(i.next=i,bv(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=_E(e,t,i,r),n!==null&&(i=lr(),ni(n,e,r,i),WE(n,t,r))}}function VE(e){var t=e.alternate;return e===En||t!==null&&t===En}function HE(e,t){Mu=zd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function WE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fv(e,n)}}var Ud={readContext:Hr,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},ZT={readContext:Hr,useCallback:function(e,t){return yi().memoizedState=[e,t===void 0?null:t],e},useContext:Hr,useEffect:zy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gd(4194308,4,FE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gd(4194308,4,e,t)},useInsertionEffect:function(e,t){return gd(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KT.bind(null,En,e),[r.memoizedState,e]},useRef:function(e){var t=yi();return e={current:e},t.memoizedState=e},useState:Gy,useDebugValue:Iv,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Gy(!1),t=e[0];return e=QT.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=En,i=yi();if(pn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),Xn===null)throw Error(ke(349));Fo&30||OE(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,zy(PE.bind(null,r,a,e),[e]),r.flags|=2048,tc(9,NE.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=yi(),t=Xn.identifierPrefix;if(pn){var n=Vi,r=Ui;n=(r&~(1<<32-ti(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ju++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=YT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JT={readContext:Hr,useCallback:BE,useContext:Hr,useEffect:kv,useImperativeHandle:$E,useInsertionEffect:ME,useLayoutEffect:jE,useMemo:GE,useReducer:Ep,useRef:DE,useState:function(){return Ep(ec)},useDebugValue:Iv,useDeferredValue:function(e){var t=Wr();return zE(t,Gn.memoizedState,e)},useTransition:function(){var e=Ep(ec)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:LE,useSyncExternalStore:RE,useId:UE,unstable_isNewReconciler:!1},eb={readContext:Hr,useCallback:BE,useContext:Hr,useEffect:kv,useImperativeHandle:$E,useInsertionEffect:ME,useLayoutEffect:jE,useMemo:GE,useReducer:_p,useRef:DE,useState:function(){return _p(ec)},useDebugValue:Iv,useDeferredValue:function(e){var t=Wr();return Gn===null?t.memoizedState=e:zE(t,Gn.memoizedState,e)},useTransition:function(){var e=_p(ec)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:LE,useSyncExternalStore:RE,useId:UE,unstable_isNewReconciler:!1};function as(e,t){try{var n="",r=t;do n+=Lw(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Sp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function A0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tb=typeof WeakMap=="function"?WeakMap:Map;function XE(e,t,n){n=Hi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hd||(Hd=!0,j0=r),A0(e,t)},n}function YE(e,t,n){n=Hi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){A0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){A0(e,t),typeof r!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Uy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tb;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pb.bind(null,e,t,n),t.then(e,e))}function Vy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Hi(-1,1),t.tag=2,ja(n,t,1))),n.lanes|=1),e)}var nb=Ki.ReactCurrentOwner,gr=!1;function ar(e,t,n,r){t.child=e===null?CE(t,null,n,r):rs(t,e.child,n,r)}function Wy(e,t,n,r,i){n=n.render;var a=t.ref;return Kl(t,i),r=Nv(e,t,n,r,a,i),n=Pv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qi(e,t,i)):(pn&&n&&xv(t),t.flags|=1,ar(e,t,r,i),t.child)}function Xy(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!zv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,QE(e,t,a,r,i)):(e=_d(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xu,n(o,r)&&e.ref===t.ref)return Qi(e,t,i)}return t.flags|=1,e=Ba(a,r),e.ref=t.ref,e.return=t,t.child=e}function QE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Xu(a,r)&&e.ref===t.ref)if(gr=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,Qi(e,t,i)}return L0(e,t,n,r,i)}function KE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Vl,Rr),Rr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(Vl,Rr),Rr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,un(Vl,Rr),Rr|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,un(Vl,Rr),Rr|=r;return ar(e,t,i,n),t.child}function qE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function L0(e,t,n,r,i){var a=xr(n)?Mo:nr.current;return a=ts(t,a),Kl(t,i),n=Nv(e,t,n,r,a,i),r=Pv(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qi(e,t,i)):(pn&&r&&xv(t),t.flags|=1,ar(e,t,n,i),t.child)}function Yy(e,t,n,r,i){if(xr(n)){var a=!0;Dd(t)}else a=!1;if(Kl(t,i),t.stateNode===null)yd(e,t),TE(t,n,r),C0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Hr(f):(f=xr(n)?Mo:nr.current,f=ts(t,f));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==f)&&$y(t,o,r,f),Ca=!1;var d=t.memoizedState;o.state=d,Bd(t,r,o,i),u=t.memoizedState,l!==r||d!==u||yr.current||Ca?(typeof m=="function"&&(b0(t,n,m,r),u=t.memoizedState),(l=Ca||Fy(t,n,l,r,d,u,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=f,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,SE(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:qr(t.type,l),o.props=f,h=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Hr(u):(u=xr(n)?Mo:nr.current,u=ts(t,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||d!==u)&&$y(t,o,r,u),Ca=!1,d=t.memoizedState,o.state=d,Bd(t,r,o,i);var b=t.memoizedState;l!==h||d!==b||yr.current||Ca?(typeof w=="function"&&(b0(t,n,w,r),b=t.memoizedState),(f=Ca||Fy(t,n,f,r,d,b,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=u,r=f):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return R0(e,t,n,r,a,i)}function R0(e,t,n,r,i,a){qE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&ky(t,n,!1),Qi(e,t,a);r=t.stateNode,nb.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=rs(t,e.child,null,a),t.child=rs(t,null,l,a)):ar(e,t,l,a),t.memoizedState=r.state,i&&ky(t,n,!0),t.child}function ZE(e){var t=e.stateNode;t.pendingContext?Py(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Py(e,t.context,!1),Av(e,t.containerInfo)}function Qy(e,t,n,r,i){return ns(),_v(i),t.flags|=256,ar(e,t,n,r),t.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function N0(e){return{baseLanes:e,cachePool:null,transitions:null}}function JE(e,t,n){var r=t.pendingProps,i=xn.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),un(xn,i&1),e===null)return w0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=_h(o,r,0,null),e=ko(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=N0(n),t.memoizedState=O0,e):Dv(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return rb(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ba(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Ba(l,a):(a=ko(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?N0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=O0,r}return a=e.child,e=a.sibling,r=Ba(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Dv(e,t){return t=_h({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yf(e,t,n,r){return r!==null&&_v(r),rs(t,e.child,null,n),e=Dv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rb(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=Sp(Error(ke(422))),Yf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=_h({mode:"visible",children:r.children},i,0,null),a=ko(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&rs(t,e.child,null,o),t.child.memoizedState=N0(o),t.memoizedState=O0,a);if(!(t.mode&1))return Yf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=Sp(a,r,void 0),Yf(e,t,o,r)}if(l=(o&e.childLanes)!==0,gr||l){if(r=Xn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Yi(e,i),ni(r,e,i,-1))}return Gv(),r=Sp(Error(ke(421))),Yf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=vb.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Or=Ma(i.nextSibling),Nr=t,pn=!0,Jr=null,e!==null&&(Gr[zr++]=Ui,Gr[zr++]=Vi,Gr[zr++]=jo,Ui=e.id,Vi=e.overflow,jo=t),t=Dv(t,r.children),t.flags|=4096,t)}function Ky(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),T0(e.return,t,n)}function wp(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function e_(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ar(e,t,r.children,n),r=xn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ky(e,n,t);else if(e.tag===19)Ky(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(un(xn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Gd(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),wp(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gd(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}wp(t,!0,n,null,a);break;case"together":wp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$o|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=Ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ib(e,t,n){switch(t.tag){case 3:ZE(t),ns();break;case 5:AE(t);break;case 1:xr(t.type)&&Dd(t);break;case 4:Av(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;un(Fd,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(un(xn,xn.current&1),t.flags|=128,null):n&t.child.childLanes?JE(e,t,n):(un(xn,xn.current&1),e=Qi(e,t,n),e!==null?e.sibling:null);un(xn,xn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return e_(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(xn,xn.current),r)break;return null;case 22:case 23:return t.lanes=0,KE(e,t,n)}return Qi(e,t,n)}var t_,P0,n_,r_;t_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P0=function(){};n_=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Lo(Si.current);var a=null;switch(n){case"input":i=e0(e,i),r=e0(e,r),a=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),a=[];break;case"textarea":i=r0(e,i),r=r0(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=kd)}a0(n,r);var o;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Bu.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Bu.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&fn("scroll",e),a||l===u||(a=[])):(a=a||[]).push(f,u))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};r_=function(e,t,n,r){n!==r&&(t.flags|=4)};function gu(e,t){if(!pn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ab(e,t,n){var r=t.pendingProps;switch(Ev(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(t),null;case 1:return xr(t.type)&&Id(),Jn(t),null;case 3:return r=t.stateNode,is(),dn(yr),dn(nr),Rv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jr!==null&&(B0(Jr),Jr=null))),P0(e,t),Jn(t),null;case 5:Lv(t);var i=Lo(Zu.current);if(n=t.type,e!==null&&t.stateNode!=null)n_(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return Jn(t),null}if(e=Lo(Si.current),Wf(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ei]=t,r[Ku]=a,e=(t.mode&1)!==0,n){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<Ou.length;i++)fn(Ou[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":ay(r,a),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},fn("invalid",r);break;case"textarea":ly(r,a),fn("invalid",r)}a0(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Hf(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Hf(r.textContent,l,e),i=["children",""+l]):Bu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fn("scroll",r)}switch(n){case"input":jf(r),oy(r,a,!0);break;case"textarea":jf(r),sy(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=kd)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ox(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ei]=t,e[Ku]=r,t_(e,t,!1,!1),t.stateNode=e;e:{switch(o=o0(n,r),n){case"dialog":fn("cancel",e),fn("close",e),i=r;break;case"iframe":case"object":case"embed":fn("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ou.length;i++)fn(Ou[i],e);i=r;break;case"source":fn("error",e),i=r;break;case"img":case"image":case"link":fn("error",e),fn("load",e),i=r;break;case"details":fn("toggle",e),i=r;break;case"input":ay(e,r),i=e0(e,r),fn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),fn("invalid",e);break;case"textarea":ly(e,r),i=r0(e,r),fn("invalid",e);break;default:i=r}a0(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?kx(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Nx(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gu(e,u):typeof u=="number"&&Gu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bu.hasOwnProperty(a)?u!=null&&a==="onScroll"&&fn("scroll",e):u!=null&&av(e,a,u,o))}switch(n){case"input":jf(e),oy(e,r,!1);break;case"textarea":jf(e),sy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+za(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Wl(e,!!r.multiple,a,!1):r.defaultValue!=null&&Wl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jn(t),null;case 6:if(e&&t.stateNode!=null)r_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=Lo(Zu.current),Lo(Si.current),Wf(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ei]=t,(a=r.nodeValue!==n)&&(e=Nr,e!==null))switch(e.tag){case 3:Hf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hf(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ei]=t,t.stateNode=r}return Jn(t),null;case 13:if(dn(xn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pn&&Or!==null&&t.mode&1&&!(t.flags&128))EE(),ns(),t.flags|=98560,a=!1;else if(a=Wf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[Ei]=t}else ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jn(t),a=!1}else Jr!==null&&(B0(Jr),Jr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xn.current&1?zn===0&&(zn=3):Gv())),t.updateQueue!==null&&(t.flags|=4),Jn(t),null);case 4:return is(),P0(e,t),e===null&&Yu(t.stateNode.containerInfo),Jn(t),null;case 10:return Tv(t.type._context),Jn(t),null;case 17:return xr(t.type)&&Id(),Jn(t),null;case 19:if(dn(xn),a=t.memoizedState,a===null)return Jn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)gu(a,!1);else{if(zn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gd(e),o!==null){for(t.flags|=128,gu(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return un(xn,xn.current&1|2),t.child}e=e.sibling}a.tail!==null&&In()>os&&(t.flags|=128,r=!0,gu(a,!1),t.lanes=4194304)}else{if(!r)if(e=Gd(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!pn)return Jn(t),null}else 2*In()-a.renderingStartTime>os&&n!==1073741824&&(t.flags|=128,r=!0,gu(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=In(),t.sibling=null,n=xn.current,un(xn,r?n&1|2:n&1),t):(Jn(t),null);case 22:case 23:return Bv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Rr&1073741824&&(Jn(t),t.subtreeFlags&6&&(t.flags|=8192)):Jn(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function ob(e,t){switch(Ev(t),t.tag){case 1:return xr(t.type)&&Id(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return is(),dn(yr),dn(nr),Rv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lv(t),null;case 13:if(dn(xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dn(xn),null;case 4:return is(),null;case 10:return Tv(t.type._context),null;case 22:case 23:return Bv(),null;case 24:return null;default:return null}}var Qf=!1,er=!1,lb=typeof WeakSet=="function"?WeakSet:Set,it=null;function Ul(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(e,t,r)}else n.current=null}function k0(e,t,n){try{n()}catch(r){Ln(e,t,r)}}var qy=!1;function sb(e,t){if(v0=Od,e=lE(),yv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,f=0,m=0,h=e,d=null;t:for(;;){for(var w;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(w=h.firstChild)!==null;)d=h,h=w;for(;;){if(h===e)break t;if(d===n&&++f===i&&(l=o),d===a&&++m===r&&(u=o),(w=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(g0={focusedElem:e,selectionRange:n},Od=!1,it=t;it!==null;)if(t=it,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,it=e;else for(;it!==null;){t=it;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var L=b.memoizedProps,I=b.memoizedState,y=t.stateNode,T=y.getSnapshotBeforeUpdate(t.elementType===t.type?L:qr(t.type,L),I);y.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(F){Ln(t,t.return,F)}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}return b=qy,qy=!1,b}function ju(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&k0(t,n,a)}i=i.next}while(i!==r)}}function xh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function I0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function i_(e){var t=e.alternate;t!==null&&(e.alternate=null,i_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ei],delete t[Ku],delete t[E0],delete t[VT],delete t[HT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function a_(e){return e.tag===5||e.tag===3||e.tag===4}function Zy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||a_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function D0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kd));else if(r!==4&&(e=e.child,e!==null))for(D0(e,t,n),e=e.sibling;e!==null;)D0(e,t,n),e=e.sibling}function M0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(M0(e,t,n),e=e.sibling;e!==null;)M0(e,t,n),e=e.sibling}var Qn=null,Zr=!1;function _a(e,t,n){for(n=n.child;n!==null;)o_(e,t,n),n=n.sibling}function o_(e,t,n){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(fh,n)}catch{}switch(n.tag){case 5:er||Ul(n,t);case 6:var r=Qn,i=Zr;Qn=null,_a(e,t,n),Qn=r,Zr=i,Qn!==null&&(Zr?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(Zr?(e=Qn,n=n.stateNode,e.nodeType===8?vp(e.parentNode,n):e.nodeType===1&&vp(e,n),Hu(e)):vp(Qn,n.stateNode));break;case 4:r=Qn,i=Zr,Qn=n.stateNode.containerInfo,Zr=!0,_a(e,t,n),Qn=r,Zr=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&k0(n,t,o),i=i.next}while(i!==r)}_a(e,t,n);break;case 1:if(!er&&(Ul(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ln(n,t,l)}_a(e,t,n);break;case 21:_a(e,t,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,_a(e,t,n),er=r):_a(e,t,n);break;default:_a(e,t,n)}}function Jy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lb),t.forEach(function(r){var i=gb.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,Zr=!1;break e;case 3:Qn=l.stateNode.containerInfo,Zr=!0;break e;case 4:Qn=l.stateNode.containerInfo,Zr=!0;break e}l=l.return}if(Qn===null)throw Error(ke(160));o_(a,o,i),Qn=null,Zr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Ln(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)l_(t,e),t=t.sibling}function l_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kr(t,e),vi(e),r&4){try{ju(3,e,e.return),xh(3,e)}catch(L){Ln(e,e.return,L)}try{ju(5,e,e.return)}catch(L){Ln(e,e.return,L)}}break;case 1:Kr(t,e),vi(e),r&512&&n!==null&&Ul(n,n.return);break;case 5:if(Kr(t,e),vi(e),r&512&&n!==null&&Ul(n,n.return),e.flags&32){var i=e.stateNode;try{Gu(i,"")}catch(L){Ln(e,e.return,L)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Lx(i,a),o0(l,o);var f=o0(l,a);for(o=0;o<u.length;o+=2){var m=u[o],h=u[o+1];m==="style"?kx(i,h):m==="dangerouslySetInnerHTML"?Nx(i,h):m==="children"?Gu(i,h):av(i,m,h,f)}switch(l){case"input":t0(i,a);break;case"textarea":Rx(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Wl(i,!!a.multiple,w,!1):d!==!!a.multiple&&(a.defaultValue!=null?Wl(i,!!a.multiple,a.defaultValue,!0):Wl(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ku]=a}catch(L){Ln(e,e.return,L)}}break;case 6:if(Kr(t,e),vi(e),r&4){if(e.stateNode===null)throw Error(ke(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(L){Ln(e,e.return,L)}}break;case 3:if(Kr(t,e),vi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hu(t.containerInfo)}catch(L){Ln(e,e.return,L)}break;case 4:Kr(t,e),vi(e);break;case 13:Kr(t,e),vi(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Fv=In())),r&4&&Jy(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(er=(f=er)||m,Kr(t,e),er=f):Kr(t,e),vi(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(it=e,m=e.child;m!==null;){for(h=it=m;it!==null;){switch(d=it,w=d.child,d.tag){case 0:case 11:case 14:case 15:ju(4,d,d.return);break;case 1:Ul(d,d.return);var b=d.stateNode;if(typeof b.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(L){Ln(r,n,L)}}break;case 5:Ul(d,d.return);break;case 22:if(d.memoizedState!==null){t1(h);continue}}w!==null?(w.return=d,it=w):t1(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Px("display",o))}catch(L){Ln(e,e.return,L)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(L){Ln(e,e.return,L)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kr(t,e),vi(e),r&4&&Jy(e);break;case 21:break;default:Kr(t,e),vi(e)}}function vi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(a_(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gu(i,""),r.flags&=-33);var a=Zy(e);M0(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zy(e);D0(e,l,o);break;default:throw Error(ke(161))}}catch(u){Ln(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ub(e,t,n){it=e,s_(e)}function s_(e,t,n){for(var r=(e.mode&1)!==0;it!==null;){var i=it,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qf;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||er;l=Qf;var f=er;if(Qf=o,(er=u)&&!f)for(it=i;it!==null;)o=it,u=o.child,o.tag===22&&o.memoizedState!==null?n1(i):u!==null?(u.return=o,it=u):n1(i);for(;a!==null;)it=a,s_(a),a=a.sibling;it=i,Qf=l,er=f}e1(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,it=a):e1(e)}}function e1(e){for(;it!==null;){var t=it;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:er||xh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&jy(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jy(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Hu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}er||t.flags&512&&I0(t)}catch(d){Ln(t,t.return,d)}}if(t===e){it=null;break}if(n=t.sibling,n!==null){n.return=t.return,it=n;break}it=t.return}}function t1(e){for(;it!==null;){var t=it;if(t===e){it=null;break}var n=t.sibling;if(n!==null){n.return=t.return,it=n;break}it=t.return}}function n1(e){for(;it!==null;){var t=it;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xh(4,t)}catch(u){Ln(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ln(t,i,u)}}var a=t.return;try{I0(t)}catch(u){Ln(t,a,u)}break;case 5:var o=t.return;try{I0(t)}catch(u){Ln(t,o,u)}}}catch(u){Ln(t,t.return,u)}if(t===e){it=null;break}var l=t.sibling;if(l!==null){l.return=t.return,it=l;break}it=t.return}}var cb=Math.ceil,Vd=Ki.ReactCurrentDispatcher,Mv=Ki.ReactCurrentOwner,Vr=Ki.ReactCurrentBatchConfig,en=0,Xn=null,jn=null,Kn=0,Rr=0,Vl=Wa(0),zn=0,nc=null,$o=0,Eh=0,jv=0,Fu=null,vr=null,Fv=0,os=1/0,Gi=null,Hd=!1,j0=null,Fa=null,Kf=!1,Oa=null,Wd=0,$u=0,F0=null,xd=-1,Ed=0;function lr(){return en&6?In():xd!==-1?xd:xd=In()}function $a(e){return e.mode&1?en&2&&Kn!==0?Kn&-Kn:XT.transition!==null?(Ed===0&&(Ed=Hx()),Ed):(e=rn,e!==0||(e=window.event,e=e===void 0?16:Zx(e.type)),e):1}function ni(e,t,n,r){if(50<$u)throw $u=0,F0=null,Error(ke(185));uc(e,n,r),(!(en&2)||e!==Xn)&&(e===Xn&&(!(en&2)&&(Eh|=n),zn===4&&La(e,Kn)),Er(e,r),n===1&&en===0&&!(t.mode&1)&&(os=In()+500,vh&&Xa()))}function Er(e,t){var n=e.callbackNode;Xw(e,t);var r=Rd(e,e===Xn?Kn:0);if(r===0)n!==null&&fy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fy(n),t===1)e.tag===0?WT(r1.bind(null,e)):gE(r1.bind(null,e)),zT(function(){!(en&6)&&Xa()}),n=null;else{switch(Wx(r)){case 1:n=cv;break;case 4:n=Ux;break;case 16:n=Ld;break;case 536870912:n=Vx;break;default:n=Ld}n=v_(n,u_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function u_(e,t){if(xd=-1,Ed=0,en&6)throw Error(ke(327));var n=e.callbackNode;if(ql()&&e.callbackNode!==n)return null;var r=Rd(e,e===Xn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xd(e,r);else{t=r;var i=en;en|=2;var a=f_();(Xn!==e||Kn!==t)&&(Gi=null,os=In()+500,Po(e,t));do try{hb();break}catch(l){c_(e,l)}while(!0);wv(),Vd.current=a,en=i,jn!==null?t=0:(Xn=null,Kn=0,t=zn)}if(t!==0){if(t===2&&(i=f0(e),i!==0&&(r=i,t=$0(e,i))),t===1)throw n=nc,Po(e,0),La(e,r),Er(e,In()),n;if(t===6)La(e,r);else{if(i=e.current.alternate,!(r&30)&&!fb(i)&&(t=Xd(e,r),t===2&&(a=f0(e),a!==0&&(r=a,t=$0(e,a))),t===1))throw n=nc,Po(e,0),La(e,r),Er(e,In()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:To(e,vr,Gi);break;case 3:if(La(e,r),(r&130023424)===r&&(t=Fv+500-In(),10<t)){if(Rd(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){lr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=x0(To.bind(null,e,vr,Gi),t);break}To(e,vr,Gi);break;case 4:if(La(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ti(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cb(r/1960))-r,10<r){e.timeoutHandle=x0(To.bind(null,e,vr,Gi),r);break}To(e,vr,Gi);break;case 5:To(e,vr,Gi);break;default:throw Error(ke(329))}}}return Er(e,In()),e.callbackNode===n?u_.bind(null,e):null}function $0(e,t){var n=Fu;return e.current.memoizedState.isDehydrated&&(Po(e,t).flags|=256),e=Xd(e,t),e!==2&&(t=vr,vr=n,t!==null&&B0(t)),e}function B0(e){vr===null?vr=e:vr.push.apply(vr,e)}function fb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ri(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~jv,t&=~Eh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ti(t),r=1<<n;e[n]=-1,t&=~r}}function r1(e){if(en&6)throw Error(ke(327));ql();var t=Rd(e,0);if(!(t&1))return Er(e,In()),null;var n=Xd(e,t);if(e.tag!==0&&n===2){var r=f0(e);r!==0&&(t=r,n=$0(e,r))}if(n===1)throw n=nc,Po(e,0),La(e,t),Er(e,In()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,To(e,vr,Gi),Er(e,In()),null}function $v(e,t){var n=en;en|=1;try{return e(t)}finally{en=n,en===0&&(os=In()+500,vh&&Xa())}}function Bo(e){Oa!==null&&Oa.tag===0&&!(en&6)&&ql();var t=en;en|=1;var n=Vr.transition,r=rn;try{if(Vr.transition=null,rn=1,e)return e()}finally{rn=r,Vr.transition=n,en=t,!(en&6)&&Xa()}}function Bv(){Rr=Vl.current,dn(Vl)}function Po(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,GT(n)),jn!==null)for(n=jn.return;n!==null;){var r=n;switch(Ev(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Id();break;case 3:is(),dn(yr),dn(nr),Rv();break;case 5:Lv(r);break;case 4:is();break;case 13:dn(xn);break;case 19:dn(xn);break;case 10:Tv(r.type._context);break;case 22:case 23:Bv()}n=n.return}if(Xn=e,jn=e=Ba(e.current,null),Kn=Rr=t,zn=0,nc=null,jv=Eh=$o=0,vr=Fu=null,Ao!==null){for(t=0;t<Ao.length;t++)if(n=Ao[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Ao=null}return e}function c_(e,t){do{var n=jn;try{if(wv(),vd.current=Ud,zd){for(var r=En.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zd=!1}if(Fo=0,Wn=Gn=En=null,Mu=!1,Ju=0,Mv.current=null,n===null||n.return===null){zn=1,nc=t,jn=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Kn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var d=m.alternate;d?(m.updateQueue=d.updateQueue,m.memoizedState=d.memoizedState,m.lanes=d.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=Vy(o);if(w!==null){w.flags&=-257,Hy(w,o,l,a,t),w.mode&1&&Uy(a,f,t),t=w,u=f;var b=t.updateQueue;if(b===null){var L=new Set;L.add(u),t.updateQueue=L}else b.add(u);break e}else{if(!(t&1)){Uy(a,f,t),Gv();break e}u=Error(ke(426))}}else if(pn&&l.mode&1){var I=Vy(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Hy(I,o,l,a,t),_v(as(u,l));break e}}a=u=as(u,l),zn!==4&&(zn=2),Fu===null?Fu=[a]:Fu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=XE(a,u,t);My(a,y);break e;case 1:l=u;var T=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof T.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Fa===null||!Fa.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var F=YE(a,l,t);My(a,F);break e}}a=a.return}while(a!==null)}h_(n)}catch($){t=$,jn===n&&n!==null&&(jn=n=n.return);continue}break}while(!0)}function f_(){var e=Vd.current;return Vd.current=Ud,e===null?Ud:e}function Gv(){(zn===0||zn===3||zn===2)&&(zn=4),Xn===null||!($o&268435455)&&!(Eh&268435455)||La(Xn,Kn)}function Xd(e,t){var n=en;en|=2;var r=f_();(Xn!==e||Kn!==t)&&(Gi=null,Po(e,t));do try{db();break}catch(i){c_(e,i)}while(!0);if(wv(),en=n,Vd.current=r,jn!==null)throw Error(ke(261));return Xn=null,Kn=0,zn}function db(){for(;jn!==null;)d_(jn)}function hb(){for(;jn!==null&&!Fw();)d_(jn)}function d_(e){var t=p_(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,t===null?h_(e):jn=t,Mv.current=null}function h_(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ob(n,t),n!==null){n.flags&=32767,jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zn=6,jn=null;return}}else if(n=ab(n,t,Rr),n!==null){jn=n;return}if(t=t.sibling,t!==null){jn=t;return}jn=t=e}while(t!==null);zn===0&&(zn=5)}function To(e,t,n){var r=rn,i=Vr.transition;try{Vr.transition=null,rn=1,mb(e,t,n,r)}finally{Vr.transition=i,rn=r}return null}function mb(e,t,n,r){do ql();while(Oa!==null);if(en&6)throw Error(ke(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Yw(e,a),e===Xn&&(jn=Xn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kf||(Kf=!0,v_(Ld,function(){return ql(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Vr.transition,Vr.transition=null;var o=rn;rn=1;var l=en;en|=4,Mv.current=null,sb(e,n),l_(n,e),IT(g0),Od=!!v0,g0=v0=null,e.current=n,ub(n),$w(),en=l,rn=o,Vr.transition=a}else e.current=n;if(Kf&&(Kf=!1,Oa=e,Wd=i),a=e.pendingLanes,a===0&&(Fa=null),zw(n.stateNode),Er(e,In()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hd)throw Hd=!1,e=j0,j0=null,e;return Wd&1&&e.tag!==0&&ql(),a=e.pendingLanes,a&1?e===F0?$u++:($u=0,F0=e):$u=0,Xa(),null}function ql(){if(Oa!==null){var e=Wx(Wd),t=Vr.transition,n=rn;try{if(Vr.transition=null,rn=16>e?16:e,Oa===null)var r=!1;else{if(e=Oa,Oa=null,Wd=0,en&6)throw Error(ke(331));var i=en;for(en|=4,it=e.current;it!==null;){var a=it,o=a.child;if(it.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(it=f;it!==null;){var m=it;switch(m.tag){case 0:case 11:case 15:ju(8,m,a)}var h=m.child;if(h!==null)h.return=m,it=h;else for(;it!==null;){m=it;var d=m.sibling,w=m.return;if(i_(m),m===f){it=null;break}if(d!==null){d.return=w,it=d;break}it=w}}}var b=a.alternate;if(b!==null){var L=b.child;if(L!==null){b.child=null;do{var I=L.sibling;L.sibling=null,L=I}while(L!==null)}}it=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,it=o;else e:for(;it!==null;){if(a=it,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ju(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,it=y;break e}it=a.return}}var T=e.current;for(it=T;it!==null;){o=it;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,it=v;else e:for(o=T;it!==null;){if(l=it,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xh(9,l)}}catch($){Ln(l,l.return,$)}if(l===o){it=null;break e}var F=l.sibling;if(F!==null){F.return=l.return,it=F;break e}it=l.return}}if(en=i,Xa(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(fh,e)}catch{}r=!0}return r}finally{rn=n,Vr.transition=t}}return!1}function i1(e,t,n){t=as(n,t),t=XE(e,t,1),e=ja(e,t,1),t=lr(),e!==null&&(uc(e,1,t),Er(e,t))}function Ln(e,t,n){if(e.tag===3)i1(e,e,n);else for(;t!==null;){if(t.tag===3){i1(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fa===null||!Fa.has(r))){e=as(n,e),e=YE(t,e,1),t=ja(t,e,1),e=lr(),t!==null&&(uc(t,1,e),Er(t,e));break}}t=t.return}}function pb(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lr(),e.pingedLanes|=e.suspendedLanes&n,Xn===e&&(Kn&n)===n&&(zn===4||zn===3&&(Kn&130023424)===Kn&&500>In()-Fv?Po(e,0):jv|=n),Er(e,t)}function m_(e,t){t===0&&(e.mode&1?(t=Bf,Bf<<=1,!(Bf&130023424)&&(Bf=4194304)):t=1);var n=lr();e=Yi(e,t),e!==null&&(uc(e,t,n),Er(e,n))}function vb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),m_(e,n)}function gb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),m_(e,n)}var p_;p_=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gr=!1,ib(e,t,n);gr=!!(e.flags&131072)}else gr=!1,pn&&t.flags&1048576&&yE(t,jd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yd(e,t),e=t.pendingProps;var i=ts(t,nr.current);Kl(t,n),i=Nv(null,t,r,e,i,n);var a=Pv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xr(r)?(a=!0,Dd(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cv(t),i.updater=gh,t.stateNode=i,i._reactInternals=t,C0(t,r,e,n),t=R0(null,t,r,!0,a,n)):(t.tag=0,pn&&a&&xv(t),ar(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yd(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=xb(r),e=qr(r,e),i){case 0:t=L0(null,t,r,e,n);break e;case 1:t=Yy(null,t,r,e,n);break e;case 11:t=Wy(null,t,r,e,n);break e;case 14:t=Xy(null,t,r,qr(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qr(r,i),L0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qr(r,i),Yy(e,t,r,i,n);case 3:e:{if(ZE(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,i=a.element,SE(e,t),Bd(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=as(Error(ke(423)),t),t=Qy(e,t,r,n,i);break e}else if(r!==i){i=as(Error(ke(424)),t),t=Qy(e,t,r,n,i);break e}else for(Or=Ma(t.stateNode.containerInfo.firstChild),Nr=t,pn=!0,Jr=null,n=CE(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ns(),r===i){t=Qi(e,t,n);break e}ar(e,t,r,n)}t=t.child}return t;case 5:return AE(t),e===null&&w0(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,y0(r,i)?o=null:a!==null&&y0(r,a)&&(t.flags|=32),qE(e,t),ar(e,t,o,n),t.child;case 6:return e===null&&w0(t),null;case 13:return JE(e,t,n);case 4:return Av(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=rs(t,null,r,n):ar(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qr(r,i),Wy(e,t,r,i,n);case 7:return ar(e,t,t.pendingProps,n),t.child;case 8:return ar(e,t,t.pendingProps.children,n),t.child;case 12:return ar(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,un(Fd,r._currentValue),r._currentValue=o,a!==null)if(ri(a.value,o)){if(a.children===i.children&&!yr.current){t=Qi(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Hi(-1,n&-n),u.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?u.next=u:(u.next=m.next,m.next=u),f.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),T0(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),T0(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ar(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Kl(t,n),i=Hr(i),r=r(i),t.flags|=1,ar(e,t,r,n),t.child;case 14:return r=t.type,i=qr(r,t.pendingProps),i=qr(r.type,i),Xy(e,t,r,i,n);case 15:return QE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qr(r,i),yd(e,t),t.tag=1,xr(r)?(e=!0,Dd(t)):e=!1,Kl(t,n),TE(t,r,i),C0(t,r,i,n),R0(null,t,r,!0,e,n);case 19:return e_(e,t,n);case 22:return KE(e,t,n)}throw Error(ke(156,t.tag))};function v_(e,t){return zx(e,t)}function yb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new yb(e,t,n,r)}function zv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xb(e){if(typeof e=="function")return zv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lv)return 11;if(e===sv)return 14}return 2}function Ba(e,t){var n=e.alternate;return n===null?(n=Ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _d(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")zv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Il:return ko(n.children,i,a,t);case ov:o=8,i|=8;break;case Kp:return e=Ur(12,n,t,i|2),e.elementType=Kp,e.lanes=a,e;case qp:return e=Ur(13,n,t,i),e.elementType=qp,e.lanes=a,e;case Zp:return e=Ur(19,n,t,i),e.elementType=Zp,e.lanes=a,e;case bx:return _h(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wx:o=10;break e;case Tx:o=9;break e;case lv:o=11;break e;case sv:o=14;break e;case ba:o=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Ur(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function ko(e,t,n,r){return e=Ur(7,e,r,t),e.lanes=n,e}function _h(e,t,n,r){return e=Ur(22,e,r,t),e.elementType=bx,e.lanes=n,e.stateNode={isHidden:!1},e}function Tp(e,t,n){return e=Ur(6,e,null,t),e.lanes=n,e}function bp(e,t,n){return t=Ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eb(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uv(e,t,n,r,i,a,o,l,u){return e=new Eb(e,t,n,l,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ur(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cv(a),e}function _b(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function g_(e){if(!e)return Ua;e=e._reactInternals;e:{if(Ho(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(xr(n))return vE(e,n,t)}return t}function y_(e,t,n,r,i,a,o,l,u){return e=Uv(n,r,!0,e,i,a,o,l,u),e.context=g_(null),n=e.current,r=lr(),i=$a(n),a=Hi(r,i),a.callback=t??null,ja(n,a,i),e.current.lanes=i,uc(e,i,r),Er(e,r),e}function Sh(e,t,n,r){var i=t.current,a=lr(),o=$a(i);return n=g_(n),t.context===null?t.context=n:t.pendingContext=n,t=Hi(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ja(i,t,o),e!==null&&(ni(e,i,o,a),pd(e,i,o)),o}function Yd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function a1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vv(e,t){a1(e,t),(e=e.alternate)&&a1(e,t)}function Sb(){return null}var x_=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hv(e){this._internalRoot=e}wh.prototype.render=Hv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));Sh(e,t,null,null)};wh.prototype.unmount=Hv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bo(function(){Sh(null,e,null,null)}),t[Xi]=null}};function wh(e){this._internalRoot=e}wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Aa.length&&t!==0&&t<Aa[n].priority;n++);Aa.splice(n,0,e),n===0&&qx(e)}};function Wv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function o1(){}function wb(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Yd(o);a.call(f)}}var o=y_(t,r,e,0,null,!1,!1,"",o1);return e._reactRootContainer=o,e[Xi]=o.current,Yu(e.nodeType===8?e.parentNode:e),Bo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Yd(u);l.call(f)}}var u=Uv(e,0,!1,null,null,!1,!1,"",o1);return e._reactRootContainer=u,e[Xi]=u.current,Yu(e.nodeType===8?e.parentNode:e),Bo(function(){Sh(t,u,n,r)}),u}function bh(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Yd(o);l.call(u)}}Sh(t,o,e,i)}else o=wb(n,t,e,i,r);return Yd(o)}Xx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ru(t.pendingLanes);n!==0&&(fv(t,n|1),Er(t,In()),!(en&6)&&(os=In()+500,Xa()))}break;case 13:Bo(function(){var r=Yi(e,1);if(r!==null){var i=lr();ni(r,e,1,i)}}),Vv(e,1)}};dv=function(e){if(e.tag===13){var t=Yi(e,134217728);if(t!==null){var n=lr();ni(t,e,134217728,n)}Vv(e,134217728)}};Yx=function(e){if(e.tag===13){var t=$a(e),n=Yi(e,t);if(n!==null){var r=lr();ni(n,e,t,r)}Vv(e,t)}};Qx=function(){return rn};Kx=function(e,t){var n=rn;try{return rn=e,t()}finally{rn=n}};s0=function(e,t,n){switch(t){case"input":if(t0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ph(r);if(!i)throw Error(ke(90));Ax(r),t0(r,i)}}}break;case"textarea":Rx(e,n);break;case"select":t=n.value,t!=null&&Wl(e,!!n.multiple,t,!1)}};Mx=$v;jx=Bo;var Tb={usingClientEntryPoint:!1,Events:[fc,Fl,ph,Ix,Dx,$v]},yu={findFiberByHostInstance:Co,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bb={bundleType:yu.bundleType,version:yu.version,rendererPackageName:yu.rendererPackageName,rendererConfig:yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bx(e),e===null?null:e.stateNode},findFiberByHostInstance:yu.findFiberByHostInstance||Sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{fh=qf.inject(bb),_i=qf}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tb;kr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wv(t))throw Error(ke(200));return _b(e,t,null,n)};kr.createRoot=function(e,t){if(!Wv(e))throw Error(ke(299));var n=!1,r="",i=x_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Uv(e,1,!1,null,null,n,!1,r,i),e[Xi]=t.current,Yu(e.nodeType===8?e.parentNode:e),new Hv(t)};kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=Bx(t),e=e===null?null:e.stateNode,e};kr.flushSync=function(e){return Bo(e)};kr.hydrate=function(e,t,n){if(!Th(t))throw Error(ke(200));return bh(null,e,t,!0,n)};kr.hydrateRoot=function(e,t,n){if(!Wv(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=x_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=y_(t,null,e,1,n??null,i,!1,a,o),e[Xi]=t.current,Yu(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new wh(t)};kr.render=function(e,t,n){if(!Th(t))throw Error(ke(200));return bh(null,e,t,!1,n)};kr.unmountComponentAtNode=function(e){if(!Th(e))throw Error(ke(40));return e._reactRootContainer?(Bo(function(){bh(null,null,e,!1,function(){e._reactRootContainer=null,e[Xi]=null})}),!0):!1};kr.unstable_batchedUpdates=$v;kr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Th(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return bh(e,t,n,!1,r)};kr.version="18.2.0-next-9e3b772b8-20220608";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(e){console.error(e)}}E_(),yx.exports=kr;var Cb=yx.exports,l1=Cb;Yp.createRoot=l1.createRoot,Yp.hydrateRoot=l1.hydrateRoot;/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}var Na;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Na||(Na={}));const s1="popstate";function Ab(e){e===void 0&&(e={});function t(i,a){let{pathname:o="/",search:l="",hash:u=""}=Wo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),G0("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,f=u.indexOf("#");l=f===-1?u:u.slice(0,f)}return l+"#"+(typeof a=="string"?a:Qd(a))}function r(i,a){Ch(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return Rb(t,n,r,e)}function Fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ch(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Lb(){return Math.random().toString(36).substr(2,8)}function u1(e,t){return{usr:e.state,key:e.key,idx:t}}function G0(e,t,n,r){return n===void 0&&(n=null),rc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wo(t):t,{state:n,key:t&&t.key||r||Lb()})}function Qd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Wo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Rb(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Na.Pop,u=null,f=m();f==null&&(f=0,o.replaceState(rc({},o.state,{idx:f}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=Na.Pop;let I=m(),y=I==null?null:I-f;f=I,u&&u({action:l,location:L.location,delta:y})}function d(I,y){l=Na.Push;let T=G0(L.location,I,y);n&&n(T,I),f=m()+1;let v=u1(T,f),F=L.createHref(T);try{o.pushState(v,"",F)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(F)}a&&u&&u({action:l,location:L.location,delta:1})}function w(I,y){l=Na.Replace;let T=G0(L.location,I,y);n&&n(T,I),f=m();let v=u1(T,f),F=L.createHref(T);o.replaceState(v,"",F),a&&u&&u({action:l,location:L.location,delta:0})}function b(I){let y=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof I=="string"?I:Qd(I);return Fn(y,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,y)}let L={get action(){return l},get location(){return e(i,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(s1,h),u=I,()=>{i.removeEventListener(s1,h),u=null}},createHref(I){return t(i,I)},createURL:b,encodeLocation(I){let y=b(I);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:w,go(I){return o.go(I)}};return L}var c1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(c1||(c1={}));function Ob(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Wo(t):t,i=Xv(r.pathname||"/",n);if(i==null)return null;let a=__(e);Nb(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=Bb(a[l],Ub(i));return o}function __(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Fn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let f=Ga([r,u.relativePath]),m=n.concat(u);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),__(a.children,t,m,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:Fb(f,a.index),routesMeta:m})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of S_(a.path))i(a,o,u)}),t}function S_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=S_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function Nb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$b(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Pb=/^:\w+$/,kb=3,Ib=2,Db=1,Mb=10,jb=-2,f1=e=>e==="*";function Fb(e,t){let n=e.split("/"),r=n.length;return n.some(f1)&&(r+=jb),t&&(r+=Ib),n.filter(i=>!f1(i)).reduce((i,a)=>i+(Pb.test(a)?kb:a===""?Db:Mb),r)}function $b(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Bb(e,t){let{routesMeta:n}=e,r={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=Gb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f);if(!m)return null;Object.assign(r,m.params);let h=l.route;a.push({params:r,pathname:Ga([i,m.pathname]),pathnameBase:Xb(Ga([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Ga([i,m.pathnameBase]))}return a}function Gb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=zb(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,m,h)=>{let{paramName:d,isOptional:w}=m;if(d==="*"){let L=l[h]||"";o=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const b=l[h];return w&&!b?f[d]=void 0:f[d]=Vb(b||"",d),f},{}),pathname:a,pathnameBase:o,pattern:e}}function zb(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ch(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Ub(e){try{return decodeURI(e)}catch(t){return Ch(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vb(e,t){try{return decodeURIComponent(e)}catch(n){return Ch(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Xv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Hb(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Wo(e):e;return{pathname:n?n.startsWith("/")?n:Wb(n,t):t,search:Yb(r),hash:Qb(i)}}function Wb(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Cp(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function T_(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Wo(e):(i=rc({},e),Fn(!i.pathname||!i.pathname.includes("?"),Cp("?","pathname","search",i)),Fn(!i.pathname||!i.pathname.includes("#"),Cp("#","pathname","hash",i)),Fn(!i.search||!i.search.includes("#"),Cp("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else if(r){let h=t[t.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h.pop();i.pathname=d.join("/")}l="/"+h.join("/")}else{let h=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}l=h>=0?t[h]:"/"}let u=Hb(i,l),f=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}const Ga=e=>e.join("/").replace(/\/\/+/g,"/"),Xb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Kb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const b_=["post","put","patch","delete"];new Set(b_);const qb=["get",...b_];new Set(qb);/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kd(){return Kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kd.apply(this,arguments)}const Yv=D.createContext(null),Zb=D.createContext(null),ds=D.createContext(null),Ah=D.createContext(null),Ya=D.createContext({outlet:null,matches:[],isDataRoute:!1}),C_=D.createContext(null);function Jb(e,t){let{relative:n}=t===void 0?{}:t;hc()||Fn(!1);let{basename:r,navigator:i}=D.useContext(ds),{hash:a,pathname:o,search:l}=L_(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ga([r,o])),i.createHref({pathname:u,search:l,hash:a})}function hc(){return D.useContext(Ah)!=null}function Lh(){return hc()||Fn(!1),D.useContext(Ah).location}function A_(e){D.useContext(ds).static||D.useLayoutEffect(e)}function hs(){let{isDataRoute:e}=D.useContext(Ya);return e?dC():eC()}function eC(){hc()||Fn(!1);let e=D.useContext(Yv),{basename:t,navigator:n}=D.useContext(ds),{matches:r}=D.useContext(Ya),{pathname:i}=Lh(),a=JSON.stringify(w_(r).map(u=>u.pathnameBase)),o=D.useRef(!1);return A_(()=>{o.current=!0}),D.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=T_(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ga([t,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[t,n,a,i,e])}function Rh(){let{matches:e}=D.useContext(Ya),t=e[e.length-1];return t?t.params:{}}function L_(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=D.useContext(Ya),{pathname:i}=Lh(),a=JSON.stringify(w_(r).map(o=>o.pathnameBase));return D.useMemo(()=>T_(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function tC(e,t){return nC(e,t)}function nC(e,t,n){hc()||Fn(!1);let{navigator:r}=D.useContext(ds),{matches:i}=D.useContext(Ya),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Lh(),f;if(t){var m;let L=typeof t=="string"?Wo(t):t;l==="/"||(m=L.pathname)!=null&&m.startsWith(l)||Fn(!1),f=L}else f=u;let h=f.pathname||"/",d=l==="/"?h:h.slice(l.length)||"/",w=Ob(e,{pathname:d}),b=lC(w&&w.map(L=>Object.assign({},L,{params:Object.assign({},o,L.params),pathname:Ga([l,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?l:Ga([l,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),i,n);return t&&b?D.createElement(Ah.Provider,{value:{location:Kd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Na.Pop}},b):b}function rC(){let e=fC(),t=Kb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,a)}const iC=D.createElement(rC,null);class aC extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?D.createElement(Ya.Provider,{value:this.props.routeContext},D.createElement(C_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oC(e){let{routeContext:t,match:n,children:r}=e,i=D.useContext(Yv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ya.Provider,{value:t},r)}function lC(e,t,n){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),e==null){var i;if((i=n)!=null&&i.errors)e=n.matches;else return null}let a=e,o=(r=n)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id]));l>=0||Fn(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,u,f)=>{let m=u.route.id?o==null?void 0:o[u.route.id]:null,h=null;n&&(h=u.route.errorElement||iC);let d=t.concat(a.slice(0,f+1)),w=()=>{let b;return m?b=h:u.route.Component?b=D.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,D.createElement(oC,{match:u,routeContext:{outlet:l,matches:d,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?D.createElement(aC,{location:n.location,revalidation:n.revalidation,component:h,error:m,children:w(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):w()},null)}var R_=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(R_||{}),qd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qd||{});function sC(e){let t=D.useContext(Yv);return t||Fn(!1),t}function uC(e){let t=D.useContext(Zb);return t||Fn(!1),t}function cC(e){let t=D.useContext(Ya);return t||Fn(!1),t}function O_(e){let t=cC(),n=t.matches[t.matches.length-1];return n.route.id||Fn(!1),n.route.id}function fC(){var e;let t=D.useContext(C_),n=uC(qd.UseRouteError),r=O_(qd.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function dC(){let{router:e}=sC(R_.UseNavigateStable),t=O_(qd.UseNavigateStable),n=D.useRef(!1);return A_(()=>{n.current=!0}),D.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Kd({fromRouteId:t},a)))},[e,t])}function bo(e){Fn(!1)}function hC(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Na.Pop,navigator:a,static:o=!1}=e;hc()&&Fn(!1);let l=t.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=Wo(r));let{pathname:f="/",search:m="",hash:h="",state:d=null,key:w="default"}=r,b=D.useMemo(()=>{let L=Xv(f,l);return L==null?null:{location:{pathname:L,search:m,hash:h,state:d,key:w},navigationType:i}},[l,f,m,h,d,w,i]);return b==null?null:D.createElement(ds.Provider,{value:u},D.createElement(Ah.Provider,{children:n,value:b}))}function mC(e){let{children:t,location:n}=e;return tC(z0(t),n)}new Promise(()=>{});function z0(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let a=[...t,i];if(r.type===D.Fragment){n.push.apply(n,z0(r.props.children,a));return}r.type!==bo&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=z0(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(this,arguments)}function pC(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function vC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gC(e,t){return e.button===0&&(!t||t==="_self")&&!vC(e)}const yC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],xC="startTransition",d1=vw[xC];function EC(e){let{basename:t,children:n,future:r,window:i}=e,a=D.useRef();a.current==null&&(a.current=Ab({window:i,v5Compat:!0}));let o=a.current,[l,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},m=D.useCallback(h=>{f&&d1?d1(()=>u(h)):u(h)},[u,f]);return D.useLayoutEffect(()=>o.listen(m),[o,m]),D.createElement(hC,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}const _C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wi=D.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:f,preventScrollReset:m,unstable_viewTransition:h}=t,d=pC(t,yC),{basename:w}=D.useContext(ds),b,L=!1;if(typeof f=="string"&&SC.test(f)&&(b=f,_C))try{let v=new URL(window.location.href),F=f.startsWith("//")?new URL(v.protocol+f):new URL(f),$=Xv(F.pathname,w);F.origin===v.origin&&$!=null?f=$+F.search+F.hash:L=!0}catch{}let I=Jb(f,{relative:i}),y=wC(f,{replace:o,state:l,target:u,preventScrollReset:m,relative:i,unstable_viewTransition:h});function T(v){r&&r(v),v.defaultPrevented||y(v)}return D.createElement("a",U0({},d,{href:b||I,onClick:L||a?r:T,ref:n,target:u}))});var h1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(h1||(h1={}));var m1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(m1||(m1={}));function wC(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l}=t===void 0?{}:t,u=hs(),f=Lh(),m=L_(e,{relative:o});return D.useCallback(h=>{if(gC(h,n)){h.preventDefault();let d=r!==void 0?r:Qd(f)===Qd(m);u(e,{replace:d,state:i,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[f,u,m,r,i,n,e,a,o,l])}function TC(){return g.jsxs("div",{className:"mobile-message-page",children:[g.jsx("div",{className:"mobile-header",children:"Latentscope is designed to be used on a desktop computer. Please use a desktop computer to access this page."}),g.jsxs("div",{className:"mobile-content",children:["Latentscope is meant to be used with relatively larger datasets, setup for either local computation or on-prem or a trusted cloud server. It is a workflow & tool combined for processing and exploring large amounts of text. Please come back on a desktop and try installing it locally!",g.jsx("br",{}),g.jsx("br",{}),g.jsx("a",{href:"https://github.com/enjalot/latent-scope",children:"GitHub repository"})]})]})}const bC="/api";function Qv(e,t,n,r=500){let i=null;return console.log("start polling",n),i=setInterval(()=>{fetch(`${bC}/jobs/job?dataset=${e==null?void 0:e.id}&job_id=${n}`).then(a=>{if(!a.ok)throw clearInterval(i),t(null),new Error(`HTTP error! status: ${a.status}`);return a.json()}).then(a=>{console.log("polling job status",a),t(a),(a.status==="completed"||a.status==="error"||a.status=="dead")&&(clearInterval(i),setTimeout(()=>{t(null),t(a)},r))}).catch(a=>{console.error("Error polling job status",a),clearInterval(i),t(null)})},r),console.log("returning jobPolling cleanup"),()=>{console.log("inside cleanup",i),i&&clearInterval(i)}}function Ti(e,t,n,r=500){return{startJob:D.useCallback(a=>{fetch(`${n}?dataset=${e.id}&${new URLSearchParams(a)}`).then(o=>o.json()).then(o=>{const l=o.job_id;Qv(e,t,l,r)})},[e,t,n])}}var N_={exports:{}},CC="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",AC=CC,LC=AC;function P_(){}function k_(){}k_.resetWarningCache=P_;var RC=function(){function e(r,i,a,o,l,u){if(u!==LC){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:k_,resetWarningCache:P_};return n.PropTypes=n,n};N_.exports=RC();var OC=N_.exports;const Ze=Z0(OC);Xo.propTypes={job:Ze.object,onlyLast:Ze.bool,clearJob:Ze.func,rerunJob:Ze.func,killJob:Ze.func};function Xo({job:e,onlyLast:t,clearJob:n,rerunJob:r,killJob:i}){const a=D.useRef(null);D.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]);const o=Math.round((+new Date-+new Date(e==null?void 0:e.last_update))/1e3);return g.jsx(g.Fragment,{children:e?g.jsxs("div",{className:"job-progress",children:["Running ",g.jsx("b",{children:e.job_name}),g.jsx("br",{}),g.jsx("code",{children:e.command}),g.jsx("pre",{ref:a,children:t?e.progress[e.progress.length-1]:e.progress.join(`
`)}),n&&e.status=="completed"?g.jsx("button",{onClick:n,children:" Dismiss"}):null,i&&e.status=="running"?g.jsx("button",{onClick:()=>{i(e)},children:" Kill"}):null,e.status=="error"?g.jsxs("div",{className:"error-choices",children:[n?g.jsx("button",{onClick:n,children:" Dismiss"}):null,r?g.jsx("button",{onClick:()=>r(e),children:" Rerun"}):null]}):null,g.jsxs("span",{className:"timer",children:[o," seconds since last update"]})]}):g.jsx(g.Fragment,{})})}const xu="/api";function NC(){const[e,t]=D.useState([]);D.useEffect(()=>{fetch(`${xu}/datasets`).then(d=>d.json()).then(d=>t(d))},[]);const[n,r]=D.useState({});D.useEffect(()=>{e.forEach(d=>{fetch(`${xu}/datasets/${d.id}/scopes`).then(w=>w.json()).then(w=>r(b=>{const L={...b};return L[d.id]=w,L}))})},[e]),D.useEffect(()=>{console.log("scopes",n)},[n]);const[i,a]=D.useState(null),o=d=>{d.preventDefault();const w=d.target[1].value,L=d.target[0].files[0],I=new FormData;I.append("dataset",w),I.append("file",L),fetch(`${xu}/jobs/ingest`,{method:"POST",body:I}).then(y=>y.json()).then(y=>{console.log("Job ID:",y.job_id),Qv({id:w},a,y.job_id)}).catch(y=>{console.error("Error:",y)})},l=d=>{d.preventDefault()};function u(d){let w=d.substring(0,d.lastIndexOf("."));return w=w.replace(/\s/g,"-"),w}const f=d=>{d.preventDefault(),document.getElementById("upload-button").files=d.dataTransfer.files;const w=d.dataTransfer.files[0].name,b=u(w);document.getElementById("dataset-name").value=b},m=d=>{const w=d.target.files[0].name,b=u(w);document.getElementById("dataset-name").value=b},h=hs();return D.useEffect(()=>{i&&i.status==="completed"&&setTimeout(function(){h(`/datasets/${i.dataset}/setup`)},1e3)},[i,h]),g.jsxs("div",{className:"home",children:[g.jsxs("div",{className:"new-dataset section",children:[g.jsx("h3",{children:"Create new dataset"}),g.jsxs("form",{onSubmit:o,onDragOver:l,onDrop:f,children:[g.jsx("label",{htmlFor:"upload-button",children:g.jsx("span",{children:"Import a CSV or Parquet file to create a new dataset"})}),g.jsx("input",{hidden:!0,id:"upload-button",type:"file",onChange:m}),g.jsx("input",{id:"dataset-name",type:"text",placeholder:"Dataset name"}),g.jsx("button",{type:"submit",children:"Submit"})]}),g.jsx(Xo,{job:i,clearJob:()=>a(null)})]}),g.jsxs("div",{className:"section datasets",children:[g.jsx("h3",{children:"Datasets"}),g.jsx("div",{className:"datasets-content",children:e.map(d=>{var w;return g.jsxs("div",{className:"dataset",children:[g.jsxs("h3",{children:[" ",d.id," ",g.jsx(wi,{to:`/datasets/${d.id}/setup`,children:"Setup"})]}),g.jsxs("span",{children:[d.length," rows"]}),g.jsx("div",{className:"scope-links",children:n[d.id]&&n[d.id].map&&((w=n[d.id])==null?void 0:w.map((b,L)=>g.jsxs("div",{className:"scope-link",children:[g.jsxs(wi,{to:`/datasets/${d.id}/explore/${b.id}`,children:[b.label||b.id,g.jsx("br",{}),b.ignore_hulls?g.jsx("img",{src:`${xu}/files/${d.id}/umaps/${b.umap_id}.png`}):g.jsx("img",{src:`${xu}/files/${d.id}/clusters/${b.cluster_id}.png`})]}),g.jsx("br",{}),g.jsx("span",{className:"scope-description",children:b.description}),g.jsx("br",{}),g.jsx(wi,{to:`/datasets/${d.id}/setup/${b.id}`,children:"Configure"})]},L)))})]},d.id)})})]})]})}const p1="/api";Kv.propTypes={data:Ze.array.isRequired,tagset:Ze.object,datasetId:Ze.string,maxRows:Ze.number,onTagset:Ze.func,onHover:Ze.func,onClick:Ze.func};function Kv({data:e,tagset:t,datasetId:n,maxRows:r,onTagset:i,onHover:a,onClick:o}){if(!e.length)return g.jsx("p",{children:"No data available."});const l=Object.keys(e[0]);let u;function f(h,d){console.log("tag",h),console.log("index",d),console.log("tagset",t),console.log("tagset[tag]",t[h]),t[h].includes(d)?(console.log("removing"),fetch(`${p1}/tags/remove?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("removed",w),i(w)})):(console.log("adding"),fetch(`${p1}/tags/add?dataset=${n}&tag=${h}&index=${d}`).then(w=>w.json()).then(w=>{console.log("added",w),i(w)}))}t&&(u=Object.keys(t));const m=r?e.slice(0,r):e;return g.jsxs(g.Fragment,{children:[g.jsxs("table",{className:"datatable",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[l.map((h,d)=>g.jsx("th",{children:h},d)),u?g.jsx("th",{children:"tags"}):null]})}),g.jsx("tbody",{children:m.map((h,d)=>g.jsxs("tr",{onMouseEnter:()=>a&&a(h.index),onMouseLeave:()=>a&&a(),onClick:()=>o&&o(h.index),children:[l.map((w,b)=>g.jsx("td",{children:w=="url"?g.jsx("a",{href:h[w],children:"url"}):h[w]},b)),u?g.jsx("td",{children:u.map((w,b)=>g.jsx("button",{onClick:L=>{f(w,h.index),L.preventDefault(),L.stopPropagation()},className:t[w].includes(h.index)?"tag-active":"tag-inactive",children:w},b))}):null]},d))})]}),r&&e.length>r?g.jsxs("p",{children:["Showing ",r," of ",e.length," rows."]}):null]})}const PC="/api";Ro.propTypes={dataset:Ze.object.isRequired,indices:Ze.array.isRequired,distances:Ze.array,clusterIndices:Ze.array,clusterLabels:Ze.array,maxRows:Ze.number,tagset:Ze.object,onHover:Ze.func,onClick:Ze.func,onTagset:Ze.func};function Ro({dataset:e,indices:t,distances:n=[],clusterIndices:r=[],clusterLabels:i=[],maxRows:a,tagset:o,onHover:l,onClick:u,onTagset:f}){const[m,h]=D.useState([]),d=D.useCallback(w=>{e&&fetch(`${PC}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e.id,indices:w})}).then(b=>b.json()).then(b=>{let L=b.map((I,y)=>{let T=w[y],v={index:T,...I};return n&&n.length&&(v.distance=n[y]),r&&r.length&&i&&i.length&&(v.cluster=i[r[T].cluster].label),v});h(L)})},[e,n,r,i]);return D.useEffect(()=>{t&&t.length&&(console.log("refetching hydrate"),d(t))},[t]),g.jsx("div",{children:g.jsx(Kv,{data:m,tagset:o,datasetId:e==null?void 0:e.id,maxRows:a,onTagset:f,onHover:l,onClick:u})})}const I_=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),qv=(e,t)=>t?e.toLowerCase():e,D_=(e,{caseInsensitive:t}={})=>(n,r,i=1/0)=>{const a=qv(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(r),e.__times__[a].push(+i||1/0),{event:a,handler:r}},Zv=(e,{caseInsensitive:t}={})=>(n,r)=>{typeof n=="object"&&(r=n.handler,n=n.event);const i=qv(n,t);if(!e[i])return;const a=e[i].indexOf(r);a===-1||a>=e[i].length||(e[i].splice(a,1),e.__times__[i].splice(a,1))},v1=(e,t)=>()=>{e.forEach(n=>n(t))},M_=(e,{isGlobal:t,caseInsensitive:n,async:r}={})=>{const i=Zv(e);return(a,o,l={})=>{const u=qv(a,n);if(!e[u])return;const f=[...e[u]];if(f.forEach((m,h)=>{--e.__times__[u][h]<1&&i(u,m)}),r||l.async?setTimeout(v1(f,o),0):v1(f,o)(),t&&!l.isNoGlobalBroadcast)try{I_.postMessage({event:u,news:o})}catch(m){if(m instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw m}}},kC=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},j_=()=>({__times__:{}}),IC=({async:e=!1,caseInsensitive:t=!1,stack:n=j_()}={})=>(n.__times__||(n.__times__={}),{publish:M_(n,{async:e,caseInsensitive:t}),subscribe:D_(n,{caseInsensitive:t}),unsubscribe:Zv(n,{caseInsensitive:t}),clear:kC(n),stack:n}),Zf=j_(),DC={publish:M_(Zf,{isGlobal:!0}),subscribe:D_(Zf),unsubscribe:Zv(Zf),stack:Zf};I_.onmessage=({data:{event:e,news:t}})=>DC.publish(e,t,{isNoGlobalBroadcast:!0});var F_={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ew,function(){var n=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray},r=function(c,x){for(var O=Object.keys(x),Y=0;Y<O.length;++Y)c[O[Y]]=x[O[Y]];return c},i=`
`;function a(c){return typeof atob<"u"?atob(c):"base64:"+c}function o(c){var x=new Error("(regl) "+c);throw console.error(x),x}function l(c,x){c||o(x)}function u(c){return c?": "+c:""}function f(c,x,O){c in x||o("unknown parameter ("+c+")"+u(O)+". possible values: "+Object.keys(x).join())}function m(c,x){n(c)||o("invalid parameter type"+u(x)+". must be a typed array")}function h(c,x){switch(x){case"number":return typeof c=="number";case"object":return typeof c=="object";case"string":return typeof c=="string";case"boolean":return typeof c=="boolean";case"function":return typeof c=="function";case"undefined":return typeof c>"u";case"symbol":return typeof c=="symbol"}}function d(c,x,O){h(c,x)||o("invalid parameter type"+u(O)+". expected "+x+", got "+typeof c)}function w(c,x){c>=0&&(c|0)===c||o("invalid parameter type, ("+c+")"+u(x)+". must be a nonnegative integer")}function b(c,x,O){x.indexOf(c)<0&&o("invalid value"+u(O)+". must be one of: "+x)}var L=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(c){Object.keys(c).forEach(function(x){L.indexOf(x)<0&&o('invalid regl constructor argument "'+x+'". must be one of '+L)})}function y(c,x){for(c=c+"";c.length<x;)c=" "+c;return c}function T(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(c,x){this.number=c,this.line=x,this.errors=[]}function F(c,x,O){this.file=c,this.line=x,this.message=O}function $(){var c=new Error,x=(c.stack||c).toString(),O=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(x);if(O)return O[1];var Y=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(x);return Y?Y[1]:"unknown"}function ee(){var c=new Error,x=(c.stack||c).toString(),O=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(x);if(O)return O[1];var Y=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(x);return Y?Y[1]:"unknown"}function _e(c,x){var O=c.split(`
`),Y=1,re=0,X={unknown:new T,0:new T};X.unknown.name=X[0].name=x||$(),X.unknown.lines.push(new v(0,""));for(var q=0;q<O.length;++q){var fe=O[q],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(fe);if(ce)switch(ce[1]){case"line":var ge=/(\d+)(\s+\d+)?/.exec(ce[2]);ge&&(Y=ge[1]|0,ge[2]&&(re=ge[2]|0,re in X||(X[re]=new T)));break;case"define":var xe=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);xe&&(X[re].name=xe[1]?a(xe[2]):xe[2]);break}X[re].lines.push(new v(Y++,fe))}return Object.keys(X).forEach(function(ye){var we=X[ye];we.lines.forEach(function(de){we.index[de.number]=de})}),X}function se(c){var x=[];return c.split(`
`).forEach(function(O){if(!(O.length<5)){var Y=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(O);Y?x.push(new F(Y[1]|0,Y[2]|0,Y[3].trim())):O.length>0&&x.push(new F("unknown",0,O))}}),x}function ot(c,x){x.forEach(function(O){var Y=c[O.file];if(Y){var re=Y.index[O.line];if(re){re.errors.push(O),Y.hasErrors=!0;return}}c.unknown.hasErrors=!0,c.unknown.lines[0].errors.push(O)})}function Ie(c,x,O,Y,re){if(!c.getShaderParameter(x,c.COMPILE_STATUS)){var X=c.getShaderInfoLog(x),q=Y===c.FRAGMENT_SHADER?"fragment":"vertex";nt(O,"string",q+" shader source must be a string",re);var fe=_e(O,re),ce=se(X);ot(fe,ce),Object.keys(fe).forEach(function(ge){var xe=fe[ge];if(!xe.hasErrors)return;var ye=[""],we=[""];function de(pe,G){ye.push(pe),we.push(G||"")}de("file number "+ge+": "+xe.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),xe.lines.forEach(function(pe){if(pe.errors.length>0){de(y(pe.number,4)+"|  ","background-color:yellow; font-weight:bold"),de(pe.line+i,"color:red; background-color:yellow; font-weight:bold");var G=0;pe.errors.forEach(function(K){var me=K.message,je=/^\s*'(.*)'\s*:\s*(.*)$/.exec(me);if(je){var ue=je[1];switch(me=je[2],ue){case"assign":ue="=";break}G=Math.max(pe.line.indexOf(ue,G),0)}else G=0;de(y("| ",6)),de(y("^^^",G+3)+i,"font-weight:bold"),de(y("| ",6)),de(me+i,"font-weight:bold")}),de(y("| ",6)+i)}else de(y(pe.number,4)+"|  "),de(pe.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(we[0]=ye.join("%c"),console.log.apply(console,we)):console.log(ye.join(""))}),l.raise("Error compiling "+q+" shader, "+fe[0].name)}}function Fe(c,x,O,Y,re){if(!c.getProgramParameter(x,c.LINK_STATUS)){var X=c.getProgramInfoLog(x),q=_e(O,re),fe=_e(Y,re),ce='Error linking program with vertex shader, "'+fe[0].name+'", and fragment shader "'+q[0].name+'"';typeof document<"u"?console.log("%c"+ce+i+"%c"+X,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+i+X),l.raise(ce)}}function Ke(c){c._commandRef=$()}function Je(c,x,O,Y){Ke(c);function re(ce){return ce?Y.id(ce):0}c._fragId=re(c.static.frag),c._vertId=re(c.static.vert);function X(ce,ge){Object.keys(ge).forEach(function(xe){ce[Y.id(xe)]=!0})}var q=c._uniformSet={};X(q,x.static),X(q,x.dynamic);var fe=c._attributeSet={};X(fe,O.static),X(fe,O.dynamic),c._hasCount="count"in c.static||"count"in c.dynamic||"elements"in c.static||"elements"in c.dynamic}function Qe(c,x){var O=ee();o(c+" in command "+(x||$())+(O==="unknown"?"":" called from "+O))}function et(c,x,O){c||Qe(x,O||$())}function bt(c,x,O,Y){c in x||Qe("unknown parameter ("+c+")"+u(O)+". possible values: "+Object.keys(x).join(),Y||$())}function nt(c,x,O,Y){h(c,x)||Qe("invalid parameter type"+u(O)+". expected "+x+", got "+typeof c,Y||$())}function ve(c){c()}function Ve(c,x,O){c.texture?b(c.texture._texture.internalformat,x,"unsupported texture format for attachment"):b(c.renderbuffer._renderbuffer.format,O,"unsupported renderbuffer format for attachment")}var Ge=33071,Te=9728,qe=9984,Tt=9985,Mt=9986,jt=9987,Qt=5120,Ut=5121,Dt=5122,Jt=5123,hn=5124,Sn=5125,qt=5126,It=32819,mt=32820,yt=33635,Et=34042,_t=36193,Pt={};Pt[Qt]=Pt[Ut]=1,Pt[Dt]=Pt[Jt]=Pt[_t]=Pt[yt]=Pt[It]=Pt[mt]=2,Pt[hn]=Pt[Sn]=Pt[qt]=Pt[Et]=4;function Vt(c,x){return c===mt||c===It||c===yt?2:c===Et?4:Pt[c]*x}function Ht(c){return!(c&c-1)&&!!c}function wn(c,x,O){var Y,re=x.width,X=x.height,q=x.channels;l(re>0&&re<=O.maxTextureSize&&X>0&&X<=O.maxTextureSize,"invalid texture shape"),(c.wrapS!==Ge||c.wrapT!==Ge)&&l(Ht(re)&&Ht(X),"incompatible wrap mode for texture, both width and height must be power of 2"),x.mipmask===1?re!==1&&X!==1&&l(c.minFilter!==qe&&c.minFilter!==Mt&&c.minFilter!==Tt&&c.minFilter!==jt,"min filter requires mipmap"):(l(Ht(re)&&Ht(X),"texture must be a square power of 2 to support mipmapping"),l(x.mipmask===(re<<1)-1,"missing or incomplete mipmap data")),x.type===qt&&(O.extensions.indexOf("oes_texture_float_linear")<0&&l(c.minFilter===Te&&c.magFilter===Te,"filter not supported, must enable oes_texture_float_linear"),l(!c.genMipmaps,"mipmap generation not supported with float textures"));var fe=x.images;for(Y=0;Y<16;++Y)if(fe[Y]){var ce=re>>Y,ge=X>>Y;l(x.mipmask&1<<Y,"missing mipmap data");var xe=fe[Y];if(l(xe.width===ce&&xe.height===ge,"invalid shape for mip images"),l(xe.format===x.format&&xe.internalformat===x.internalformat&&xe.type===x.type,"incompatible type for mip image"),!xe.compressed)if(xe.data){var ye=Math.ceil(Vt(xe.type,q)*ce/xe.unpackAlignment)*xe.unpackAlignment;l(xe.data.byteLength===ye*ge,"invalid data for image, buffer size is inconsistent with image format")}else xe.element||xe.copy}else c.genMipmaps||l((x.mipmask&1<<Y)===0,"extra mipmap data");x.compressed&&l(!c.genMipmaps,"mipmap generation for compressed images not supported")}function Yn(c,x,O,Y){var re=c.width,X=c.height,q=c.channels;l(re>0&&re<=Y.maxTextureSize&&X>0&&X<=Y.maxTextureSize,"invalid texture shape"),l(re===X,"cube map must be square"),l(x.wrapS===Ge&&x.wrapT===Ge,"wrap mode not supported by cube map");for(var fe=0;fe<O.length;++fe){var ce=O[fe];l(ce.width===re&&ce.height===X,"inconsistent cube map face shape"),x.genMipmaps&&(l(!ce.compressed,"can not generate mipmap for compressed textures"),l(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ge=ce.images,xe=0;xe<16;++xe){var ye=ge[xe];if(ye){var we=re>>xe,de=X>>xe;l(ce.mipmask&1<<xe,"missing mipmap data"),l(ye.width===we&&ye.height===de,"invalid shape for mip images"),l(ye.format===c.format&&ye.internalformat===c.internalformat&&ye.type===c.type,"incompatible type for mip image"),ye.compressed||(ye.data?l(ye.data.byteLength===we*de*Math.max(Vt(ye.type,q),ye.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ye.element||ye.copy)}}}}var E=r(l,{optional:ve,raise:o,commandRaise:Qe,command:et,parameter:f,commandParameter:bt,constructor:I,type:d,commandType:nt,isTypedArray:m,nni:w,oneOf:b,shaderError:Ie,linkError:Fe,callSite:ee,saveCommandRef:Ke,saveDrawInfo:Je,framebufferFormat:Ve,guessCommand:$,texture2D:wn,textureCube:Yn}),Ct=0,$t=0,Le=5,at=6;function ft(c,x){this.id=Ct++,this.type=c,this.data=x}function Oe(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Rt(c){if(c.length===0)return[];var x=c.charAt(0),O=c.charAt(c.length-1);if(c.length>1&&x===O&&(x==='"'||x==="'"))return['"'+Oe(c.substr(1,c.length-2))+'"'];var Y=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(c);if(Y)return Rt(c.substr(0,Y.index)).concat(Rt(Y[1])).concat(Rt(c.substr(Y.index+Y[0].length)));var re=c.split(".");if(re.length===1)return['"'+Oe(c)+'"'];for(var X=[],q=0;q<re.length;++q)X=X.concat(Rt(re[q]));return X}function Bt(c){return"["+Rt(c).join("][")+"]"}function dt(c,x){return new ft(c,Bt(x+""))}function tn(c){return typeof c=="function"&&!c._reglType||c instanceof ft}function Ee(c,x){if(typeof c=="function")return new ft($t,c);if(typeof c=="number"||typeof c=="boolean")return new ft(Le,c);if(Array.isArray(c))return new ft(at,c.map(function(O,Y){return Ee(O,x+"["+Y+"]")}));if(c instanceof ft)return c;E(!1,"invalid option type in uniform "+x)}var ze={DynamicVariable:ft,define:dt,isDynamic:tn,unbox:Ee,accessor:Bt},At={next:typeof requestAnimationFrame=="function"?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:typeof cancelAnimationFrame=="function"?function(c){return cancelAnimationFrame(c)}:clearTimeout},nn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Z(){var c={"":0},x=[""];return{id:function(O){var Y=c[O];return Y||(Y=c[O]=x.length,x.push(O),Y)},str:function(O){return x[O]}}}function gt(c,x,O){var Y=document.createElement("canvas");r(Y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),c.appendChild(Y),c===document.body&&(Y.style.position="absolute",r(c.style,{margin:0,padding:0}));function re(){var fe=window.innerWidth,ce=window.innerHeight;if(c!==document.body){var ge=Y.getBoundingClientRect();fe=ge.right-ge.left,ce=ge.bottom-ge.top}Y.width=O*fe,Y.height=O*ce}var X;c!==document.body&&typeof ResizeObserver=="function"?(X=new ResizeObserver(function(){setTimeout(re)}),X.observe(c)):window.addEventListener("resize",re,!1);function q(){X?X.disconnect():window.removeEventListener("resize",re),c.removeChild(Y)}return re(),{canvas:Y,onDestroy:q}}function mn(c,x){function O(Y){try{return c.getContext(Y,x)}catch{return null}}return O("webgl")||O("experimental-webgl")||O("webgl-experimental")}function ln(c){return typeof c.nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"}function ii(c){return typeof c.drawArrays=="function"||typeof c.drawElements=="function"}function qi(c){return typeof c=="string"?c.split():(E(Array.isArray(c),"invalid extension array"),c)}function Zi(c){return typeof c=="string"?(E(typeof document<"u","not supported outside of DOM"),document.querySelector(c)):c}function Ji(c){var x=c||{},O,Y,re,X,q={},fe=[],ce=[],ge=typeof window>"u"?1:window.devicePixelRatio,xe=!1,ye=function(pe){pe&&E.raise(pe)},we=function(){};if(typeof x=="string"?(E(typeof document<"u","selector queries only supported in DOM enviroments"),O=document.querySelector(x),E(O,"invalid query string for element")):typeof x=="object"?ln(x)?O=x:ii(x)?(X=x,re=X.canvas):(E.constructor(x),"gl"in x?X=x.gl:"canvas"in x?re=Zi(x.canvas):"container"in x&&(Y=Zi(x.container)),"attributes"in x&&(q=x.attributes,E.type(q,"object","invalid context attributes")),"extensions"in x&&(fe=qi(x.extensions)),"optionalExtensions"in x&&(ce=qi(x.optionalExtensions)),"onDone"in x&&(E.type(x.onDone,"function","invalid or missing onDone callback"),ye=x.onDone),"profile"in x&&(xe=!!x.profile),"pixelRatio"in x&&(ge=+x.pixelRatio,E(ge>0,"invalid pixel ratio"))):E.raise("invalid arguments to regl"),O&&(O.nodeName.toLowerCase()==="canvas"?re=O:Y=O),!X){if(!re){E(typeof document<"u","must manually specify webgl context outside of DOM environments");var de=gt(Y||document.body,ye,ge);if(!de)return null;re=de.canvas,we=de.onDestroy}q.premultipliedAlpha===void 0&&(q.premultipliedAlpha=!0),X=mn(re,q)}return X?{gl:X,canvas:re,container:Y,extensions:fe,optionalExtensions:ce,pixelRatio:ge,profile:xe,onDone:ye,onDestroy:we}:(we(),ye("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ea(c,x){var O={};function Y(q){E.type(q,"string","extension name must be string");var fe=q.toLowerCase(),ce;try{ce=O[fe]=c.getExtension(fe)}catch{}return!!ce}for(var re=0;re<x.extensions.length;++re){var X=x.extensions[re];if(!Y(X))return x.onDestroy(),x.onDone('"'+X+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return x.optionalExtensions.forEach(Y),{extensions:O,restore:function(){Object.keys(O).forEach(function(q){if(O[q]&&!Y(q))throw new Error("(regl): error restoring extension "+q)})}}}function vn(c,x){for(var O=Array(c),Y=0;Y<c;++Y)O[Y]=x(Y);return O}var _r=5120,ps=5121,Qa=5122,Ka=5123,vs=5124,Yo=5125,ta=5126;function qa(c){for(var x=16;x<=1<<28;x*=16)if(c<=x)return x;return 0}function na(c){var x,O;return x=(c>65535)<<4,c>>>=x,O=(c>255)<<3,c>>>=O,x|=O,O=(c>15)<<2,c>>>=O,x|=O,O=(c>3)<<1,c>>>=O,x|=O,x|c>>1}function Qo(){var c=vn(8,function(){return[]});function x(X){var q=qa(X),fe=c[na(q)>>2];return fe.length>0?fe.pop():new ArrayBuffer(q)}function O(X){c[na(X.byteLength)>>2].push(X)}function Y(X,q){var fe=null;switch(X){case _r:fe=new Int8Array(x(q),0,q);break;case ps:fe=new Uint8Array(x(q),0,q);break;case Qa:fe=new Int16Array(x(2*q),0,q);break;case Ka:fe=new Uint16Array(x(2*q),0,q);break;case vs:fe=new Int32Array(x(4*q),0,q);break;case Yo:fe=new Uint32Array(x(4*q),0,q);break;case ta:fe=new Float32Array(x(4*q),0,q);break;default:return null}return fe.length!==q?fe.subarray(0,q):fe}function re(X){O(X.buffer)}return{alloc:x,free:O,allocType:Y,freeType:re}}var wt=Qo();wt.zero=Qo();var Ci=3408,Ko=3410,mc=3411,ai=3412,oi=3413,li=3414,pc=3415,Sr=33901,gs=33902,Za=3379,ys=3386,Ja=34921,qo=36347,Zo=36348,Jo=35661,el=35660,Ai=34930,eo=36349,xs=34076,Es=34024,vc=7936,ra=7937,ia=7938,tl=35724,aa=34047,_s=36063,cr=34852,si=3553,ui=34067,Li=34069,Dn=33984,Dr=6408,$n=5126,Tn=5121,oa=36160,nl=36053,rl=36064,il=16384,gc=function(c,x){var O=1;x.ext_texture_filter_anisotropic&&(O=c.getParameter(aa));var Y=1,re=1;x.webgl_draw_buffers&&(Y=c.getParameter(cr),re=c.getParameter(_s));var X=!!x.oes_texture_float;if(X){var q=c.createTexture();c.bindTexture(si,q),c.texImage2D(si,0,Dr,1,1,0,Dr,$n,null);var fe=c.createFramebuffer();if(c.bindFramebuffer(oa,fe),c.framebufferTexture2D(oa,rl,si,q,0),c.bindTexture(si,null),c.checkFramebufferStatus(oa)!==nl)X=!1;else{c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(il);var ce=wt.allocType($n,4);c.readPixels(0,0,1,1,Dr,$n,ce),c.getError()?X=!1:(c.deleteFramebuffer(fe),c.deleteTexture(q),X=ce[0]===1),wt.freeType(ce)}}var ge=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xe=!0;if(!ge){var ye=c.createTexture(),we=wt.allocType(Tn,36);c.activeTexture(Dn),c.bindTexture(ui,ye),c.texImage2D(Li,0,Dr,3,3,0,Dr,Tn,we),wt.freeType(we),c.bindTexture(ui,null),c.deleteTexture(ye),xe=!c.getError()}return{colorBits:[c.getParameter(Ko),c.getParameter(mc),c.getParameter(ai),c.getParameter(oi)],depthBits:c.getParameter(li),stencilBits:c.getParameter(pc),subpixelBits:c.getParameter(Ci),extensions:Object.keys(x).filter(function(de){return!!x[de]}),maxAnisotropic:O,maxDrawbuffers:Y,maxColorAttachments:re,pointSizeDims:c.getParameter(Sr),lineWidthDims:c.getParameter(gs),maxViewportDims:c.getParameter(ys),maxCombinedTextureUnits:c.getParameter(Jo),maxCubeMapSize:c.getParameter(xs),maxRenderbufferSize:c.getParameter(Es),maxTextureUnits:c.getParameter(Ai),maxTextureSize:c.getParameter(Za),maxAttributes:c.getParameter(Ja),maxVertexUniforms:c.getParameter(qo),maxVertexTextureUnits:c.getParameter(el),maxVaryingVectors:c.getParameter(Zo),maxFragmentUniforms:c.getParameter(eo),glsl:c.getParameter(tl),renderer:c.getParameter(ra),vendor:c.getParameter(vc),version:c.getParameter(ia),readFloat:X,npotTextureCube:xe}};function fr(c){return!!c&&typeof c=="object"&&Array.isArray(c.shape)&&Array.isArray(c.stride)&&typeof c.offset=="number"&&c.shape.length===c.stride.length&&(Array.isArray(c.data)||n(c.data))}var rr=function(c){return Object.keys(c).map(function(x){return c[x]})},wr={shape:Dh,flatten:Ih};function yc(c,x,O){for(var Y=0;Y<x;++Y)O[Y]=c[Y]}function Ss(c,x,O,Y){for(var re=0,X=0;X<x;++X)for(var q=c[X],fe=0;fe<O;++fe)Y[re++]=q[fe]}function al(c,x,O,Y,re,X){for(var q=X,fe=0;fe<x;++fe)for(var ce=c[fe],ge=0;ge<O;++ge)for(var xe=ce[ge],ye=0;ye<Y;++ye)re[q++]=xe[ye]}function ws(c,x,O,Y,re){for(var X=1,q=O+1;q<x.length;++q)X*=x[q];var fe=x[O];if(x.length-O===4){var ce=x[O+1],ge=x[O+2],xe=x[O+3];for(q=0;q<fe;++q)al(c[q],ce,ge,xe,Y,re),re+=X}else for(q=0;q<fe;++q)ws(c[q],x,O+1,Y,re),re+=X}function Ih(c,x,O,Y){var re=1;if(x.length)for(var X=0;X<x.length;++X)re*=x[X];else re=0;var q=Y||wt.allocType(O,re);switch(x.length){case 0:break;case 1:yc(c,x[0],q);break;case 2:Ss(c,x[0],x[1],q);break;case 3:al(c,x[0],x[1],x[2],q,0);break;default:ws(c,x,0,q,0)}return q}function Dh(c){for(var x=[],O=c;O.length;O=O[0])x.push(O.length);return x}var la={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},to=5120,Ri=5122,ol=5124,Mh=5121,ll=5123,sa=5125,no=5126,Ts=5126,ua={int8:to,int16:Ri,int32:ol,uint8:Mh,uint16:ll,uint32:sa,float:no,float32:Ts},mg=35048,Rn=35040,sl={dynamic:mg,stream:Rn,static:35044},ro=wr.flatten,xc=wr.shape,bs=35044,Cs=35040,ul=5121,cl=5126,Xr=[];Xr[5120]=1,Xr[5122]=2,Xr[5124]=4,Xr[5121]=1,Xr[5123]=2,Xr[5125]=4,Xr[5126]=4;function io(c){return la[Object.prototype.toString.call(c)]|0}function fl(c,x){for(var O=0;O<x.length;++O)c[O]=x[O]}function As(c,x,O,Y,re,X,q){for(var fe=0,ce=0;ce<O;++ce)for(var ge=0;ge<Y;++ge)c[fe++]=x[re*ce+X*ge+q]}function Ls(c,x,O,Y){var re=0,X={};function q(G){this.id=re++,this.buffer=c.createBuffer(),this.type=G,this.usage=bs,this.byteLength=0,this.dimension=1,this.dtype=ul,this.persistentData=null,O.profile&&(this.stats={size:0})}q.prototype.bind=function(){c.bindBuffer(this.type,this.buffer)},q.prototype.destroy=function(){we(this)};var fe=[];function ce(G,K){var me=fe.pop();return me||(me=new q(G)),me.bind(),ye(me,K,Cs,0,1,!1),me}function ge(G){fe.push(G)}function xe(G,K,me){G.byteLength=K.byteLength,c.bufferData(G.type,K,me)}function ye(G,K,me,je,ue,De){var Ne;if(G.usage=me,Array.isArray(K)){if(G.dtype=je||cl,K.length>0){var rt;if(Array.isArray(K[0])){Ne=xc(K);for(var ie=1,ne=1;ne<Ne.length;++ne)ie*=Ne[ne];G.dimension=ie,rt=ro(K,Ne,G.dtype),xe(G,rt,me),De?G.persistentData=rt:wt.freeType(rt)}else if(typeof K[0]=="number"){G.dimension=ue;var He=wt.allocType(G.dtype,K.length);fl(He,K),xe(G,He,me),De?G.persistentData=He:wt.freeType(He)}else n(K[0])?(G.dimension=K[0].length,G.dtype=je||io(K[0])||cl,rt=ro(K,[K.length,K[0].length],G.dtype),xe(G,rt,me),De?G.persistentData=rt:wt.freeType(rt)):E.raise("invalid buffer data")}}else if(n(K))G.dtype=je||io(K),G.dimension=ue,xe(G,K,me),De&&(G.persistentData=new Uint8Array(new Uint8Array(K.buffer)));else if(fr(K)){Ne=K.shape;var Ce=K.stride,he=K.offset,Ae=0,Re=0,pt=0,ht=0;Ne.length===1?(Ae=Ne[0],Re=1,pt=Ce[0],ht=0):Ne.length===2?(Ae=Ne[0],Re=Ne[1],pt=Ce[0],ht=Ce[1]):E.raise("invalid shape"),G.dtype=je||io(K.data)||cl,G.dimension=Re;var Pe=wt.allocType(G.dtype,Ae*Re);As(Pe,K.data,Ae,Re,pt,ht,he),xe(G,Pe,me),De?G.persistentData=Pe:wt.freeType(Pe)}else K instanceof ArrayBuffer?(G.dtype=ul,G.dimension=ue,xe(G,K,me),De&&(G.persistentData=new Uint8Array(new Uint8Array(K)))):E.raise("invalid buffer data")}function we(G){x.bufferCount--,Y(G);var K=G.buffer;E(K,"buffer must not be deleted already"),c.deleteBuffer(K),G.buffer=null,delete X[G.id]}function de(G,K,me,je){x.bufferCount++;var ue=new q(K);X[ue.id]=ue;function De(ie){var ne=bs,He=null,Ce=0,he=0,Ae=1;return Array.isArray(ie)||n(ie)||fr(ie)||ie instanceof ArrayBuffer?He=ie:typeof ie=="number"?Ce=ie|0:ie&&(E.type(ie,"object","buffer arguments must be an object, a number or an array"),"data"in ie&&(E(He===null||Array.isArray(He)||n(He)||fr(He),"invalid data for buffer"),He=ie.data),"usage"in ie&&(E.parameter(ie.usage,sl,"invalid buffer usage"),ne=sl[ie.usage]),"type"in ie&&(E.parameter(ie.type,ua,"invalid buffer type"),he=ua[ie.type]),"dimension"in ie&&(E.type(ie.dimension,"number","invalid dimension"),Ae=ie.dimension|0),"length"in ie&&(E.nni(Ce,"buffer length must be a nonnegative integer"),Ce=ie.length|0)),ue.bind(),He?ye(ue,He,ne,he,Ae,je):(Ce&&c.bufferData(ue.type,Ce,ne),ue.dtype=he||ul,ue.usage=ne,ue.dimension=Ae,ue.byteLength=Ce),O.profile&&(ue.stats.size=ue.byteLength*Xr[ue.dtype]),De}function Ne(ie,ne){E(ne+ie.byteLength<=ue.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+ie.byteLength+" starting from offset "+ne+" to a buffer of size "+ue.byteLength),c.bufferSubData(ue.type,ne,ie)}function rt(ie,ne){var He=(ne||0)|0,Ce;if(ue.bind(),n(ie)||ie instanceof ArrayBuffer)Ne(ie,He);else if(Array.isArray(ie)){if(ie.length>0)if(typeof ie[0]=="number"){var he=wt.allocType(ue.dtype,ie.length);fl(he,ie),Ne(he,He),wt.freeType(he)}else if(Array.isArray(ie[0])||n(ie[0])){Ce=xc(ie);var Ae=ro(ie,Ce,ue.dtype);Ne(Ae,He),wt.freeType(Ae)}else E.raise("invalid buffer data")}else if(fr(ie)){Ce=ie.shape;var Re=ie.stride,pt=0,ht=0,Pe=0,Me=0;Ce.length===1?(pt=Ce[0],ht=1,Pe=Re[0],Me=0):Ce.length===2?(pt=Ce[0],ht=Ce[1],Pe=Re[0],Me=Re[1]):E.raise("invalid shape");var st=Array.isArray(ie.data)?ue.dtype:io(ie.data),vt=wt.allocType(st,pt*ht);As(vt,ie.data,pt,ht,Pe,Me,ie.offset),Ne(vt,He),wt.freeType(vt)}else E.raise("invalid data for buffer subdata");return De}return me||De(G),De._reglType="buffer",De._buffer=ue,De.subdata=rt,O.profile&&(De.stats=ue.stats),De.destroy=function(){we(ue)},De}function pe(){rr(X).forEach(function(G){G.buffer=c.createBuffer(),c.bindBuffer(G.type,G.buffer),c.bufferData(G.type,G.persistentData||G.byteLength,G.usage)})}return O.profile&&(x.getTotalBufferSize=function(){var G=0;return Object.keys(X).forEach(function(K){G+=X[K].stats.size}),G}),{create:de,createStream:ce,destroyStream:ge,clear:function(){rr(X).forEach(we),fe.forEach(we)},getBuffer:function(G){return G&&G._buffer instanceof q?G._buffer:null},restore:pe,_initBuffer:ye}}var jh=0,Rs=0,Fh=1,Os=1,$h=4,Bh=4,ci={points:jh,point:Rs,lines:Fh,line:Os,triangles:$h,triangle:Bh,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Gh=0,Oi=1,Ni=4,zh=5120,fi=5121,Ec=5122,ca=5123,_c=5124,Yr=5125,Ns=34963,Uh=35040,Ps=35044;function ks(c,x,O,Y){var re={},X=0,q={uint8:fi,uint16:ca};x.oes_element_index_uint&&(q.uint32=Yr);function fe(pe){this.id=X++,re[this.id]=this,this.buffer=pe,this.primType=Ni,this.vertCount=0,this.type=0}fe.prototype.bind=function(){this.buffer.bind()};var ce=[];function ge(pe){var G=ce.pop();return G||(G=new fe(O.create(null,Ns,!0,!1)._buffer)),ye(G,pe,Uh,-1,-1,0,0),G}function xe(pe){ce.push(pe)}function ye(pe,G,K,me,je,ue,De){pe.buffer.bind();var Ne;if(G){var rt=De;!De&&(!n(G)||fr(G)&&!n(G.data))&&(rt=x.oes_element_index_uint?Yr:ca),O._initBuffer(pe.buffer,G,K,rt,3)}else c.bufferData(Ns,ue,K),pe.buffer.dtype=Ne||fi,pe.buffer.usage=K,pe.buffer.dimension=3,pe.buffer.byteLength=ue;if(Ne=De,!De){switch(pe.buffer.dtype){case fi:case zh:Ne=fi;break;case ca:case Ec:Ne=ca;break;case Yr:case _c:Ne=Yr;break;default:E.raise("unsupported type for element array")}pe.buffer.dtype=Ne}pe.type=Ne,E(Ne!==Yr||!!x.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var ie=je;ie<0&&(ie=pe.buffer.byteLength,Ne===ca?ie>>=1:Ne===Yr&&(ie>>=2)),pe.vertCount=ie;var ne=me;if(me<0){ne=Ni;var He=pe.buffer.dimension;He===1&&(ne=Gh),He===2&&(ne=Oi),He===3&&(ne=Ni)}pe.primType=ne}function we(pe){Y.elementsCount--,E(pe.buffer!==null,"must not double destroy elements"),delete re[pe.id],pe.buffer.destroy(),pe.buffer=null}function de(pe,G){var K=O.create(null,Ns,!0),me=new fe(K._buffer);Y.elementsCount++;function je(ue){if(!ue)K(),me.primType=Ni,me.vertCount=0,me.type=fi;else if(typeof ue=="number")K(ue),me.primType=Ni,me.vertCount=ue|0,me.type=fi;else{var De=null,Ne=Ps,rt=-1,ie=-1,ne=0,He=0;Array.isArray(ue)||n(ue)||fr(ue)?De=ue:(E.type(ue,"object","invalid arguments for elements"),"data"in ue&&(De=ue.data,E(Array.isArray(De)||n(De)||fr(De),"invalid data for element buffer")),"usage"in ue&&(E.parameter(ue.usage,sl,"invalid element buffer usage"),Ne=sl[ue.usage]),"primitive"in ue&&(E.parameter(ue.primitive,ci,"invalid element buffer primitive"),rt=ci[ue.primitive]),"count"in ue&&(E(typeof ue.count=="number"&&ue.count>=0,"invalid vertex count for elements"),ie=ue.count|0),"type"in ue&&(E.parameter(ue.type,q,"invalid buffer type"),He=q[ue.type]),"length"in ue?ne=ue.length|0:(ne=ie,He===ca||He===Ec?ne*=2:(He===Yr||He===_c)&&(ne*=4))),ye(me,De,Ne,rt,ie,ne,He)}return je}return je(pe),je._reglType="elements",je._elements=me,je.subdata=function(ue,De){return K.subdata(ue,De),je},je.destroy=function(){we(me)},je}return{create:de,createStream:ge,destroyStream:xe,getElements:function(pe){return typeof pe=="function"&&pe._elements instanceof fe?pe._elements:null},clear:function(){rr(re).forEach(we)}}}var Sc=new Float32Array(1),Vh=new Uint32Array(Sc.buffer),Hh=5123;function wc(c){for(var x=wt.allocType(Hh,c.length),O=0;O<c.length;++O)if(isNaN(c[O]))x[O]=65535;else if(c[O]===1/0)x[O]=31744;else if(c[O]===-1/0)x[O]=64512;else{Sc[0]=c[O];var Y=Vh[0],re=Y>>>31<<15,X=(Y<<1>>>24)-127,q=Y>>13&1023;if(X<-24)x[O]=re;else if(X<-14){var fe=-14-X;x[O]=re+(q+1024>>fe)}else X>15?x[O]=re+31744:x[O]=re+(X+15<<10)+q}return x}function an(c){return Array.isArray(c)||n(c)}var Tc=function(c){return!(c&c-1)&&!!c},Wh=34467,Mr=3553,Is=34067,dl=34069,Pi=6408,Ds=6406,hl=6407,ki=6409,ml=6410,bc=32854,Ms=32855,js=36194,Xh=32819,Yh=32820,Qh=33635,Cc=34042,pl=6402,ao=34041,oo=35904,lo=35906,fa=36193,Ii=33776,Fs=33777,$s=33778,Bs=33779,Ac=35986,Lc=35987,Rc=34798,Oc=35840,Nc=35841,Pc=35842,kc=35843,Ic=36196,da=5121,Gs=5123,zs=5125,Tr=5126,Kh=10242,qh=10243,Zh=10497,Us=33071,Jh=33648,em=10240,tm=10241,Vs=9728,nm=9729,vl=9984,Hs=9985,Dc=9986,Ws=9987,rm=33170,so=4352,Mc=4353,im=4354,am=34046,om=3317,lm=37440,sm=37441,um=37443,ha=37444,uo=33984,jc=[vl,Dc,Hs,Ws],co=[0,ki,ml,hl,Pi],br={};br[ki]=br[Ds]=br[pl]=1,br[ao]=br[ml]=2,br[hl]=br[oo]=3,br[Pi]=br[lo]=4;function ma(c){return"[object "+c+"]"}var Fc=ma("HTMLCanvasElement"),$c=ma("OffscreenCanvas"),Bc=ma("CanvasRenderingContext2D"),Gc=ma("ImageBitmap"),zc=ma("HTMLImageElement"),gl=ma("HTMLVideoElement"),cm=Object.keys(la).concat([Fc,$c,Bc,Gc,zc,gl]),pa=[];pa[da]=1,pa[Tr]=4,pa[fa]=2,pa[Gs]=2,pa[zs]=4;var On=[];On[bc]=2,On[Ms]=2,On[js]=2,On[ao]=4,On[Ii]=.5,On[Fs]=.5,On[$s]=1,On[Bs]=1,On[Ac]=.5,On[Lc]=1,On[Rc]=1,On[Oc]=.5,On[Nc]=.25,On[Pc]=.5,On[kc]=.25,On[Ic]=.5;function Uc(c){return Array.isArray(c)&&(c.length===0||typeof c[0]=="number")}function Xs(c){if(!Array.isArray(c))return!1;var x=c.length;return!(x===0||!an(c[0]))}function Di(c){return Object.prototype.toString.call(c)}function Ys(c){return Di(c)===Fc}function Vc(c){return Di(c)===$c}function fm(c){return Di(c)===Bc}function Qs(c){return Di(c)===Gc}function Hc(c){return Di(c)===zc}function Wc(c){return Di(c)===gl}function Ks(c){if(!c)return!1;var x=Di(c);return cm.indexOf(x)>=0?!0:Uc(c)||Xs(c)||fr(c)}function Xc(c){return la[Object.prototype.toString.call(c)]|0}function dm(c,x){var O=x.length;switch(c.type){case da:case Gs:case zs:case Tr:var Y=wt.allocType(c.type,O);Y.set(x),c.data=Y;break;case fa:c.data=wc(x);break;default:E.raise("unsupported texture type, must specify a typed array")}}function Yc(c,x){return wt.allocType(c.type===fa?Tr:c.type,x)}function Qc(c,x){c.type===fa?(c.data=wc(x),wt.freeType(x)):c.data=x}function Kc(c,x,O,Y,re,X){for(var q=c.width,fe=c.height,ce=c.channels,ge=q*fe*ce,xe=Yc(c,ge),ye=0,we=0;we<fe;++we)for(var de=0;de<q;++de)for(var pe=0;pe<ce;++pe)xe[ye++]=x[O*de+Y*we+re*pe+X];Qc(c,xe)}function yl(c,x,O,Y,re,X){var q;if(typeof On[c]<"u"?q=On[c]:q=br[c]*pa[x],X&&(q*=6),re){for(var fe=0,ce=O;ce>=1;)fe+=q*ce*ce,ce/=2;return fe}else return q*O*Y}function hm(c,x,O,Y,re,X,q){var fe={"don't care":so,"dont care":so,nice:im,fast:Mc},ce={repeat:Zh,clamp:Us,mirror:Jh},ge={nearest:Vs,linear:nm},xe=r({mipmap:Ws,"nearest mipmap nearest":vl,"linear mipmap nearest":Hs,"nearest mipmap linear":Dc,"linear mipmap linear":Ws},ge),ye={none:0,browser:ha},we={uint8:da,rgba4:Xh,rgb565:Qh,"rgb5 a1":Yh},de={alpha:Ds,luminance:ki,"luminance alpha":ml,rgb:hl,rgba:Pi,rgba4:bc,"rgb5 a1":Ms,rgb565:js},pe={};x.ext_srgb&&(de.srgb=oo,de.srgba=lo),x.oes_texture_float&&(we.float32=we.float=Tr),x.oes_texture_half_float&&(we.float16=we["half float"]=fa),x.webgl_depth_texture&&(r(de,{depth:pl,"depth stencil":ao}),r(we,{uint16:Gs,uint32:zs,"depth stencil":Cc})),x.webgl_compressed_texture_s3tc&&r(pe,{"rgb s3tc dxt1":Ii,"rgba s3tc dxt1":Fs,"rgba s3tc dxt3":$s,"rgba s3tc dxt5":Bs}),x.webgl_compressed_texture_atc&&r(pe,{"rgb atc":Ac,"rgba atc explicit alpha":Lc,"rgba atc interpolated alpha":Rc}),x.webgl_compressed_texture_pvrtc&&r(pe,{"rgb pvrtc 4bppv1":Oc,"rgb pvrtc 2bppv1":Nc,"rgba pvrtc 4bppv1":Pc,"rgba pvrtc 2bppv1":kc}),x.webgl_compressed_texture_etc1&&(pe["rgb etc1"]=Ic);var G=Array.prototype.slice.call(c.getParameter(Wh));Object.keys(pe).forEach(function(A){var Q=pe[A];G.indexOf(Q)>=0&&(de[A]=Q)});var K=Object.keys(de);O.textureFormats=K;var me=[];Object.keys(de).forEach(function(A){var Q=de[A];me[Q]=A});var je=[];Object.keys(we).forEach(function(A){var Q=we[A];je[Q]=A});var ue=[];Object.keys(ge).forEach(function(A){var Q=ge[A];ue[Q]=A});var De=[];Object.keys(xe).forEach(function(A){var Q=xe[A];De[Q]=A});var Ne=[];Object.keys(ce).forEach(function(A){var Q=ce[A];Ne[Q]=A});var rt=K.reduce(function(A,Q){var W=de[Q];return W===ki||W===Ds||W===ki||W===ml||W===pl||W===ao||x.ext_srgb&&(W===oo||W===lo)?A[W]=W:W===Ms||Q.indexOf("rgba")>=0?A[W]=Pi:A[W]=hl,A},{});function ie(){this.internalformat=Pi,this.format=Pi,this.type=da,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ha,this.width=0,this.height=0,this.channels=0}function ne(A,Q){A.internalformat=Q.internalformat,A.format=Q.format,A.type=Q.type,A.compressed=Q.compressed,A.premultiplyAlpha=Q.premultiplyAlpha,A.flipY=Q.flipY,A.unpackAlignment=Q.unpackAlignment,A.colorSpace=Q.colorSpace,A.width=Q.width,A.height=Q.height,A.channels=Q.channels}function He(A,Q){if(!(typeof Q!="object"||!Q)){if("premultiplyAlpha"in Q&&(E.type(Q.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),A.premultiplyAlpha=Q.premultiplyAlpha),"flipY"in Q&&(E.type(Q.flipY,"boolean","invalid texture flip"),A.flipY=Q.flipY),"alignment"in Q&&(E.oneOf(Q.alignment,[1,2,4,8],"invalid texture unpack alignment"),A.unpackAlignment=Q.alignment),"colorSpace"in Q&&(E.parameter(Q.colorSpace,ye,"invalid colorSpace"),A.colorSpace=ye[Q.colorSpace]),"type"in Q){var W=Q.type;E(x.oes_texture_float||!(W==="float"||W==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),E(x.oes_texture_half_float||!(W==="half float"||W==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),E(x.webgl_depth_texture||!(W==="uint16"||W==="uint32"||W==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(W,we,"invalid texture type"),A.type=we[W]}var Ue=A.width,Lt=A.height,_=A.channels,p=!1;"shape"in Q?(E(Array.isArray(Q.shape)&&Q.shape.length>=2,"shape must be an array"),Ue=Q.shape[0],Lt=Q.shape[1],Q.shape.length===3&&(_=Q.shape[2],E(_>0&&_<=4,"invalid number of channels"),p=!0),E(Ue>=0&&Ue<=O.maxTextureSize,"invalid width"),E(Lt>=0&&Lt<=O.maxTextureSize,"invalid height")):("radius"in Q&&(Ue=Lt=Q.radius,E(Ue>=0&&Ue<=O.maxTextureSize,"invalid radius")),"width"in Q&&(Ue=Q.width,E(Ue>=0&&Ue<=O.maxTextureSize,"invalid width")),"height"in Q&&(Lt=Q.height,E(Lt>=0&&Lt<=O.maxTextureSize,"invalid height")),"channels"in Q&&(_=Q.channels,E(_>0&&_<=4,"invalid number of channels"),p=!0)),A.width=Ue|0,A.height=Lt|0,A.channels=_|0;var N=!1;if("format"in Q){var B=Q.format;E(x.webgl_depth_texture||!(B==="depth"||B==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(B,de,"invalid texture format");var z=A.internalformat=de[B];A.format=rt[z],B in we&&("type"in Q||(A.type=we[B])),B in pe&&(A.compressed=!0),N=!0}!p&&N?A.channels=br[A.format]:p&&!N?A.channels!==co[A.format]&&(A.format=A.internalformat=co[A.channels]):N&&p&&E(A.channels===br[A.format],"number of channels inconsistent with specified format")}}function Ce(A){c.pixelStorei(lm,A.flipY),c.pixelStorei(sm,A.premultiplyAlpha),c.pixelStorei(um,A.colorSpace),c.pixelStorei(om,A.unpackAlignment)}function he(){ie.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ae(A,Q){var W=null;if(Ks(Q)?W=Q:Q&&(E.type(Q,"object","invalid pixel data type"),He(A,Q),"x"in Q&&(A.xOffset=Q.x|0),"y"in Q&&(A.yOffset=Q.y|0),Ks(Q.data)&&(W=Q.data)),E(!A.compressed||W instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Q.copy){E(!W,"can not specify copy and data field for the same texture");var Ue=re.viewportWidth,Lt=re.viewportHeight;A.width=A.width||Ue-A.xOffset,A.height=A.height||Lt-A.yOffset,A.needsCopy=!0,E(A.xOffset>=0&&A.xOffset<Ue&&A.yOffset>=0&&A.yOffset<Lt&&A.width>0&&A.width<=Ue&&A.height>0&&A.height<=Lt,"copy texture read out of bounds")}else if(!W)A.width=A.width||1,A.height=A.height||1,A.channels=A.channels||4;else if(n(W))A.channels=A.channels||4,A.data=W,!("type"in Q)&&A.type===da&&(A.type=Xc(W));else if(Uc(W))A.channels=A.channels||4,dm(A,W),A.alignment=1,A.needsFree=!0;else if(fr(W)){var _=W.data;!Array.isArray(_)&&A.type===da&&(A.type=Xc(_));var p=W.shape,N=W.stride,B,z,k,P,j,S;p.length===3?(k=p[2],S=N[2]):(E(p.length===2,"invalid ndarray pixel data, must be 2 or 3D"),k=1,S=1),B=p[0],z=p[1],P=N[0],j=N[1],A.alignment=1,A.width=B,A.height=z,A.channels=k,A.format=A.internalformat=co[k],A.needsFree=!0,Kc(A,_,P,j,S,W.offset)}else if(Ys(W)||Vc(W)||fm(W))Ys(W)||Vc(W)?A.element=W:A.element=W.canvas,A.width=A.element.width,A.height=A.element.height,A.channels=4;else if(Qs(W))A.element=W,A.width=W.width,A.height=W.height,A.channels=4;else if(Hc(W))A.element=W,A.width=W.naturalWidth,A.height=W.naturalHeight,A.channels=4;else if(Wc(W))A.element=W,A.width=W.videoWidth,A.height=W.videoHeight,A.channels=4;else if(Xs(W)){var R=A.width||W[0].length,C=A.height||W.length,H=A.channels;an(W[0][0])?H=H||W[0][0].length:H=H||1;for(var U=wr.shape(W),te=1,ae=0;ae<U.length;++ae)te*=U[ae];var Se=Yc(A,te);wr.flatten(W,U,"",Se),Qc(A,Se),A.alignment=1,A.width=R,A.height=C,A.channels=H,A.format=A.internalformat=co[H],A.needsFree=!0}A.type===Tr?E(O.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):A.type===fa&&E(O.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Re(A,Q,W){var Ue=A.element,Lt=A.data,_=A.internalformat,p=A.format,N=A.type,B=A.width,z=A.height;Ce(A),Ue?c.texImage2D(Q,W,p,p,N,Ue):A.compressed?c.compressedTexImage2D(Q,W,_,B,z,0,Lt):A.needsCopy?(Y(),c.copyTexImage2D(Q,W,p,A.xOffset,A.yOffset,B,z,0)):c.texImage2D(Q,W,p,B,z,0,p,N,Lt||null)}function pt(A,Q,W,Ue,Lt){var _=A.element,p=A.data,N=A.internalformat,B=A.format,z=A.type,k=A.width,P=A.height;Ce(A),_?c.texSubImage2D(Q,Lt,W,Ue,B,z,_):A.compressed?c.compressedTexSubImage2D(Q,Lt,W,Ue,N,k,P,p):A.needsCopy?(Y(),c.copyTexSubImage2D(Q,Lt,W,Ue,A.xOffset,A.yOffset,k,P)):c.texSubImage2D(Q,Lt,W,Ue,k,P,B,z,p)}var ht=[];function Pe(){return ht.pop()||new he}function Me(A){A.needsFree&&wt.freeType(A.data),he.call(A),ht.push(A)}function st(){ie.call(this),this.genMipmaps=!1,this.mipmapHint=so,this.mipmask=0,this.images=Array(16)}function vt(A,Q,W){var Ue=A.images[0]=Pe();A.mipmask=1,Ue.width=A.width=Q,Ue.height=A.height=W,Ue.channels=A.channels=4}function Ot(A,Q){var W=null;if(Ks(Q))W=A.images[0]=Pe(),ne(W,A),Ae(W,Q),A.mipmask=1;else if(He(A,Q),Array.isArray(Q.mipmap))for(var Ue=Q.mipmap,Lt=0;Lt<Ue.length;++Lt)W=A.images[Lt]=Pe(),ne(W,A),W.width>>=Lt,W.height>>=Lt,Ae(W,Ue[Lt]),A.mipmask|=1<<Lt;else W=A.images[0]=Pe(),ne(W,A),Ae(W,Q),A.mipmask=1;ne(A,A.images[0]),A.compressed&&(A.internalformat===Ii||A.internalformat===Fs||A.internalformat===$s||A.internalformat===Bs)&&E(A.width%4===0&&A.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function sn(A,Q){for(var W=A.images,Ue=0;Ue<W.length;++Ue){if(!W[Ue])return;Re(W[Ue],Q,Ue)}}var cn=[];function kt(){var A=cn.pop()||new st;ie.call(A),A.mipmask=0;for(var Q=0;Q<16;++Q)A.images[Q]=null;return A}function Nn(A){for(var Q=A.images,W=0;W<Q.length;++W)Q[W]&&Me(Q[W]),Q[W]=null;cn.push(A)}function on(){this.minFilter=Vs,this.magFilter=Vs,this.wrapS=Us,this.wrapT=Us,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=so}function An(A,Q){if("min"in Q){var W=Q.min;E.parameter(W,xe),A.minFilter=xe[W],jc.indexOf(A.minFilter)>=0&&!("faces"in Q)&&(A.genMipmaps=!0)}if("mag"in Q){var Ue=Q.mag;E.parameter(Ue,ge),A.magFilter=ge[Ue]}var Lt=A.wrapS,_=A.wrapT;if("wrap"in Q){var p=Q.wrap;typeof p=="string"?(E.parameter(p,ce),Lt=_=ce[p]):Array.isArray(p)&&(E.parameter(p[0],ce),E.parameter(p[1],ce),Lt=ce[p[0]],_=ce[p[1]])}else{if("wrapS"in Q){var N=Q.wrapS;E.parameter(N,ce),Lt=ce[N]}if("wrapT"in Q){var B=Q.wrapT;E.parameter(B,ce),_=ce[B]}}if(A.wrapS=Lt,A.wrapT=_,"anisotropic"in Q){var z=Q.anisotropic;E(typeof z=="number"&&z>=1&&z<=O.maxAnisotropic,"aniso samples must be between 1 and "),A.anisotropic=Q.anisotropic}if("mipmap"in Q){var k=!1;switch(typeof Q.mipmap){case"string":E.parameter(Q.mipmap,fe,"invalid mipmap hint"),A.mipmapHint=fe[Q.mipmap],A.genMipmaps=!0,k=!0;break;case"boolean":k=A.genMipmaps=Q.mipmap;break;case"object":E(Array.isArray(Q.mipmap),"invalid mipmap type"),A.genMipmaps=!1,k=!0;break;default:E.raise("invalid mipmap type")}k&&!("min"in Q)&&(A.minFilter=vl)}}function Pn(A,Q){c.texParameteri(Q,tm,A.minFilter),c.texParameteri(Q,em,A.magFilter),c.texParameteri(Q,Kh,A.wrapS),c.texParameteri(Q,qh,A.wrapT),x.ext_texture_filter_anisotropic&&c.texParameteri(Q,am,A.anisotropic),A.genMipmaps&&(c.hint(rm,A.mipmapHint),c.generateMipmap(Q))}var kn=0,Bn={},Un=O.maxTextureUnits,gn=Array(Un).map(function(){return null});function St(A){ie.call(this),this.mipmask=0,this.internalformat=Pi,this.id=kn++,this.refCount=1,this.target=A,this.texture=c.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new on,q.profile&&(this.stats={size:0})}function Vn(A){c.activeTexture(uo),c.bindTexture(A.target,A.texture)}function Xt(){var A=gn[0];A?c.bindTexture(A.target,A.texture):c.bindTexture(Mr,null)}function lt(A){var Q=A.texture;E(Q,"must not double destroy texture");var W=A.unit,Ue=A.target;W>=0&&(c.activeTexture(uo+W),c.bindTexture(Ue,null),gn[W]=null),c.deleteTexture(Q),A.texture=null,A.params=null,A.pixels=null,A.refCount=0,delete Bn[A.id],X.textureCount--}r(St.prototype,{bind:function(){var A=this;A.bindCount+=1;var Q=A.unit;if(Q<0){for(var W=0;W<Un;++W){var Ue=gn[W];if(Ue){if(Ue.bindCount>0)continue;Ue.unit=-1}gn[W]=A,Q=W;break}Q>=Un&&E.raise("insufficient number of texture units"),q.profile&&X.maxTextureUnits<Q+1&&(X.maxTextureUnits=Q+1),A.unit=Q,c.activeTexture(uo+Q),c.bindTexture(A.target,A.texture)}return Q},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&lt(this)}});function Nt(A,Q){var W=new St(Mr);Bn[W.id]=W,X.textureCount++;function Ue(p,N){var B=W.texInfo;on.call(B);var z=kt();return typeof p=="number"?typeof N=="number"?vt(z,p|0,N|0):vt(z,p|0,p|0):p?(E.type(p,"object","invalid arguments to regl.texture"),An(B,p),Ot(z,p)):vt(z,1,1),B.genMipmaps&&(z.mipmask=(z.width<<1)-1),W.mipmask=z.mipmask,ne(W,z),E.texture2D(B,z,O),W.internalformat=z.internalformat,Ue.width=z.width,Ue.height=z.height,Vn(W),sn(z,Mr),Pn(B,Mr),Xt(),Nn(z),q.profile&&(W.stats.size=yl(W.internalformat,W.type,z.width,z.height,B.genMipmaps,!1)),Ue.format=me[W.internalformat],Ue.type=je[W.type],Ue.mag=ue[B.magFilter],Ue.min=De[B.minFilter],Ue.wrapS=Ne[B.wrapS],Ue.wrapT=Ne[B.wrapT],Ue}function Lt(p,N,B,z){E(!!p,"must specify image data");var k=N|0,P=B|0,j=z|0,S=Pe();return ne(S,W),S.width=0,S.height=0,Ae(S,p),S.width=S.width||(W.width>>j)-k,S.height=S.height||(W.height>>j)-P,E(W.type===S.type&&W.format===S.format&&W.internalformat===S.internalformat,"incompatible format for texture.subimage"),E(k>=0&&P>=0&&k+S.width<=W.width&&P+S.height<=W.height,"texture.subimage write out of bounds"),E(W.mipmask&1<<j,"missing mipmap data"),E(S.data||S.element||S.needsCopy,"missing image data"),Vn(W),pt(S,Mr,k,P,j),Xt(),Me(S),Ue}function _(p,N){var B=p|0,z=N|0||B;if(B===W.width&&z===W.height)return Ue;Ue.width=W.width=B,Ue.height=W.height=z,Vn(W);for(var k=0;W.mipmask>>k;++k){var P=B>>k,j=z>>k;if(!P||!j)break;c.texImage2D(Mr,k,W.format,P,j,0,W.format,W.type,null)}return Xt(),q.profile&&(W.stats.size=yl(W.internalformat,W.type,B,z,!1,!1)),Ue}return Ue(A,Q),Ue.subimage=Lt,Ue.resize=_,Ue._reglType="texture2d",Ue._texture=W,q.profile&&(Ue.stats=W.stats),Ue.destroy=function(){W.decRef()},Ue}function Ft(A,Q,W,Ue,Lt,_){var p=new St(Is);Bn[p.id]=p,X.cubeCount++;var N=new Array(6);function B(P,j,S,R,C,H){var U,te=p.texInfo;for(on.call(te),U=0;U<6;++U)N[U]=kt();if(typeof P=="number"||!P){var ae=P|0||1;for(U=0;U<6;++U)vt(N[U],ae,ae)}else if(typeof P=="object")if(j)Ot(N[0],P),Ot(N[1],j),Ot(N[2],S),Ot(N[3],R),Ot(N[4],C),Ot(N[5],H);else if(An(te,P),He(p,P),"faces"in P){var Se=P.faces;for(E(Array.isArray(Se)&&Se.length===6,"cube faces must be a length 6 array"),U=0;U<6;++U)E(typeof Se[U]=="object"&&!!Se[U],"invalid input for cube map face"),ne(N[U],p),Ot(N[U],Se[U])}else for(U=0;U<6;++U)Ot(N[U],P);else E.raise("invalid arguments to cube map");for(ne(p,N[0]),E.optional(function(){O.npotTextureCube||E(Tc(p.width)&&Tc(p.height),"your browser does not support non power or two texture dimensions")}),te.genMipmaps?p.mipmask=(N[0].width<<1)-1:p.mipmask=N[0].mipmask,E.textureCube(p,te,N,O),p.internalformat=N[0].internalformat,B.width=N[0].width,B.height=N[0].height,Vn(p),U=0;U<6;++U)sn(N[U],dl+U);for(Pn(te,Is),Xt(),q.profile&&(p.stats.size=yl(p.internalformat,p.type,B.width,B.height,te.genMipmaps,!0)),B.format=me[p.internalformat],B.type=je[p.type],B.mag=ue[te.magFilter],B.min=De[te.minFilter],B.wrapS=Ne[te.wrapS],B.wrapT=Ne[te.wrapT],U=0;U<6;++U)Nn(N[U]);return B}function z(P,j,S,R,C){E(!!j,"must specify image data"),E(typeof P=="number"&&P===(P|0)&&P>=0&&P<6,"invalid face");var H=S|0,U=R|0,te=C|0,ae=Pe();return ne(ae,p),ae.width=0,ae.height=0,Ae(ae,j),ae.width=ae.width||(p.width>>te)-H,ae.height=ae.height||(p.height>>te)-U,E(p.type===ae.type&&p.format===ae.format&&p.internalformat===ae.internalformat,"incompatible format for texture.subimage"),E(H>=0&&U>=0&&H+ae.width<=p.width&&U+ae.height<=p.height,"texture.subimage write out of bounds"),E(p.mipmask&1<<te,"missing mipmap data"),E(ae.data||ae.element||ae.needsCopy,"missing image data"),Vn(p),pt(ae,dl+P,H,U,te),Xt(),Me(ae),B}function k(P){var j=P|0;if(j!==p.width){B.width=p.width=j,B.height=p.height=j,Vn(p);for(var S=0;S<6;++S)for(var R=0;p.mipmask>>R;++R)c.texImage2D(dl+S,R,p.format,j>>R,j>>R,0,p.format,p.type,null);return Xt(),q.profile&&(p.stats.size=yl(p.internalformat,p.type,B.width,B.height,!1,!0)),B}}return B(A,Q,W,Ue,Lt,_),B.subimage=z,B.resize=k,B._reglType="textureCube",B._texture=p,q.profile&&(B.stats=p.stats),B.destroy=function(){p.decRef()},B}function yn(){for(var A=0;A<Un;++A)c.activeTexture(uo+A),c.bindTexture(Mr,null),gn[A]=null;rr(Bn).forEach(lt),X.cubeCount=0,X.textureCount=0}q.profile&&(X.getTotalTextureSize=function(){var A=0;return Object.keys(Bn).forEach(function(Q){A+=Bn[Q].stats.size}),A});function mi(){for(var A=0;A<Un;++A){var Q=gn[A];Q&&(Q.bindCount=0,Q.unit=-1,gn[A]=null)}rr(Bn).forEach(function(W){W.texture=c.createTexture(),c.bindTexture(W.target,W.texture);for(var Ue=0;Ue<32;++Ue)if(W.mipmask&1<<Ue)if(W.target===Mr)c.texImage2D(Mr,Ue,W.internalformat,W.width>>Ue,W.height>>Ue,0,W.internalformat,W.type,null);else for(var Lt=0;Lt<6;++Lt)c.texImage2D(dl+Lt,Ue,W.internalformat,W.width>>Ue,W.height>>Ue,0,W.internalformat,W.type,null);Pn(W.texInfo,W.target)})}function xo(){for(var A=0;A<Un;++A){var Q=gn[A];Q&&(Q.bindCount=0,Q.unit=-1,gn[A]=null),c.activeTexture(uo+A),c.bindTexture(Mr,null),c.bindTexture(Is,null)}}return{create2D:Nt,createCube:Ft,clear:yn,getTexture:function(A){return null},restore:mi,refresh:xo}}var di=36161,xl=32854,qc=32855,Zc=36194,Jc=33189,ef=36168,tf=34041,nf=35907,rf=34836,af=34842,of=34843,Cr=[];Cr[xl]=2,Cr[qc]=2,Cr[Zc]=2,Cr[Jc]=2,Cr[ef]=1,Cr[tf]=4,Cr[nf]=4,Cr[rf]=16,Cr[af]=8,Cr[of]=6;function lf(c,x,O){return Cr[c]*x*O}var mm=function(c,x,O,Y,re){var X={rgba4:xl,rgb565:Zc,"rgb5 a1":qc,depth:Jc,stencil:ef,"depth stencil":tf};x.ext_srgb&&(X.srgba=nf),x.ext_color_buffer_half_float&&(X.rgba16f=af,X.rgb16f=of),x.webgl_color_buffer_float&&(X.rgba32f=rf);var q=[];Object.keys(X).forEach(function(de){var pe=X[de];q[pe]=de});var fe=0,ce={};function ge(de){this.id=fe++,this.refCount=1,this.renderbuffer=de,this.format=xl,this.width=0,this.height=0,re.profile&&(this.stats={size:0})}ge.prototype.decRef=function(){--this.refCount<=0&&xe(this)};function xe(de){var pe=de.renderbuffer;E(pe,"must not double destroy renderbuffer"),c.bindRenderbuffer(di,null),c.deleteRenderbuffer(pe),de.renderbuffer=null,de.refCount=0,delete ce[de.id],Y.renderbufferCount--}function ye(de,pe){var G=new ge(c.createRenderbuffer());ce[G.id]=G,Y.renderbufferCount++;function K(je,ue){var De=0,Ne=0,rt=xl;if(typeof je=="object"&&je){var ie=je;if("shape"in ie){var ne=ie.shape;E(Array.isArray(ne)&&ne.length>=2,"invalid renderbuffer shape"),De=ne[0]|0,Ne=ne[1]|0}else"radius"in ie&&(De=Ne=ie.radius|0),"width"in ie&&(De=ie.width|0),"height"in ie&&(Ne=ie.height|0);"format"in ie&&(E.parameter(ie.format,X,"invalid renderbuffer format"),rt=X[ie.format])}else typeof je=="number"?(De=je|0,typeof ue=="number"?Ne=ue|0:Ne=De):je?E.raise("invalid arguments to renderbuffer constructor"):De=Ne=1;if(E(De>0&&Ne>0&&De<=O.maxRenderbufferSize&&Ne<=O.maxRenderbufferSize,"invalid renderbuffer size"),!(De===G.width&&Ne===G.height&&rt===G.format))return K.width=G.width=De,K.height=G.height=Ne,G.format=rt,c.bindRenderbuffer(di,G.renderbuffer),c.renderbufferStorage(di,rt,De,Ne),E(c.getError()===0,"invalid render buffer format"),re.profile&&(G.stats.size=lf(G.format,G.width,G.height)),K.format=q[G.format],K}function me(je,ue){var De=je|0,Ne=ue|0||De;return De===G.width&&Ne===G.height||(E(De>0&&Ne>0&&De<=O.maxRenderbufferSize&&Ne<=O.maxRenderbufferSize,"invalid renderbuffer size"),K.width=G.width=De,K.height=G.height=Ne,c.bindRenderbuffer(di,G.renderbuffer),c.renderbufferStorage(di,G.format,De,Ne),E(c.getError()===0,"invalid render buffer format"),re.profile&&(G.stats.size=lf(G.format,G.width,G.height))),K}return K(de,pe),K.resize=me,K._reglType="renderbuffer",K._renderbuffer=G,re.profile&&(K.stats=G.stats),K.destroy=function(){G.decRef()},K}re.profile&&(Y.getTotalRenderbufferSize=function(){var de=0;return Object.keys(ce).forEach(function(pe){de+=ce[pe].stats.size}),de});function we(){rr(ce).forEach(function(de){de.renderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(di,de.renderbuffer),c.renderbufferStorage(di,de.format,de.width,de.height)}),c.bindRenderbuffer(di,null)}return{create:ye,clear:function(){rr(ce).forEach(xe)},restore:we}},Qr=36160,qs=36161,Mi=3553,El=34069,sf=36064,_l=36096,uf=36128,cf=33306,ff=36053,pm=36054,vm=36055,gm=36057,ym=36061,xm=36193,Em=5121,_m=5126,df=6407,hf=6408,Sm=6402,wm=[df,hf],Zs=[];Zs[hf]=4,Zs[df]=3;var fo=[];fo[Em]=1,fo[_m]=4,fo[xm]=2;var Tm=32854,mf=32855,bm=36194,pf=33189,vf=36168,Js=34041,gf=35907,Cm=34836,ho=34842,Am=34843,Lm=[Tm,mf,bm,gf,ho,Am,Cm],va={};va[ff]="complete",va[pm]="incomplete attachment",va[gm]="incomplete dimensions",va[vm]="incomplete, missing attachment",va[ym]="unsupported";function Rm(c,x,O,Y,re,X){var q={cur:null,next:null,dirty:!1,setFBO:null},fe=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];x.ext_srgb&&ce.push("srgba"),x.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),x.webgl_color_buffer_float&&ce.push("rgba32f");var ge=["uint8"];x.oes_texture_half_float&&ge.push("half float","float16"),x.oes_texture_float&&ge.push("float","float32");function xe(he,Ae,Re){this.target=he,this.texture=Ae,this.renderbuffer=Re;var pt=0,ht=0;Ae?(pt=Ae.width,ht=Ae.height):Re&&(pt=Re.width,ht=Re.height),this.width=pt,this.height=ht}function ye(he){he&&(he.texture&&he.texture._texture.decRef(),he.renderbuffer&&he.renderbuffer._renderbuffer.decRef())}function we(he,Ae,Re){if(he)if(he.texture){var pt=he.texture._texture,ht=Math.max(1,pt.width),Pe=Math.max(1,pt.height);E(ht===Ae&&Pe===Re,"inconsistent width/height for supplied texture"),pt.refCount+=1}else{var Me=he.renderbuffer._renderbuffer;E(Me.width===Ae&&Me.height===Re,"inconsistent width/height for renderbuffer"),Me.refCount+=1}}function de(he,Ae){Ae&&(Ae.texture?c.framebufferTexture2D(Qr,he,Ae.target,Ae.texture._texture.texture,0):c.framebufferRenderbuffer(Qr,he,qs,Ae.renderbuffer._renderbuffer.renderbuffer))}function pe(he){var Ae=Mi,Re=null,pt=null,ht=he;typeof he=="object"&&(ht=he.data,"target"in he&&(Ae=he.target|0)),E.type(ht,"function","invalid attachment data");var Pe=ht._reglType;return Pe==="texture2d"?(Re=ht,E(Ae===Mi)):Pe==="textureCube"?(Re=ht,E(Ae>=El&&Ae<El+6,"invalid cube map target")):Pe==="renderbuffer"?(pt=ht,Ae=qs):E.raise("invalid regl object for attachment"),new xe(Ae,Re,pt)}function G(he,Ae,Re,pt,ht){if(Re){var Pe=Y.create2D({width:he,height:Ae,format:pt,type:ht});return Pe._texture.refCount=0,new xe(Mi,Pe,null)}else{var Me=re.create({width:he,height:Ae,format:pt});return Me._renderbuffer.refCount=0,new xe(qs,null,Me)}}function K(he){return he&&(he.texture||he.renderbuffer)}function me(he,Ae,Re){he&&(he.texture?he.texture.resize(Ae,Re):he.renderbuffer&&he.renderbuffer.resize(Ae,Re),he.width=Ae,he.height=Re)}var je=0,ue={};function De(){this.id=je++,ue[this.id]=this,this.framebuffer=c.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ne(he){he.colorAttachments.forEach(ye),ye(he.depthAttachment),ye(he.stencilAttachment),ye(he.depthStencilAttachment)}function rt(he){var Ae=he.framebuffer;E(Ae,"must not double destroy framebuffer"),c.deleteFramebuffer(Ae),he.framebuffer=null,X.framebufferCount--,delete ue[he.id]}function ie(he){var Ae;c.bindFramebuffer(Qr,he.framebuffer);var Re=he.colorAttachments;for(Ae=0;Ae<Re.length;++Ae)de(sf+Ae,Re[Ae]);for(Ae=Re.length;Ae<O.maxColorAttachments;++Ae)c.framebufferTexture2D(Qr,sf+Ae,Mi,null,0);c.framebufferTexture2D(Qr,cf,Mi,null,0),c.framebufferTexture2D(Qr,_l,Mi,null,0),c.framebufferTexture2D(Qr,uf,Mi,null,0),de(_l,he.depthAttachment),de(uf,he.stencilAttachment),de(cf,he.depthStencilAttachment);var pt=c.checkFramebufferStatus(Qr);!c.isContextLost()&&pt!==ff&&E.raise("framebuffer configuration not supported, status = "+va[pt]),c.bindFramebuffer(Qr,q.next?q.next.framebuffer:null),q.cur=q.next,c.getError()}function ne(he,Ae){var Re=new De;X.framebufferCount++;function pt(Pe,Me){var st;E(q.next!==Re,"can not update framebuffer which is currently in use");var vt=0,Ot=0,sn=!0,cn=!0,kt=null,Nn=!0,on="rgba",An="uint8",Pn=1,kn=null,Bn=null,Un=null,gn=!1;if(typeof Pe=="number")vt=Pe|0,Ot=Me|0||vt;else if(!Pe)vt=Ot=1;else{E.type(Pe,"object","invalid arguments for framebuffer");var St=Pe;if("shape"in St){var Vn=St.shape;E(Array.isArray(Vn)&&Vn.length>=2,"invalid shape for framebuffer"),vt=Vn[0],Ot=Vn[1]}else"radius"in St&&(vt=Ot=St.radius),"width"in St&&(vt=St.width),"height"in St&&(Ot=St.height);("color"in St||"colors"in St)&&(kt=St.color||St.colors,Array.isArray(kt)&&E(kt.length===1||x.webgl_draw_buffers,"multiple render targets not supported")),kt||("colorCount"in St&&(Pn=St.colorCount|0,E(Pn>0,"invalid color buffer count")),"colorTexture"in St&&(Nn=!!St.colorTexture,on="rgba4"),"colorType"in St&&(An=St.colorType,Nn?(E(x.oes_texture_float||!(An==="float"||An==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),E(x.oes_texture_half_float||!(An==="half float"||An==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):An==="half float"||An==="float16"?(E(x.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),on="rgba16f"):(An==="float"||An==="float32")&&(E(x.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),on="rgba32f"),E.oneOf(An,ge,"invalid color type")),"colorFormat"in St&&(on=St.colorFormat,fe.indexOf(on)>=0?Nn=!0:ce.indexOf(on)>=0?Nn=!1:E.optional(function(){Nn?E.oneOf(St.colorFormat,fe,"invalid color format for texture"):E.oneOf(St.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in St||"depthStencilTexture"in St)&&(gn=!!(St.depthTexture||St.depthStencilTexture),E(!gn||x.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in St&&(typeof St.depth=="boolean"?sn=St.depth:(kn=St.depth,cn=!1)),"stencil"in St&&(typeof St.stencil=="boolean"?cn=St.stencil:(Bn=St.stencil,sn=!1)),"depthStencil"in St&&(typeof St.depthStencil=="boolean"?sn=cn=St.depthStencil:(Un=St.depthStencil,sn=!1,cn=!1))}var Xt=null,lt=null,Nt=null,Ft=null;if(Array.isArray(kt))Xt=kt.map(pe);else if(kt)Xt=[pe(kt)];else for(Xt=new Array(Pn),st=0;st<Pn;++st)Xt[st]=G(vt,Ot,Nn,on,An);E(x.webgl_draw_buffers||Xt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),E(Xt.length<=O.maxColorAttachments,"too many color attachments, not supported"),vt=vt||Xt[0].width,Ot=Ot||Xt[0].height,kn?lt=pe(kn):sn&&!cn&&(lt=G(vt,Ot,gn,"depth","uint32")),Bn?Nt=pe(Bn):cn&&!sn&&(Nt=G(vt,Ot,!1,"stencil","uint8")),Un?Ft=pe(Un):!kn&&!Bn&&cn&&sn&&(Ft=G(vt,Ot,gn,"depth stencil","depth stencil")),E(!!kn+!!Bn+!!Un<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var yn=null;for(st=0;st<Xt.length;++st)if(we(Xt[st],vt,Ot),E(!Xt[st]||Xt[st].texture&&wm.indexOf(Xt[st].texture._texture.format)>=0||Xt[st].renderbuffer&&Lm.indexOf(Xt[st].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+st+" is invalid"),Xt[st]&&Xt[st].texture){var mi=Zs[Xt[st].texture._texture.format]*fo[Xt[st].texture._texture.type];yn===null?yn=mi:E(yn===mi,"all color attachments much have the same number of bits per pixel.")}return we(lt,vt,Ot),E(!lt||lt.texture&&lt.texture._texture.format===Sm||lt.renderbuffer&&lt.renderbuffer._renderbuffer.format===pf,"invalid depth attachment for framebuffer object"),we(Nt,vt,Ot),E(!Nt||Nt.renderbuffer&&Nt.renderbuffer._renderbuffer.format===vf,"invalid stencil attachment for framebuffer object"),we(Ft,vt,Ot),E(!Ft||Ft.texture&&Ft.texture._texture.format===Js||Ft.renderbuffer&&Ft.renderbuffer._renderbuffer.format===Js,"invalid depth-stencil attachment for framebuffer object"),Ne(Re),Re.width=vt,Re.height=Ot,Re.colorAttachments=Xt,Re.depthAttachment=lt,Re.stencilAttachment=Nt,Re.depthStencilAttachment=Ft,pt.color=Xt.map(K),pt.depth=K(lt),pt.stencil=K(Nt),pt.depthStencil=K(Ft),pt.width=Re.width,pt.height=Re.height,ie(Re),pt}function ht(Pe,Me){E(q.next!==Re,"can not resize a framebuffer which is currently in use");var st=Math.max(Pe|0,1),vt=Math.max(Me|0||st,1);if(st===Re.width&&vt===Re.height)return pt;for(var Ot=Re.colorAttachments,sn=0;sn<Ot.length;++sn)me(Ot[sn],st,vt);return me(Re.depthAttachment,st,vt),me(Re.stencilAttachment,st,vt),me(Re.depthStencilAttachment,st,vt),Re.width=pt.width=st,Re.height=pt.height=vt,ie(Re),pt}return pt(he,Ae),r(pt,{resize:ht,_reglType:"framebuffer",_framebuffer:Re,destroy:function(){rt(Re),Ne(Re)},use:function(Pe){q.setFBO({framebuffer:pt},Pe)}})}function He(he){var Ae=Array(6);function Re(ht){var Pe;E(Ae.indexOf(q.next)<0,"can not update framebuffer which is currently in use");var Me={color:null},st=0,vt=null,Ot="rgba",sn="uint8",cn=1;if(typeof ht=="number")st=ht|0;else if(!ht)st=1;else{E.type(ht,"object","invalid arguments for framebuffer");var kt=ht;if("shape"in kt){var Nn=kt.shape;E(Array.isArray(Nn)&&Nn.length>=2,"invalid shape for framebuffer"),E(Nn[0]===Nn[1],"cube framebuffer must be square"),st=Nn[0]}else"radius"in kt&&(st=kt.radius|0),"width"in kt?(st=kt.width|0,"height"in kt&&E(kt.height===st,"must be square")):"height"in kt&&(st=kt.height|0);("color"in kt||"colors"in kt)&&(vt=kt.color||kt.colors,Array.isArray(vt)&&E(vt.length===1||x.webgl_draw_buffers,"multiple render targets not supported")),vt||("colorCount"in kt&&(cn=kt.colorCount|0,E(cn>0,"invalid color buffer count")),"colorType"in kt&&(E.oneOf(kt.colorType,ge,"invalid color type"),sn=kt.colorType),"colorFormat"in kt&&(Ot=kt.colorFormat,E.oneOf(kt.colorFormat,fe,"invalid color format for texture"))),"depth"in kt&&(Me.depth=kt.depth),"stencil"in kt&&(Me.stencil=kt.stencil),"depthStencil"in kt&&(Me.depthStencil=kt.depthStencil)}var on;if(vt)if(Array.isArray(vt))for(on=[],Pe=0;Pe<vt.length;++Pe)on[Pe]=vt[Pe];else on=[vt];else{on=Array(cn);var An={radius:st,format:Ot,type:sn};for(Pe=0;Pe<cn;++Pe)on[Pe]=Y.createCube(An)}for(Me.color=Array(on.length),Pe=0;Pe<on.length;++Pe){var Pn=on[Pe];E(typeof Pn=="function"&&Pn._reglType==="textureCube","invalid cube map"),st=st||Pn.width,E(Pn.width===st&&Pn.height===st,"invalid cube map shape"),Me.color[Pe]={target:El,data:on[Pe]}}for(Pe=0;Pe<6;++Pe){for(var kn=0;kn<on.length;++kn)Me.color[kn].target=El+Pe;Pe>0&&(Me.depth=Ae[0].depth,Me.stencil=Ae[0].stencil,Me.depthStencil=Ae[0].depthStencil),Ae[Pe]?Ae[Pe](Me):Ae[Pe]=ne(Me)}return r(Re,{width:st,height:st,color:on})}function pt(ht){var Pe,Me=ht|0;if(E(Me>0&&Me<=O.maxCubeMapSize,"invalid radius for cube fbo"),Me===Re.width)return Re;var st=Re.color;for(Pe=0;Pe<st.length;++Pe)st[Pe].resize(Me);for(Pe=0;Pe<6;++Pe)Ae[Pe].resize(Me);return Re.width=Re.height=Me,Re}return Re(he),r(Re,{faces:Ae,resize:pt,_reglType:"framebufferCube",destroy:function(){Ae.forEach(function(ht){ht.destroy()})}})}function Ce(){q.cur=null,q.next=null,q.dirty=!0,rr(ue).forEach(function(he){he.framebuffer=c.createFramebuffer(),ie(he)})}return r(q,{getFramebuffer:function(he){if(typeof he=="function"&&he._reglType==="framebuffer"){var Ae=he._framebuffer;if(Ae instanceof De)return Ae}return null},create:ne,createCube:He,clear:function(){rr(ue).forEach(rt)},restore:Ce})}var Om=5126,s=34962,M=34963,V=["attributes","elements","offset","count","primitive","instances"];function oe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Om,this.offset=0,this.stride=0,this.divisor=0}function be(c,x,O,Y,re,X,q){for(var fe=O.maxAttributes,ce=new Array(fe),ge=0;ge<fe;++ge)ce[ge]=new oe;var xe=0,ye={},we={Record:oe,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:pe()?Ne:function(){},createVAO:rt,getVAO:K,destroyBuffer:de,setVAO:pe()?me:je,clear:pe()?ue:function(){}};function de(ie){for(var ne=0;ne<ce.length;++ne){var He=ce[ne];He.buffer===ie&&(c.disableVertexAttribArray(ne),He.buffer=null)}}function pe(){return x.oes_vertex_array_object}function G(){return x.angle_instanced_arrays}function K(ie){return typeof ie=="function"&&ie._vao?ie._vao:null}function me(ie){if(ie!==we.currentVAO){var ne=pe();ie?ne.bindVertexArrayOES(ie.vao):ne.bindVertexArrayOES(null),we.currentVAO=ie}}function je(ie){if(ie!==we.currentVAO){if(ie)ie.bindAttrs();else{for(var ne=G(),He=0;He<ce.length;++He){var Ce=ce[He];Ce.buffer?(c.enableVertexAttribArray(He),Ce.buffer.bind(),c.vertexAttribPointer(He,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offfset),ne&&Ce.divisor&&ne.vertexAttribDivisorANGLE(He,Ce.divisor)):(c.disableVertexAttribArray(He),c.vertexAttrib4f(He,Ce.x,Ce.y,Ce.z,Ce.w))}q.elements?c.bindBuffer(M,q.elements.buffer.buffer):c.bindBuffer(M,null)}we.currentVAO=ie}}function ue(){rr(ye).forEach(function(ie){ie.destroy()})}function De(){this.id=++xe,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var ie=pe();ie?this.vao=ie.createVertexArrayOES():this.vao=null,ye[this.id]=this,this.buffers=[]}De.prototype.bindAttrs=function(){for(var ie=G(),ne=this.attributes,He=0;He<ne.length;++He){var Ce=ne[He];Ce.buffer?(c.enableVertexAttribArray(He),c.bindBuffer(s,Ce.buffer.buffer),c.vertexAttribPointer(He,Ce.size,Ce.type,Ce.normalized,Ce.stride,Ce.offset),ie&&Ce.divisor&&ie.vertexAttribDivisorANGLE(He,Ce.divisor)):(c.disableVertexAttribArray(He),c.vertexAttrib4f(He,Ce.x,Ce.y,Ce.z,Ce.w))}for(var he=ne.length;he<fe;++he)c.disableVertexAttribArray(he);var Ae=X.getElements(this.elements);Ae?c.bindBuffer(M,Ae.buffer.buffer):c.bindBuffer(M,null)},De.prototype.refresh=function(){var ie=pe();ie&&(ie.bindVertexArrayOES(this.vao),this.bindAttrs(),we.currentVAO=null,ie.bindVertexArrayOES(null))},De.prototype.destroy=function(){if(this.vao){var ie=pe();this===we.currentVAO&&(we.currentVAO=null,ie.bindVertexArrayOES(null)),ie.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ye[this.id]&&(delete ye[this.id],Y.vaoCount-=1)};function Ne(){var ie=pe();ie&&rr(ye).forEach(function(ne){ne.refresh()})}function rt(ie){var ne=new De;Y.vaoCount+=1;function He(Ce){var he;if(Array.isArray(Ce))he=Ce,ne.elements&&ne.ownsElements&&ne.elements.destroy(),ne.elements=null,ne.ownsElements=!1,ne.offset=0,ne.count=0,ne.instances=-1,ne.primitive=4;else{if(E(typeof Ce=="object","invalid arguments for create vao"),E("attributes"in Ce,"must specify attributes for vao"),Ce.elements){var Ae=Ce.elements;ne.ownsElements?typeof Ae=="function"&&Ae._reglType==="elements"?(ne.elements.destroy(),ne.ownsElements=!1):(ne.elements(Ae),ne.ownsElements=!1):X.getElements(Ce.elements)?(ne.elements=Ce.elements,ne.ownsElements=!1):(ne.elements=X.create(Ce.elements),ne.ownsElements=!0)}else ne.elements=null,ne.ownsElements=!1;he=Ce.attributes,ne.offset=0,ne.count=-1,ne.instances=-1,ne.primitive=4,ne.elements&&(ne.count=ne.elements._elements.vertCount,ne.primitive=ne.elements._elements.primType),"offset"in Ce&&(ne.offset=Ce.offset|0),"count"in Ce&&(ne.count=Ce.count|0),"instances"in Ce&&(ne.instances=Ce.instances|0),"primitive"in Ce&&(E(Ce.primitive in ci,"bad primitive type: "+Ce.primitive),ne.primitive=ci[Ce.primitive]),E.optional(()=>{for(var sn=Object.keys(Ce),cn=0;cn<sn.length;++cn)E(V.indexOf(sn[cn])>=0,'invalid option for vao: "'+sn[cn]+'" valid options are '+V)}),E(Array.isArray(he),"attributes must be an array")}E(he.length<fe,"too many attributes"),E(he.length>0,"must specify at least one attribute");var Re={},pt=ne.attributes;pt.length=he.length;for(var ht=0;ht<he.length;++ht){var Pe=he[ht],Me=pt[ht]=new oe,st=Pe.data||Pe;if(Array.isArray(st)||n(st)||fr(st)){var vt;ne.buffers[ht]&&(vt=ne.buffers[ht],n(st)&&vt._buffer.byteLength>=st.byteLength?vt.subdata(st):(vt.destroy(),ne.buffers[ht]=null)),ne.buffers[ht]||(vt=ne.buffers[ht]=re.create(Pe,s,!1,!0)),Me.buffer=re.getBuffer(vt),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1,Re[ht]=1}else re.getBuffer(Pe)?(Me.buffer=re.getBuffer(Pe),Me.size=Me.buffer.dimension|0,Me.normalized=!1,Me.type=Me.buffer.dtype,Me.offset=0,Me.stride=0,Me.divisor=0,Me.state=1):re.getBuffer(Pe.buffer)?(Me.buffer=re.getBuffer(Pe.buffer),Me.size=(+Pe.size||Me.buffer.dimension)|0,Me.normalized=!!Pe.normalized||!1,"type"in Pe?(E.parameter(Pe.type,ua,"invalid buffer type"),Me.type=ua[Pe.type]):Me.type=Me.buffer.dtype,Me.offset=(Pe.offset||0)|0,Me.stride=(Pe.stride||0)|0,Me.divisor=(Pe.divisor||0)|0,Me.state=1,E(Me.size>=1&&Me.size<=4,"size must be between 1 and 4"),E(Me.offset>=0,"invalid offset"),E(Me.stride>=0&&Me.stride<=255,"stride must be between 0 and 255"),E(Me.divisor>=0,"divisor must be positive"),E(!Me.divisor||!!x.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pe?(E(ht>0,"first attribute must not be a constant"),Me.x=+Pe.x||0,Me.y=+Pe.y||0,Me.z=+Pe.z||0,Me.w=+Pe.w||0,Me.state=2):E(!1,"invalid attribute spec for location "+ht)}for(var Ot=0;Ot<ne.buffers.length;++Ot)!Re[Ot]&&ne.buffers[Ot]&&(ne.buffers[Ot].destroy(),ne.buffers[Ot]=null);return ne.refresh(),He}return He.destroy=function(){for(var Ce=0;Ce<ne.buffers.length;++Ce)ne.buffers[Ce]&&ne.buffers[Ce].destroy();ne.buffers.length=0,ne.ownsElements&&(ne.elements.destroy(),ne.elements=null,ne.ownsElements=!1),ne.destroy()},He._vao=ne,He._reglType="vao",He(ie)}return we}var $e=35632,Xe=35633,xt=35718,Wt=35721;function Gt(c,x,O,Y){var re={},X={};function q(G,K,me,je){this.name=G,this.id=K,this.location=me,this.info=je}function fe(G,K){for(var me=0;me<G.length;++me)if(G[me].id===K.id){G[me].location=K.location;return}G.push(K)}function ce(G,K,me){var je=G===$e?re:X,ue=je[K];if(!ue){var De=x.str(K);ue=c.createShader(G),c.shaderSource(ue,De),c.compileShader(ue),E.shaderError(c,ue,De,G,me),je[K]=ue}return ue}var ge={},xe=[],ye=0;function we(G,K){this.id=ye++,this.fragId=G,this.vertId=K,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Y.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function de(G,K,me){var je,ue,De=ce($e,G.fragId),Ne=ce(Xe,G.vertId),rt=G.program=c.createProgram();if(c.attachShader(rt,De),c.attachShader(rt,Ne),me)for(je=0;je<me.length;++je){var ie=me[je];c.bindAttribLocation(rt,ie[0],ie[1])}c.linkProgram(rt),E.linkError(c,rt,x.str(G.fragId),x.str(G.vertId),K);var ne=c.getProgramParameter(rt,xt);Y.profile&&(G.stats.uniformsCount=ne);var He=G.uniforms;for(je=0;je<ne;++je)if(ue=c.getActiveUniform(rt,je),ue){if(ue.size>1)for(var Ce=0;Ce<ue.size;++Ce){var he=ue.name.replace("[0]","["+Ce+"]");fe(He,new q(he,x.id(he),c.getUniformLocation(rt,he),ue))}var Ae=ue.name;ue.size>1&&(Ae=Ae.replace("[0]","")),fe(He,new q(Ae,x.id(Ae),c.getUniformLocation(rt,Ae),ue))}var Re=c.getProgramParameter(rt,Wt);Y.profile&&(G.stats.attributesCount=Re);var pt=G.attributes;for(je=0;je<Re;++je)ue=c.getActiveAttrib(rt,je),ue&&fe(pt,new q(ue.name,x.id(ue.name),c.getAttribLocation(rt,ue.name),ue))}Y.profile&&(O.getMaxUniformsCount=function(){var G=0;return xe.forEach(function(K){K.stats.uniformsCount>G&&(G=K.stats.uniformsCount)}),G},O.getMaxAttributesCount=function(){var G=0;return xe.forEach(function(K){K.stats.attributesCount>G&&(G=K.stats.attributesCount)}),G});function pe(){re={},X={};for(var G=0;G<xe.length;++G)de(xe[G],null,xe[G].attributes.map(function(K){return[K.location,K.name]}))}return{clear:function(){var G=c.deleteShader.bind(c);rr(re).forEach(G),re={},rr(X).forEach(G),X={},xe.forEach(function(K){c.deleteProgram(K.program)}),xe.length=0,ge={},O.shaderCount=0},program:function(G,K,me,je){E.command(G>=0,"missing vertex shader",me),E.command(K>=0,"missing fragment shader",me);var ue=ge[K];ue||(ue=ge[K]={});var De=ue[G];if(De&&(De.refCount++,!je))return De;var Ne=new we(K,G);return O.shaderCount++,de(Ne,me,je),De||(ue[G]=Ne),xe.push(Ne),r(Ne,{destroy:function(){if(Ne.refCount--,Ne.refCount<=0){c.deleteProgram(Ne.program);var rt=xe.indexOf(Ne);xe.splice(rt,1),O.shaderCount--}ue[Ne.vertId].refCount<=0&&(c.deleteShader(X[Ne.vertId]),delete X[Ne.vertId],delete ge[Ne.fragId][Ne.vertId]),Object.keys(ge[Ne.fragId]).length||(c.deleteShader(re[Ne.fragId]),delete re[Ne.fragId],delete ge[Ne.fragId])}})},restore:pe,shader:ce,frag:-1,vert:-1}}var bn=6408,Zt=5121,zt=3333,yf=5126;function xS(c,x,O,Y,re,X,q){function fe(xe){var ye;x.next===null?(E(re.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ye=Zt):(E(x.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ye=x.next.colorAttachments[0].texture._texture.type,E.optional(function(){X.oes_texture_float?(E(ye===Zt||ye===yf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ye===yf&&E(q.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):E(ye===Zt,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var we=0,de=0,pe=Y.framebufferWidth,G=Y.framebufferHeight,K=null;n(xe)?K=xe:xe&&(E.type(xe,"object","invalid arguments to regl.read()"),we=xe.x|0,de=xe.y|0,E(we>=0&&we<Y.framebufferWidth,"invalid x offset for regl.read"),E(de>=0&&de<Y.framebufferHeight,"invalid y offset for regl.read"),pe=(xe.width||Y.framebufferWidth-we)|0,G=(xe.height||Y.framebufferHeight-de)|0,K=xe.data||null),K&&(ye===Zt?E(K instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ye===yf&&E(K instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),E(pe>0&&pe+we<=Y.framebufferWidth,"invalid width for read pixels"),E(G>0&&G+de<=Y.framebufferHeight,"invalid height for read pixels"),O();var me=pe*G*4;return K||(ye===Zt?K=new Uint8Array(me):ye===yf&&(K=K||new Float32Array(me))),E.isTypedArray(K,"data buffer for regl.read() must be a typedarray"),E(K.byteLength>=me,"data buffer for regl.read() too small"),c.pixelStorei(zt,4),c.readPixels(we,de,pe,G,bn,ye,K),K}function ce(xe){var ye;return x.setFBO({framebuffer:xe.framebuffer},function(){ye=fe(xe)}),ye}function ge(xe){return!xe||!("framebuffer"in xe)?fe(xe):ce(xe)}return ge}function Sl(c){return Array.prototype.slice.call(c)}function wl(c){return Sl(c).join("")}function ES(){var c=0,x=[],O=[];function Y(ye){for(var we=0;we<O.length;++we)if(O[we]===ye)return x[we];var de="g"+c++;return x.push(de),O.push(ye),de}function re(){var ye=[];function we(){ye.push.apply(ye,Sl(arguments))}var de=[];function pe(){var G="v"+c++;return de.push(G),arguments.length>0&&(ye.push(G,"="),ye.push.apply(ye,Sl(arguments)),ye.push(";")),G}return r(we,{def:pe,toString:function(){return wl([de.length>0?"var "+de.join(",")+";":"",wl(ye)])}})}function X(){var ye=re(),we=re(),de=ye.toString,pe=we.toString;function G(K,me){we(K,me,"=",ye.def(K,me),";")}return r(function(){ye.apply(ye,Sl(arguments))},{def:ye.def,entry:ye,exit:we,save:G,set:function(K,me,je){G(K,me),ye(K,me,"=",je,";")},toString:function(){return de()+pe()}})}function q(){var ye=wl(arguments),we=X(),de=X(),pe=we.toString,G=de.toString;return r(we,{then:function(){return we.apply(we,Sl(arguments)),this},else:function(){return de.apply(de,Sl(arguments)),this},toString:function(){var K=G();return K&&(K="else{"+K+"}"),wl(["if(",ye,"){",pe(),"}",K])}})}var fe=re(),ce={};function ge(ye,we){var de=[];function pe(){var ue="a"+de.length;return de.push(ue),ue}we=we||0;for(var G=0;G<we;++G)pe();var K=X(),me=K.toString,je=ce[ye]=r(K,{arg:pe,toString:function(){return wl(["function(",de.join(),"){",me(),"}"])}});return je}function xe(){var ye=['"use strict";',fe,"return {"];Object.keys(ce).forEach(function(pe){ye.push('"',pe,'":',ce[pe].toString(),",")}),ye.push("}");var we=wl(ye).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),de=Function.apply(null,x.concat(we));return de.apply(null,O)}return{global:fe,link:Y,block:re,proc:ge,scope:X,cond:q,compile:xe}}var Tl="xyzw".split(""),pg=5121,bl=1,Nm=2,Pm=0,km=1,Im=2,Dm=3,xf=4,vg=5,gg=6,yg="dither",xg="blend.enable",Eg="blend.color",Mm="blend.equation",jm="blend.func",_g="depth.enable",Sg="depth.func",wg="depth.range",Tg="depth.mask",Fm="colorMask",bg="cull.enable",Cg="cull.face",$m="frontFace",Bm="lineWidth",Ag="polygonOffset.enable",Gm="polygonOffset.offset",Lg="sample.alpha",Rg="sample.enable",zm="sample.coverage",Og="stencil.enable",Ng="stencil.mask",Um="stencil.func",Vm="stencil.opFront",eu="stencil.opBack",Pg="scissor.enable",Ef="scissor.box",ji="viewport",tu="profile",mo="framebuffer",nu="vert",ru="frag",po="elements",vo="primitive",go="count",_f="offset",Sf="instances",iu="vao",Hm="Width",Wm="Height",Cl=mo+Hm,Al=mo+Wm,_S=ji+Hm,SS=ji+Wm,kg="drawingBuffer",Ig=kg+Hm,Dg=kg+Wm,wS=[jm,Mm,Um,Vm,eu,zm,ji,Ef,Gm],Ll=34962,Xm=34963,TS=35632,bS=35633,Mg=3553,CS=34067,AS=2884,LS=3042,RS=3024,OS=2960,NS=2929,PS=3089,kS=32823,IS=32926,DS=32928,Ym=5126,wf=35664,Tf=35665,bf=35666,Qm=5124,Cf=35667,Af=35668,Lf=35669,Km=35670,Rf=35671,Of=35672,Nf=35673,au=35674,ou=35675,lu=35676,su=35678,uu=35680,qm=4,cu=1028,yo=1029,jg=2304,Zm=2305,MS=32775,jS=32776,FS=519,ga=7680,Fg=0,$g=1,Bg=32774,$S=513,Gg=36160,BS=36064,hi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},zg=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Rl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ya={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ug={frag:TS,vert:bS},Jm={cw:jg,ccw:Zm};function Pf(c){return Array.isArray(c)||n(c)||fr(c)}function Vg(c){return c.sort(function(x,O){return x===ji?-1:O===ji?1:x<O?-1:1})}function Mn(c,x,O,Y){this.thisDep=c,this.contextDep=x,this.propDep=O,this.append=Y}function xa(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function Cn(c){return new Mn(!1,!1,!1,c)}function dr(c,x){var O=c.type;if(O===Pm){var Y=c.data.length;return new Mn(!0,Y>=1,Y>=2,x)}else if(O===xf){var re=c.data;return new Mn(re.thisDep,re.contextDep,re.propDep,x)}else{if(O===vg)return new Mn(!1,!1,!1,x);if(O===gg){for(var X=!1,q=!1,fe=!1,ce=0;ce<c.data.length;++ce){var ge=c.data[ce];if(ge.type===km)fe=!0;else if(ge.type===Im)q=!0;else if(ge.type===Dm)X=!0;else if(ge.type===Pm){X=!0;var xe=ge.data;xe>=1&&(q=!0),xe>=2&&(fe=!0)}else ge.type===xf&&(X=X||ge.data.thisDep,q=q||ge.data.contextDep,fe=fe||ge.data.propDep)}return new Mn(X,q,fe,x)}else return new Mn(O===Dm,O===Im,O===km,x)}}var Hg=new Mn(!1,!1,!1,function(){});function GS(c,x,O,Y,re,X,q,fe,ce,ge,xe,ye,we,de,pe){var G=ge.Record,K={add:32774,subtract:32778,"reverse subtract":32779};O.ext_blend_minmax&&(K.min=MS,K.max=jS);var me=O.angle_instanced_arrays,je=O.webgl_draw_buffers,ue=O.oes_vertex_array_object,De={dirty:!0,profile:pe.profile},Ne={},rt=[],ie={},ne={};function He(_){return _.replace(".","_")}function Ce(_,p,N){var B=He(_);rt.push(_),Ne[B]=De[B]=!!N,ie[B]=p}function he(_,p,N){var B=He(_);rt.push(_),Array.isArray(N)?(De[B]=N.slice(),Ne[B]=N.slice()):De[B]=Ne[B]=N,ne[B]=p}Ce(yg,RS),Ce(xg,LS),he(Eg,"blendColor",[0,0,0,0]),he(Mm,"blendEquationSeparate",[Bg,Bg]),he(jm,"blendFuncSeparate",[$g,Fg,$g,Fg]),Ce(_g,NS,!0),he(Sg,"depthFunc",$S),he(wg,"depthRange",[0,1]),he(Tg,"depthMask",!0),he(Fm,Fm,[!0,!0,!0,!0]),Ce(bg,AS),he(Cg,"cullFace",yo),he($m,$m,Zm),he(Bm,Bm,1),Ce(Ag,kS),he(Gm,"polygonOffset",[0,0]),Ce(Lg,IS),Ce(Rg,DS),he(zm,"sampleCoverage",[1,!1]),Ce(Og,OS),he(Ng,"stencilMask",-1),he(Um,"stencilFunc",[FS,0,-1]),he(Vm,"stencilOpSeparate",[cu,ga,ga,ga]),he(eu,"stencilOpSeparate",[yo,ga,ga,ga]),Ce(Pg,PS),he(Ef,"scissor",[0,0,c.drawingBufferWidth,c.drawingBufferHeight]),he(ji,ji,[0,0,c.drawingBufferWidth,c.drawingBufferHeight]);var Ae={gl:c,context:we,strings:x,next:Ne,current:De,draw:ye,elements:X,buffer:re,shader:xe,attributes:ge.state,vao:ge,uniforms:ce,framebuffer:fe,extensions:O,timer:de,isBufferArgs:Pf},Re={primTypes:ci,compareFuncs:Rl,blendFuncs:hi,blendEquations:K,stencilOps:ya,glTypes:ua,orientationType:Jm};E.optional(function(){Ae.isArrayLike=an}),je&&(Re.backBuffer=[yo],Re.drawBuffer=vn(Y.maxDrawbuffers,function(_){return _===0?[0]:vn(_,function(p){return BS+p})}));var pt=0;function ht(){var _=ES(),p=_.link,N=_.global;_.id=pt++,_.batchId="0";var B=p(Ae),z=_.shared={props:"a0"};Object.keys(Ae).forEach(function(R){z[R]=N.def(B,".",R)}),E.optional(function(){_.CHECK=p(E),_.commandStr=E.guessCommand(),_.command=p(_.commandStr),_.assert=function(R,C,H){R("if(!(",C,"))",this.CHECK,".commandRaise(",p(H),",",this.command,");")},Re.invalidBlendCombinations=zg});var k=_.next={},P=_.current={};Object.keys(ne).forEach(function(R){Array.isArray(De[R])&&(k[R]=N.def(z.next,".",R),P[R]=N.def(z.current,".",R))});var j=_.constants={};Object.keys(Re).forEach(function(R){j[R]=N.def(JSON.stringify(Re[R]))}),_.invoke=function(R,C){switch(C.type){case Pm:var H=["this",z.context,z.props,_.batchId];return R.def(p(C.data),".call(",H.slice(0,Math.max(C.data.length+1,4)),")");case km:return R.def(z.props,C.data);case Im:return R.def(z.context,C.data);case Dm:return R.def("this",C.data);case xf:return C.data.append(_,R),C.data.ref;case vg:return C.data.toString();case gg:return C.data.map(function(U){return _.invoke(R,U)})}},_.attribCache={};var S={};return _.scopeAttrib=function(R){var C=x.id(R);if(C in S)return S[C];var H=ge.scope[C];H||(H=ge.scope[C]=new G);var U=S[C]=p(H);return U},_}function Pe(_){var p=_.static,N=_.dynamic,B;if(tu in p){var z=!!p[tu];B=Cn(function(P,j){return z}),B.enable=z}else if(tu in N){var k=N[tu];B=dr(k,function(P,j){return P.invoke(j,k)})}return B}function Me(_,p){var N=_.static,B=_.dynamic;if(mo in N){var z=N[mo];return z?(z=fe.getFramebuffer(z),E.command(z,"invalid framebuffer object"),Cn(function(P,j){var S=P.link(z),R=P.shared;j.set(R.framebuffer,".next",S);var C=R.context;return j.set(C,"."+Cl,S+".width"),j.set(C,"."+Al,S+".height"),S})):Cn(function(P,j){var S=P.shared;j.set(S.framebuffer,".next","null");var R=S.context;return j.set(R,"."+Cl,R+"."+Ig),j.set(R,"."+Al,R+"."+Dg),"null"})}else if(mo in B){var k=B[mo];return dr(k,function(P,j){var S=P.invoke(j,k),R=P.shared,C=R.framebuffer,H=j.def(C,".getFramebuffer(",S,")");E.optional(function(){P.assert(j,"!"+S+"||"+H,"invalid framebuffer object")}),j.set(C,".next",H);var U=R.context;return j.set(U,"."+Cl,H+"?"+H+".width:"+U+"."+Ig),j.set(U,"."+Al,H+"?"+H+".height:"+U+"."+Dg),H})}else return null}function st(_,p,N){var B=_.static,z=_.dynamic;function k(S){if(S in B){var R=B[S];E.commandType(R,"object","invalid "+S,N.commandStr);var C=!0,H=R.x|0,U=R.y|0,te,ae;return"width"in R?(te=R.width|0,E.command(te>=0,"invalid "+S,N.commandStr)):C=!1,"height"in R?(ae=R.height|0,E.command(ae>=0,"invalid "+S,N.commandStr)):C=!1,new Mn(!C&&p&&p.thisDep,!C&&p&&p.contextDep,!C&&p&&p.propDep,function(tt,Be){var le=tt.shared.context,J=te;"width"in R||(J=Be.def(le,".",Cl,"-",H));var Ye=ae;return"height"in R||(Ye=Be.def(le,".",Al,"-",U)),[H,U,J,Ye]})}else if(S in z){var Se=z[S],ct=dr(Se,function(tt,Be){var le=tt.invoke(Be,Se);E.optional(function(){tt.assert(Be,le+"&&typeof "+le+'==="object"',"invalid "+S)});var J=tt.shared.context,Ye=Be.def(le,".x|0"),We=Be.def(le,".y|0"),ut=Be.def('"width" in ',le,"?",le,".width|0:","(",J,".",Cl,"-",Ye,")"),Kt=Be.def('"height" in ',le,"?",le,".height|0:","(",J,".",Al,"-",We,")");return E.optional(function(){tt.assert(Be,ut+">=0&&"+Kt+">=0","invalid "+S)}),[Ye,We,ut,Kt]});return p&&(ct.thisDep=ct.thisDep||p.thisDep,ct.contextDep=ct.contextDep||p.contextDep,ct.propDep=ct.propDep||p.propDep),ct}else return p?new Mn(p.thisDep,p.contextDep,p.propDep,function(tt,Be){var le=tt.shared.context;return[0,0,Be.def(le,".",Cl),Be.def(le,".",Al)]}):null}var P=k(ji);if(P){var j=P;P=new Mn(P.thisDep,P.contextDep,P.propDep,function(S,R){var C=j.append(S,R),H=S.shared.context;return R.set(H,"."+_S,C[2]),R.set(H,"."+SS,C[3]),C})}return{viewport:P,scissor_box:k(Ef)}}function vt(_,p){var N=_.static,B=typeof N[ru]=="string"&&typeof N[nu]=="string";if(B){if(Object.keys(p.dynamic).length>0)return null;var z=p.static,k=Object.keys(z);if(k.length>0&&typeof z[k[0]]=="number"){for(var P=[],j=0;j<k.length;++j)E(typeof z[k[j]]=="number","must specify all vertex attribute locations when using vaos"),P.push([z[k[j]]|0,k[j]]);return P}}return null}function Ot(_,p,N){var B=_.static,z=_.dynamic;function k(C){if(C in B){var H=x.id(B[C]);E.optional(function(){xe.shader(Ug[C],H,E.guessCommand())});var U=Cn(function(){return H});return U.id=H,U}else if(C in z){var te=z[C];return dr(te,function(ae,Se){var ct=ae.invoke(Se,te),tt=Se.def(ae.shared.strings,".id(",ct,")");return E.optional(function(){Se(ae.shared.shader,".shader(",Ug[C],",",tt,",",ae.command,");")}),tt})}return null}var P=k(ru),j=k(nu),S=null,R;return xa(P)&&xa(j)?(S=xe.program(j.id,P.id,null,N),R=Cn(function(C,H){return C.link(S)})):R=new Mn(P&&P.thisDep||j&&j.thisDep,P&&P.contextDep||j&&j.contextDep,P&&P.propDep||j&&j.propDep,function(C,H){var U=C.shared.shader,te;P?te=P.append(C,H):te=H.def(U,".",ru);var ae;j?ae=j.append(C,H):ae=H.def(U,".",nu);var Se=U+".program("+ae+","+te;return E.optional(function(){Se+=","+C.command}),H.def(Se+")")}),{frag:P,vert:j,progVar:R,program:S}}function sn(_,p){var N=_.static,B=_.dynamic,z={},k=!1;function P(){if(iu in N){var Be=N[iu];return Be!==null&&ge.getVAO(Be)===null&&(Be=ge.createVAO(Be)),k=!0,z.vao=Be,Cn(function(J){var Ye=ge.getVAO(Be);return Ye?J.link(Ye):"null"})}else if(iu in B){k=!0;var le=B[iu];return dr(le,function(J,Ye){var We=J.invoke(Ye,le);return Ye.def(J.shared.vao+".getVAO("+We+")")})}return null}var j=P(),S=!1;function R(){if(po in N){var Be=N[po];if(z.elements=Be,Pf(Be)){var le=z.elements=X.create(Be,!0);Be=X.getElements(le),S=!0}else Be&&(Be=X.getElements(Be),S=!0,E.command(Be,"invalid elements",p.commandStr));var J=Cn(function(We,ut){if(Be){var Kt=We.link(Be);return We.ELEMENTS=Kt,Kt}return We.ELEMENTS=null,null});return J.value=Be,J}else if(po in B){S=!0;var Ye=B[po];return dr(Ye,function(We,ut){var Kt=We.shared,Hn=Kt.isBufferArgs,Eo=Kt.elements,Fi=We.invoke(ut,Ye),pi=ut.def("null"),Ea=ut.def(Hn,"(",Fi,")"),_o=We.cond(Ea).then(pi,"=",Eo,".createStream(",Fi,");").else(pi,"=",Eo,".getElements(",Fi,");");return E.optional(function(){We.assert(_o.else,"!"+Fi+"||"+pi,"invalid elements")}),ut.entry(_o),ut.exit(We.cond(Ea).then(Eo,".destroyStream(",pi,");")),We.ELEMENTS=pi,pi})}else if(k)return new Mn(j.thisDep,j.contextDep,j.propDep,function(We,ut){return ut.def(We.shared.vao+".currentVAO?"+We.shared.elements+".getElements("+We.shared.vao+".currentVAO.elements):null")});return null}var C=R();function H(){if(vo in N){var Be=N[vo];return z.primitive=Be,E.commandParameter(Be,ci,"invalid primitve",p.commandStr),Cn(function(J,Ye){return ci[Be]})}else if(vo in B){var le=B[vo];return dr(le,function(J,Ye){var We=J.constants.primTypes,ut=J.invoke(Ye,le);return E.optional(function(){J.assert(Ye,ut+" in "+We,"invalid primitive, must be one of "+Object.keys(ci))}),Ye.def(We,"[",ut,"]")})}else{if(S)return xa(C)?C.value?Cn(function(J,Ye){return Ye.def(J.ELEMENTS,".primType")}):Cn(function(){return qm}):new Mn(C.thisDep,C.contextDep,C.propDep,function(J,Ye){var We=J.ELEMENTS;return Ye.def(We,"?",We,".primType:",qm)});if(k)return new Mn(j.thisDep,j.contextDep,j.propDep,function(J,Ye){return Ye.def(J.shared.vao+".currentVAO?"+J.shared.vao+".currentVAO.primitive:"+qm)})}return null}function U(Be,le){if(Be in N){var J=N[Be]|0;return le?z.offset=J:z.instances=J,E.command(!le||J>=0,"invalid "+Be,p.commandStr),Cn(function(We,ut){return le&&(We.OFFSET=J),J})}else if(Be in B){var Ye=B[Be];return dr(Ye,function(We,ut){var Kt=We.invoke(ut,Ye);return le&&(We.OFFSET=Kt,E.optional(function(){We.assert(ut,Kt+">=0","invalid "+Be)})),Kt})}else if(le){if(S)return Cn(function(We,ut){return We.OFFSET=0,0});if(k)return new Mn(j.thisDep,j.contextDep,j.propDep,function(We,ut){return ut.def(We.shared.vao+".currentVAO?"+We.shared.vao+".currentVAO.offset:0")})}else if(k)return new Mn(j.thisDep,j.contextDep,j.propDep,function(We,ut){return ut.def(We.shared.vao+".currentVAO?"+We.shared.vao+".currentVAO.instances:-1")});return null}var te=U(_f,!0);function ae(){if(go in N){var Be=N[go]|0;return z.count=Be,E.command(typeof Be=="number"&&Be>=0,"invalid vertex count",p.commandStr),Cn(function(){return Be})}else if(go in B){var le=B[go];return dr(le,function(ut,Kt){var Hn=ut.invoke(Kt,le);return E.optional(function(){ut.assert(Kt,"typeof "+Hn+'==="number"&&'+Hn+">=0&&"+Hn+"===("+Hn+"|0)","invalid vertex count")}),Hn})}else if(S)if(xa(C)){if(C)return te?new Mn(te.thisDep,te.contextDep,te.propDep,function(ut,Kt){var Hn=Kt.def(ut.ELEMENTS,".vertCount-",ut.OFFSET);return E.optional(function(){ut.assert(Kt,Hn+">=0","invalid vertex offset/element buffer too small")}),Hn}):Cn(function(ut,Kt){return Kt.def(ut.ELEMENTS,".vertCount")});var J=Cn(function(){return-1});return E.optional(function(){J.MISSING=!0}),J}else{var Ye=new Mn(C.thisDep||te.thisDep,C.contextDep||te.contextDep,C.propDep||te.propDep,function(ut,Kt){var Hn=ut.ELEMENTS;return ut.OFFSET?Kt.def(Hn,"?",Hn,".vertCount-",ut.OFFSET,":-1"):Kt.def(Hn,"?",Hn,".vertCount:-1")});return E.optional(function(){Ye.DYNAMIC=!0}),Ye}else if(k){var We=new Mn(j.thisDep,j.contextDep,j.propDep,function(ut,Kt){return Kt.def(ut.shared.vao,".currentVAO?",ut.shared.vao,".currentVAO.count:-1")});return We}return null}var Se=H(),ct=ae(),tt=U(Sf,!1);return{elements:C,primitive:Se,count:ct,instances:tt,offset:te,vao:j,vaoActive:k,elementsActive:S,static:z}}function cn(_,p){var N=_.static,B=_.dynamic,z={};return rt.forEach(function(k){var P=He(k);function j(S,R){if(k in N){var C=S(N[k]);z[P]=Cn(function(){return C})}else if(k in B){var H=B[k];z[P]=dr(H,function(U,te){return R(U,te,U.invoke(te,H))})}}switch(k){case bg:case xg:case yg:case Og:case _g:case Pg:case Ag:case Lg:case Rg:case Tg:return j(function(S){return E.commandType(S,"boolean",k,p.commandStr),S},function(S,R,C){return E.optional(function(){S.assert(R,"typeof "+C+'==="boolean"',"invalid flag "+k,S.commandStr)}),C});case Sg:return j(function(S){return E.commandParameter(S,Rl,"invalid "+k,p.commandStr),Rl[S]},function(S,R,C){var H=S.constants.compareFuncs;return E.optional(function(){S.assert(R,C+" in "+H,"invalid "+k+", must be one of "+Object.keys(Rl))}),R.def(H,"[",C,"]")});case wg:return j(function(S){return E.command(an(S)&&S.length===2&&typeof S[0]=="number"&&typeof S[1]=="number"&&S[0]<=S[1],"depth range is 2d array",p.commandStr),S},function(S,R,C){E.optional(function(){S.assert(R,S.shared.isArrayLike+"("+C+")&&"+C+".length===2&&typeof "+C+'[0]==="number"&&typeof '+C+'[1]==="number"&&'+C+"[0]<="+C+"[1]","depth range must be a 2d array")});var H=R.def("+",C,"[0]"),U=R.def("+",C,"[1]");return[H,U]});case jm:return j(function(S){E.commandType(S,"object","blend.func",p.commandStr);var R="srcRGB"in S?S.srcRGB:S.src,C="srcAlpha"in S?S.srcAlpha:S.src,H="dstRGB"in S?S.dstRGB:S.dst,U="dstAlpha"in S?S.dstAlpha:S.dst;return E.commandParameter(R,hi,P+".srcRGB",p.commandStr),E.commandParameter(C,hi,P+".srcAlpha",p.commandStr),E.commandParameter(H,hi,P+".dstRGB",p.commandStr),E.commandParameter(U,hi,P+".dstAlpha",p.commandStr),E.command(zg.indexOf(R+", "+H)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+R+", "+H+")",p.commandStr),[hi[R],hi[H],hi[C],hi[U]]},function(S,R,C){var H=S.constants.blendFuncs;E.optional(function(){S.assert(R,C+"&&typeof "+C+'==="object"',"invalid blend func, must be an object")});function U(le,J){var Ye=R.def('"',le,J,'" in ',C,"?",C,".",le,J,":",C,".",le);return E.optional(function(){S.assert(R,Ye+" in "+H,"invalid "+k+"."+le+J+", must be one of "+Object.keys(hi))}),Ye}var te=U("src","RGB"),ae=U("dst","RGB");E.optional(function(){var le=S.constants.invalidBlendCombinations;S.assert(R,le+".indexOf("+te+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Se=R.def(H,"[",te,"]"),ct=R.def(H,"[",U("src","Alpha"),"]"),tt=R.def(H,"[",ae,"]"),Be=R.def(H,"[",U("dst","Alpha"),"]");return[Se,tt,ct,Be]});case Mm:return j(function(S){if(typeof S=="string")return E.commandParameter(S,K,"invalid "+k,p.commandStr),[K[S],K[S]];if(typeof S=="object")return E.commandParameter(S.rgb,K,k+".rgb",p.commandStr),E.commandParameter(S.alpha,K,k+".alpha",p.commandStr),[K[S.rgb],K[S.alpha]];E.commandRaise("invalid blend.equation",p.commandStr)},function(S,R,C){var H=S.constants.blendEquations,U=R.def(),te=R.def(),ae=S.cond("typeof ",C,'==="string"');return E.optional(function(){function Se(ct,tt,Be){S.assert(ct,Be+" in "+H,"invalid "+tt+", must be one of "+Object.keys(K))}Se(ae.then,k,C),S.assert(ae.else,C+"&&typeof "+C+'==="object"',"invalid "+k),Se(ae.else,k+".rgb",C+".rgb"),Se(ae.else,k+".alpha",C+".alpha")}),ae.then(U,"=",te,"=",H,"[",C,"];"),ae.else(U,"=",H,"[",C,".rgb];",te,"=",H,"[",C,".alpha];"),R(ae),[U,te]});case Eg:return j(function(S){return E.command(an(S)&&S.length===4,"blend.color must be a 4d array",p.commandStr),vn(4,function(R){return+S[R]})},function(S,R,C){return E.optional(function(){S.assert(R,S.shared.isArrayLike+"("+C+")&&"+C+".length===4","blend.color must be a 4d array")}),vn(4,function(H){return R.def("+",C,"[",H,"]")})});case Ng:return j(function(S){return E.commandType(S,"number",P,p.commandStr),S|0},function(S,R,C){return E.optional(function(){S.assert(R,"typeof "+C+'==="number"',"invalid stencil.mask")}),R.def(C,"|0")});case Um:return j(function(S){E.commandType(S,"object",P,p.commandStr);var R=S.cmp||"keep",C=S.ref||0,H="mask"in S?S.mask:-1;return E.commandParameter(R,Rl,k+".cmp",p.commandStr),E.commandType(C,"number",k+".ref",p.commandStr),E.commandType(H,"number",k+".mask",p.commandStr),[Rl[R],C,H]},function(S,R,C){var H=S.constants.compareFuncs;E.optional(function(){function Se(){S.assert(R,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Se(C+"&&typeof ",C,'==="object"'),Se('!("cmp" in ',C,")||(",C,".cmp in ",H,")")});var U=R.def('"cmp" in ',C,"?",H,"[",C,".cmp]",":",ga),te=R.def(C,".ref|0"),ae=R.def('"mask" in ',C,"?",C,".mask|0:-1");return[U,te,ae]});case Vm:case eu:return j(function(S){E.commandType(S,"object",P,p.commandStr);var R=S.fail||"keep",C=S.zfail||"keep",H=S.zpass||"keep";return E.commandParameter(R,ya,k+".fail",p.commandStr),E.commandParameter(C,ya,k+".zfail",p.commandStr),E.commandParameter(H,ya,k+".zpass",p.commandStr),[k===eu?yo:cu,ya[R],ya[C],ya[H]]},function(S,R,C){var H=S.constants.stencilOps;E.optional(function(){S.assert(R,C+"&&typeof "+C+'==="object"',"invalid "+k)});function U(te){return E.optional(function(){S.assert(R,'!("'+te+'" in '+C+")||("+C+"."+te+" in "+H+")","invalid "+k+"."+te+", must be one of "+Object.keys(ya))}),R.def('"',te,'" in ',C,"?",H,"[",C,".",te,"]:",ga)}return[k===eu?yo:cu,U("fail"),U("zfail"),U("zpass")]});case Gm:return j(function(S){E.commandType(S,"object",P,p.commandStr);var R=S.factor|0,C=S.units|0;return E.commandType(R,"number",P+".factor",p.commandStr),E.commandType(C,"number",P+".units",p.commandStr),[R,C]},function(S,R,C){E.optional(function(){S.assert(R,C+"&&typeof "+C+'==="object"',"invalid "+k)});var H=R.def(C,".factor|0"),U=R.def(C,".units|0");return[H,U]});case Cg:return j(function(S){var R=0;return S==="front"?R=cu:S==="back"&&(R=yo),E.command(!!R,P,p.commandStr),R},function(S,R,C){return E.optional(function(){S.assert(R,C+'==="front"||'+C+'==="back"',"invalid cull.face")}),R.def(C,'==="front"?',cu,":",yo)});case Bm:return j(function(S){return E.command(typeof S=="number"&&S>=Y.lineWidthDims[0]&&S<=Y.lineWidthDims[1],"invalid line width, must be a positive number between "+Y.lineWidthDims[0]+" and "+Y.lineWidthDims[1],p.commandStr),S},function(S,R,C){return E.optional(function(){S.assert(R,"typeof "+C+'==="number"&&'+C+">="+Y.lineWidthDims[0]+"&&"+C+"<="+Y.lineWidthDims[1],"invalid line width")}),C});case $m:return j(function(S){return E.commandParameter(S,Jm,P,p.commandStr),Jm[S]},function(S,R,C){return E.optional(function(){S.assert(R,C+'==="cw"||'+C+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),R.def(C+'==="cw"?'+jg+":"+Zm)});case Fm:return j(function(S){return E.command(an(S)&&S.length===4,"color.mask must be length 4 array",p.commandStr),S.map(function(R){return!!R})},function(S,R,C){return E.optional(function(){S.assert(R,S.shared.isArrayLike+"("+C+")&&"+C+".length===4","invalid color.mask")}),vn(4,function(H){return"!!"+C+"["+H+"]"})});case zm:return j(function(S){E.command(typeof S=="object"&&S,P,p.commandStr);var R="value"in S?S.value:1,C=!!S.invert;return E.command(typeof R=="number"&&R>=0&&R<=1,"sample.coverage.value must be a number between 0 and 1",p.commandStr),[R,C]},function(S,R,C){E.optional(function(){S.assert(R,C+"&&typeof "+C+'==="object"',"invalid sample.coverage")});var H=R.def('"value" in ',C,"?+",C,".value:1"),U=R.def("!!",C,".invert");return[H,U]})}}),z}function kt(_,p){var N=_.static,B=_.dynamic,z={};return Object.keys(N).forEach(function(k){var P=N[k],j;if(typeof P=="number"||typeof P=="boolean")j=Cn(function(){return P});else if(typeof P=="function"){var S=P._reglType;S==="texture2d"||S==="textureCube"?j=Cn(function(R){return R.link(P)}):S==="framebuffer"||S==="framebufferCube"?(E.command(P.color.length>0,'missing color attachment for framebuffer sent to uniform "'+k+'"',p.commandStr),j=Cn(function(R){return R.link(P.color[0])})):E.commandRaise('invalid data for uniform "'+k+'"',p.commandStr)}else an(P)?j=Cn(function(R){var C=R.global.def("[",vn(P.length,function(H){return E.command(typeof P[H]=="number"||typeof P[H]=="boolean","invalid uniform "+k,R.commandStr),P[H]}),"]");return C}):E.commandRaise('invalid or missing data for uniform "'+k+'"',p.commandStr);j.value=P,z[k]=j}),Object.keys(B).forEach(function(k){var P=B[k];z[k]=dr(P,function(j,S){return j.invoke(S,P)})}),z}function Nn(_,p){var N=_.static,B=_.dynamic,z={};return Object.keys(N).forEach(function(k){var P=N[k],j=x.id(k),S=new G;if(Pf(P))S.state=bl,S.buffer=re.getBuffer(re.create(P,Ll,!1,!0)),S.type=0;else{var R=re.getBuffer(P);if(R)S.state=bl,S.buffer=R,S.type=0;else if(E.command(typeof P=="object"&&P,"invalid data for attribute "+k,p.commandStr),"constant"in P){var C=P.constant;S.buffer="null",S.state=Nm,typeof C=="number"?S.x=C:(E.command(an(C)&&C.length>0&&C.length<=4,"invalid constant for attribute "+k,p.commandStr),Tl.forEach(function(tt,Be){Be<C.length&&(S[tt]=C[Be])}))}else{Pf(P.buffer)?R=re.getBuffer(re.create(P.buffer,Ll,!1,!0)):R=re.getBuffer(P.buffer),E.command(!!R,'missing buffer for attribute "'+k+'"',p.commandStr);var H=P.offset|0;E.command(H>=0,'invalid offset for attribute "'+k+'"',p.commandStr);var U=P.stride|0;E.command(U>=0&&U<256,'invalid stride for attribute "'+k+'", must be integer betweeen [0, 255]',p.commandStr);var te=P.size|0;E.command(!("size"in P)||te>0&&te<=4,'invalid size for attribute "'+k+'", must be 1,2,3,4',p.commandStr);var ae=!!P.normalized,Se=0;"type"in P&&(E.commandParameter(P.type,ua,"invalid type for attribute "+k,p.commandStr),Se=ua[P.type]);var ct=P.divisor|0;E.optional(function(){"divisor"in P&&(E.command(ct===0||me,'cannot specify divisor for attribute "'+k+'", instancing not supported',p.commandStr),E.command(ct>=0,'invalid divisor for attribute "'+k+'"',p.commandStr));var tt=p.commandStr,Be=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(P).forEach(function(le){E.command(Be.indexOf(le)>=0,'unknown parameter "'+le+'" for attribute pointer "'+k+'" (valid parameters are '+Be+")",tt)})}),S.buffer=R,S.state=bl,S.size=te,S.normalized=ae,S.type=Se||R.dtype,S.offset=H,S.stride=U,S.divisor=ct}}z[k]=Cn(function(tt,Be){var le=tt.attribCache;if(j in le)return le[j];var J={isStream:!1};return Object.keys(S).forEach(function(Ye){J[Ye]=S[Ye]}),S.buffer&&(J.buffer=tt.link(S.buffer),J.type=J.type||J.buffer+".dtype"),le[j]=J,J})}),Object.keys(B).forEach(function(k){var P=B[k];function j(S,R){var C=S.invoke(R,P),H=S.shared,U=S.constants,te=H.isBufferArgs,ae=H.buffer;E.optional(function(){S.assert(R,C+"&&(typeof "+C+'==="object"||typeof '+C+'==="function")&&('+te+"("+C+")||"+ae+".getBuffer("+C+")||"+ae+".getBuffer("+C+".buffer)||"+te+"("+C+'.buffer)||("constant" in '+C+"&&(typeof "+C+'.constant==="number"||'+H.isArrayLike+"("+C+".constant))))",'invalid dynamic attribute "'+k+'"')});var Se={isStream:R.def(!1)},ct=new G;ct.state=bl,Object.keys(ct).forEach(function(J){Se[J]=R.def(""+ct[J])});var tt=Se.buffer,Be=Se.type;R("if(",te,"(",C,")){",Se.isStream,"=true;",tt,"=",ae,".createStream(",Ll,",",C,");",Be,"=",tt,".dtype;","}else{",tt,"=",ae,".getBuffer(",C,");","if(",tt,"){",Be,"=",tt,".dtype;",'}else if("constant" in ',C,"){",Se.state,"=",Nm,";","if(typeof "+C+'.constant === "number"){',Se[Tl[0]],"=",C,".constant;",Tl.slice(1).map(function(J){return Se[J]}).join("="),"=0;","}else{",Tl.map(function(J,Ye){return Se[J]+"="+C+".constant.length>"+Ye+"?"+C+".constant["+Ye+"]:0;"}).join(""),"}}else{","if(",te,"(",C,".buffer)){",tt,"=",ae,".createStream(",Ll,",",C,".buffer);","}else{",tt,"=",ae,".getBuffer(",C,".buffer);","}",Be,'="type" in ',C,"?",U.glTypes,"[",C,".type]:",tt,".dtype;",Se.normalized,"=!!",C,".normalized;");function le(J){R(Se[J],"=",C,".",J,"|0;")}return le("size"),le("offset"),le("stride"),le("divisor"),R("}}"),R.exit("if(",Se.isStream,"){",ae,".destroyStream(",tt,");","}"),Se}z[k]=dr(P,j)}),z}function on(_){var p=_.static,N=_.dynamic,B={};return Object.keys(p).forEach(function(z){var k=p[z];B[z]=Cn(function(P,j){return typeof k=="number"||typeof k=="boolean"?""+k:P.link(k)})}),Object.keys(N).forEach(function(z){var k=N[z];B[z]=dr(k,function(P,j){return P.invoke(j,k)})}),B}function An(_,p,N,B,z){var k=_.static,P=_.dynamic;E.optional(function(){var le=[mo,nu,ru,po,vo,_f,go,Sf,tu,iu].concat(rt);function J(Ye){Object.keys(Ye).forEach(function(We){E.command(le.indexOf(We)>=0,'unknown parameter "'+We+'"',z.commandStr)})}J(k),J(P)});var j=vt(_,p),S=Me(_),R=st(_,S,z),C=sn(_,z),H=cn(_,z),U=Ot(_,z,j);function te(le){var J=R[le];J&&(H[le]=J)}te(ji),te(He(Ef));var ae=Object.keys(H).length>0,Se={framebuffer:S,draw:C,shader:U,state:H,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Se.profile=Pe(_),Se.uniforms=kt(N,z),Se.drawVAO=Se.scopeVAO=C.vao,!Se.drawVAO&&U.program&&!j&&O.angle_instanced_arrays&&C.static.elements){var ct=!0,tt=U.program.attributes.map(function(le){var J=p.static[le];return ct=ct&&!!J,J});if(ct&&tt.length>0){var Be=ge.getVAO(ge.createVAO({attributes:tt,elements:C.static.elements}));Se.drawVAO=new Mn(null,null,null,function(le,J){return le.link(Be)}),Se.useVAO=!0}}return j?Se.useVAO=!0:Se.attributes=Nn(p,z),Se.context=on(B),Se}function Pn(_,p,N){var B=_.shared,z=B.context,k=_.scope();Object.keys(N).forEach(function(P){p.save(z,"."+P);var j=N[P],S=j.append(_,p);Array.isArray(S)?k(z,".",P,"=[",S.join(),"];"):k(z,".",P,"=",S,";")}),p(k)}function kn(_,p,N,B){var z=_.shared,k=z.gl,P=z.framebuffer,j;je&&(j=p.def(z.extensions,".webgl_draw_buffers"));var S=_.constants,R=S.drawBuffer,C=S.backBuffer,H;N?H=N.append(_,p):H=p.def(P,".next"),B||p("if(",H,"!==",P,".cur){"),p("if(",H,"){",k,".bindFramebuffer(",Gg,",",H,".framebuffer);"),je&&p(j,".drawBuffersWEBGL(",R,"[",H,".colorAttachments.length]);"),p("}else{",k,".bindFramebuffer(",Gg,",null);"),je&&p(j,".drawBuffersWEBGL(",C,");"),p("}",P,".cur=",H,";"),B||p("}")}function Bn(_,p,N){var B=_.shared,z=B.gl,k=_.current,P=_.next,j=B.current,S=B.next,R=_.cond(j,".dirty");rt.forEach(function(C){var H=He(C);if(!(H in N.state)){var U,te;if(H in P){U=P[H],te=k[H];var ae=vn(De[H].length,function(ct){return R.def(U,"[",ct,"]")});R(_.cond(ae.map(function(ct,tt){return ct+"!=="+te+"["+tt+"]"}).join("||")).then(z,".",ne[H],"(",ae,");",ae.map(function(ct,tt){return te+"["+tt+"]="+ct}).join(";"),";"))}else{U=R.def(S,".",H);var Se=_.cond(U,"!==",j,".",H);R(Se),H in ie?Se(_.cond(U).then(z,".enable(",ie[H],");").else(z,".disable(",ie[H],");"),j,".",H,"=",U,";"):Se(z,".",ne[H],"(",U,");",j,".",H,"=",U,";")}}}),Object.keys(N.state).length===0&&R(j,".dirty=false;"),p(R)}function Un(_,p,N,B){var z=_.shared,k=_.current,P=z.current,j=z.gl;Vg(Object.keys(N)).forEach(function(S){var R=N[S];if(!(B&&!B(R))){var C=R.append(_,p);if(ie[S]){var H=ie[S];xa(R)?C?p(j,".enable(",H,");"):p(j,".disable(",H,");"):p(_.cond(C).then(j,".enable(",H,");").else(j,".disable(",H,");")),p(P,".",S,"=",C,";")}else if(an(C)){var U=k[S];p(j,".",ne[S],"(",C,");",C.map(function(te,ae){return U+"["+ae+"]="+te}).join(";"),";")}else p(j,".",ne[S],"(",C,");",P,".",S,"=",C,";")}})}function gn(_,p){me&&(_.instancing=p.def(_.shared.extensions,".angle_instanced_arrays"))}function St(_,p,N,B,z){var k=_.shared,P=_.stats,j=k.current,S=k.timer,R=N.profile;function C(){return typeof performance>"u"?"Date.now()":"performance.now()"}var H,U;function te(le){H=p.def(),le(H,"=",C(),";"),typeof z=="string"?le(P,".count+=",z,";"):le(P,".count++;"),de&&(B?(U=p.def(),le(U,"=",S,".getNumPendingQueries();")):le(S,".beginQuery(",P,");"))}function ae(le){le(P,".cpuTime+=",C(),"-",H,";"),de&&(B?le(S,".pushScopeStats(",U,",",S,".getNumPendingQueries(),",P,");"):le(S,".endQuery();"))}function Se(le){var J=p.def(j,".profile");p(j,".profile=",le,";"),p.exit(j,".profile=",J,";")}var ct;if(R){if(xa(R)){R.enable?(te(p),ae(p.exit),Se("true")):Se("false");return}ct=R.append(_,p),Se(ct)}else ct=p.def(j,".profile");var tt=_.block();te(tt),p("if(",ct,"){",tt,"}");var Be=_.block();ae(Be),p.exit("if(",ct,"){",Be,"}")}function Vn(_,p,N,B,z){var k=_.shared;function P(S){switch(S){case wf:case Cf:case Rf:return 2;case Tf:case Af:case Of:return 3;case bf:case Lf:case Nf:return 4;default:return 1}}function j(S,R,C){var H=k.gl,U=p.def(S,".location"),te=p.def(k.attributes,"[",U,"]"),ae=C.state,Se=C.buffer,ct=[C.x,C.y,C.z,C.w],tt=["buffer","normalized","offset","stride"];function Be(){p("if(!",te,".buffer){",H,".enableVertexAttribArray(",U,");}");var J=C.type,Ye;if(C.size?Ye=p.def(C.size,"||",R):Ye=R,p("if(",te,".type!==",J,"||",te,".size!==",Ye,"||",tt.map(function(ut){return te+"."+ut+"!=="+C[ut]}).join("||"),"){",H,".bindBuffer(",Ll,",",Se,".buffer);",H,".vertexAttribPointer(",[U,Ye,J,C.normalized,C.stride,C.offset],");",te,".type=",J,";",te,".size=",Ye,";",tt.map(function(ut){return te+"."+ut+"="+C[ut]+";"}).join(""),"}"),me){var We=C.divisor;p("if(",te,".divisor!==",We,"){",_.instancing,".vertexAttribDivisorANGLE(",[U,We],");",te,".divisor=",We,";}")}}function le(){p("if(",te,".buffer){",H,".disableVertexAttribArray(",U,");",te,".buffer=null;","}if(",Tl.map(function(J,Ye){return te+"."+J+"!=="+ct[Ye]}).join("||"),"){",H,".vertexAttrib4f(",U,",",ct,");",Tl.map(function(J,Ye){return te+"."+J+"="+ct[Ye]+";"}).join(""),"}")}ae===bl?Be():ae===Nm?le():(p("if(",ae,"===",bl,"){"),Be(),p("}else{"),le(),p("}"))}B.forEach(function(S){var R=S.name,C=N.attributes[R],H;if(C){if(!z(C))return;H=C.append(_,p)}else{if(!z(Hg))return;var U=_.scopeAttrib(R);E.optional(function(){_.assert(p,U+".state","missing attribute "+R)}),H={},Object.keys(new G).forEach(function(te){H[te]=p.def(U,".",te)})}j(_.link(S),P(S.info.type),H)})}function Xt(_,p,N,B,z,k){for(var P=_.shared,j=P.gl,S={},R,C=0;C<B.length;++C){var H=B[C],U=H.name,te=H.info.type,ae=H.info.size,Se=N.uniforms[U];if(ae>1){if(!Se)continue;var ct=U.replace("[0]","");if(S[ct])continue;S[ct]=1}var tt=_.link(H),Be=tt+".location",le;if(Se){if(!z(Se))continue;if(xa(Se)){var J=Se.value;if(E.command(J!==null&&typeof J<"u",'missing uniform "'+U+'"',_.commandStr),te===su||te===uu){E.command(typeof J=="function"&&(te===su&&(J._reglType==="texture2d"||J._reglType==="framebuffer")||te===uu&&(J._reglType==="textureCube"||J._reglType==="framebufferCube")),"invalid texture for uniform "+U,_.commandStr);var Ye=_.link(J._texture||J.color[0]._texture);p(j,".uniform1i(",Be,",",Ye+".bind());"),p.exit(Ye,".unbind();")}else if(te===au||te===ou||te===lu){E.optional(function(){E.command(an(J),"invalid matrix for uniform "+U,_.commandStr),E.command(te===au&&J.length===4||te===ou&&J.length===9||te===lu&&J.length===16,"invalid length for matrix uniform "+U,_.commandStr)});var We=_.global.def("new Float32Array(["+Array.prototype.slice.call(J)+"])"),ut=2;te===ou?ut=3:te===lu&&(ut=4),p(j,".uniformMatrix",ut,"fv(",Be,",false,",We,");")}else{switch(te){case Ym:ae===1?E.commandType(J,"number","uniform "+U,_.commandStr):E.command(an(J)&&J.length===ae,"uniform "+U,_.commandStr),R="1f";break;case wf:E.command(an(J)&&J.length&&J.length%2===0&&J.length<=ae*2,"uniform "+U,_.commandStr),R="2f";break;case Tf:E.command(an(J)&&J.length&&J.length%3===0&&J.length<=ae*3,"uniform "+U,_.commandStr),R="3f";break;case bf:E.command(an(J)&&J.length&&J.length%4===0&&J.length<=ae*4,"uniform "+U,_.commandStr),R="4f";break;case Km:ae===1?E.commandType(J,"boolean","uniform "+U,_.commandStr):E.command(an(J)&&J.length===ae,"uniform "+U,_.commandStr),R="1i";break;case Qm:ae===1?E.commandType(J,"number","uniform "+U,_.commandStr):E.command(an(J)&&J.length===ae,"uniform "+U,_.commandStr),R="1i";break;case Rf:E.command(an(J)&&J.length&&J.length%2===0&&J.length<=ae*2,"uniform "+U,_.commandStr),R="2i";break;case Cf:E.command(an(J)&&J.length&&J.length%2===0&&J.length<=ae*2,"uniform "+U,_.commandStr),R="2i";break;case Of:E.command(an(J)&&J.length&&J.length%3===0&&J.length<=ae*3,"uniform "+U,_.commandStr),R="3i";break;case Af:E.command(an(J)&&J.length&&J.length%3===0&&J.length<=ae*3,"uniform "+U,_.commandStr),R="3i";break;case Nf:E.command(an(J)&&J.length&&J.length%4===0&&J.length<=ae*4,"uniform "+U,_.commandStr),R="4i";break;case Lf:E.command(an(J)&&J.length&&J.length%4===0&&J.length<=ae*4,"uniform "+U,_.commandStr),R="4i";break}ae>1?(R+="v",J=_.global.def("["+Array.prototype.slice.call(J)+"]")):J=an(J)?Array.prototype.slice.call(J):J,p(j,".uniform",R,"(",Be,",",J,");")}continue}else le=Se.append(_,p)}else{if(!z(Hg))continue;le=p.def(P.uniforms,"[",x.id(U),"]")}te===su?(E(!Array.isArray(le),"must specify a scalar prop for textures"),p("if(",le,"&&",le,'._reglType==="framebuffer"){',le,"=",le,".color[0];","}")):te===uu&&(E(!Array.isArray(le),"must specify a scalar prop for cube maps"),p("if(",le,"&&",le,'._reglType==="framebufferCube"){',le,"=",le,".color[0];","}")),E.optional(function(){function Ar(hr,kf){_.assert(p,hr,'bad data or missing for uniform "'+U+'".  '+kf)}function So(hr,kf){kf===1&&E(!Array.isArray(le),"must not specify an array type for uniform"),Ar("Array.isArray("+le+") && typeof "+le+'[0]===" '+hr+'" || typeof '+le+'==="'+hr+'"',"invalid type, expected "+hr)}function jr(hr,kf,If){Array.isArray(le)?E(le.length&&le.length%hr===0&&le.length<=hr*If,"must have length of "+(If===1?"":"n * ")+hr):Ar(P.isArrayLike+"("+le+")&&"+le+".length && "+le+".length % "+hr+" === 0 && "+le+".length<="+hr*If,"invalid vector, should have length of "+(If===1?"":"n * ")+hr,_.commandStr)}function Zg(hr){E(!Array.isArray(le),"must not specify a value type"),Ar("typeof "+le+'==="function"&&'+le+'._reglType==="texture'+(hr===Mg?"2d":"Cube")+'"',"invalid texture type",_.commandStr)}switch(te){case Qm:So("number",ae);break;case Cf:jr(2,"number",ae);break;case Af:jr(3,"number",ae);break;case Lf:jr(4,"number",ae);break;case Ym:So("number",ae);break;case wf:jr(2,"number",ae);break;case Tf:jr(3,"number",ae);break;case bf:jr(4,"number",ae);break;case Km:So("boolean",ae);break;case Rf:jr(2,"boolean",ae);break;case Of:jr(3,"boolean",ae);break;case Nf:jr(4,"boolean",ae);break;case au:jr(4,"number",ae);break;case ou:jr(9,"number",ae);break;case lu:jr(16,"number",ae);break;case su:Zg(Mg);break;case uu:Zg(CS);break}});var Kt=1;switch(te){case su:case uu:var Hn=p.def(le,"._texture");p(j,".uniform1i(",Be,",",Hn,".bind());"),p.exit(Hn,".unbind();");continue;case Qm:case Km:R="1i";break;case Cf:case Rf:R="2i",Kt=2;break;case Af:case Of:R="3i",Kt=3;break;case Lf:case Nf:R="4i",Kt=4;break;case Ym:R="1f";break;case wf:R="2f",Kt=2;break;case Tf:R="3f",Kt=3;break;case bf:R="4f",Kt=4;break;case au:R="Matrix2fv";break;case ou:R="Matrix3fv";break;case lu:R="Matrix4fv";break}if(R.indexOf("Matrix")===-1&&ae>1&&(R+="v",Kt=1),R.charAt(0)==="M"){p(j,".uniform",R,"(",Be,",");var Eo=Math.pow(te-au+2,2),Fi=_.global.def("new Float32Array(",Eo,")");Array.isArray(le)?p("false,(",vn(Eo,function(Ar){return Fi+"["+Ar+"]="+le[Ar]}),",",Fi,")"):p("false,(Array.isArray(",le,")||",le," instanceof Float32Array)?",le,":(",vn(Eo,function(Ar){return Fi+"["+Ar+"]="+le+"["+Ar+"]"}),",",Fi,")"),p(");")}else if(Kt>1){for(var pi=[],Ea=[],_o=0;_o<Kt;++_o)Array.isArray(le)?Ea.push(le[_o]):Ea.push(p.def(le+"["+_o+"]")),k&&pi.push(p.def());k&&p("if(!",_.batchId,"||",pi.map(function(Ar,So){return Ar+"!=="+Ea[So]}).join("||"),"){",pi.map(function(Ar,So){return Ar+"="+Ea[So]+";"}).join("")),p(j,".uniform",R,"(",Be,",",Ea.join(","),");"),k&&p("}")}else{if(E(!Array.isArray(le),"uniform value must not be an array"),k){var qg=p.def();p("if(!",_.batchId,"||",qg,"!==",le,"){",qg,"=",le,";")}p(j,".uniform",R,"(",Be,",",le,");"),k&&p("}")}}}function lt(_,p,N,B){var z=_.shared,k=z.gl,P=z.draw,j=B.draw;function S(){var Ye=j.elements,We,ut=p;return Ye?((Ye.contextDep&&B.contextDynamic||Ye.propDep)&&(ut=N),We=Ye.append(_,ut),j.elementsActive&&ut("if("+We+")"+k+".bindBuffer("+Xm+","+We+".buffer.buffer);")):(We=ut.def(),ut(We,"=",P,".",po,";","if(",We,"){",k,".bindBuffer(",Xm,",",We,".buffer.buffer);}","else if(",z.vao,".currentVAO){",We,"=",_.shared.elements+".getElements("+z.vao,".currentVAO.elements);",ue?"":"if("+We+")"+k+".bindBuffer("+Xm+","+We+".buffer.buffer);","}")),We}function R(){var Ye=j.count,We,ut=p;return Ye?((Ye.contextDep&&B.contextDynamic||Ye.propDep)&&(ut=N),We=Ye.append(_,ut),E.optional(function(){Ye.MISSING&&_.assert(p,"false","missing vertex count"),Ye.DYNAMIC&&_.assert(ut,We+">=0","missing vertex count")})):(We=ut.def(P,".",go),E.optional(function(){_.assert(ut,We+">=0","missing vertex count")})),We}var C=S();function H(Ye){var We=j[Ye];return We?We.contextDep&&B.contextDynamic||We.propDep?We.append(_,N):We.append(_,p):p.def(P,".",Ye)}var U=H(vo),te=H(_f),ae=R();if(typeof ae=="number"){if(ae===0)return}else N("if(",ae,"){"),N.exit("}");var Se,ct;me&&(Se=H(Sf),ct=_.instancing);var tt=C+".type",Be=j.elements&&xa(j.elements)&&!j.vaoActive;function le(){function Ye(){N(ct,".drawElementsInstancedANGLE(",[U,ae,tt,te+"<<(("+tt+"-"+pg+")>>1)",Se],");")}function We(){N(ct,".drawArraysInstancedANGLE(",[U,te,ae,Se],");")}C&&C!=="null"?Be?Ye():(N("if(",C,"){"),Ye(),N("}else{"),We(),N("}")):We()}function J(){function Ye(){N(k+".drawElements("+[U,ae,tt,te+"<<(("+tt+"-"+pg+")>>1)"]+");")}function We(){N(k+".drawArrays("+[U,te,ae]+");")}C&&C!=="null"?Be?Ye():(N("if(",C,"){"),Ye(),N("}else{"),We(),N("}")):We()}me&&(typeof Se!="number"||Se>=0)?typeof Se=="string"?(N("if(",Se,">0){"),le(),N("}else if(",Se,"<0){"),J(),N("}")):le():J()}function Nt(_,p,N,B,z){var k=ht(),P=k.proc("body",z);return E.optional(function(){k.commandStr=p.commandStr,k.command=k.link(p.commandStr)}),me&&(k.instancing=P.def(k.shared.extensions,".angle_instanced_arrays")),_(k,P,N,B),k.compile().body}function Ft(_,p,N,B){gn(_,p),N.useVAO?N.drawVAO?p(_.shared.vao,".setVAO(",N.drawVAO.append(_,p),");"):p(_.shared.vao,".setVAO(",_.shared.vao,".targetVAO);"):(p(_.shared.vao,".setVAO(null);"),Vn(_,p,N,B.attributes,function(){return!0})),Xt(_,p,N,B.uniforms,function(){return!0},!1),lt(_,p,p,N)}function yn(_,p){var N=_.proc("draw",1);gn(_,N),Pn(_,N,p.context),kn(_,N,p.framebuffer),Bn(_,N,p),Un(_,N,p.state),St(_,N,p,!1,!0);var B=p.shader.progVar.append(_,N);if(N(_.shared.gl,".useProgram(",B,".program);"),p.shader.program)Ft(_,N,p,p.shader.program);else{N(_.shared.vao,".setVAO(null);");var z=_.global.def("{}"),k=N.def(B,".id"),P=N.def(z,"[",k,"]");N(_.cond(P).then(P,".call(this,a0);").else(P,"=",z,"[",k,"]=",_.link(function(j){return Nt(Ft,_,p,j,1)}),"(",B,");",P,".call(this,a0);"))}Object.keys(p.state).length>0&&N(_.shared.current,".dirty=true;"),_.shared.vao&&N(_.shared.vao,".setVAO(null);")}function mi(_,p,N,B){_.batchId="a1",gn(_,p);function z(){return!0}Vn(_,p,N,B.attributes,z),Xt(_,p,N,B.uniforms,z,!1),lt(_,p,p,N)}function xo(_,p,N,B){gn(_,p);var z=N.contextDep,k=p.def(),P="a0",j="a1",S=p.def();_.shared.props=S,_.batchId=k;var R=_.scope(),C=_.scope();p(R.entry,"for(",k,"=0;",k,"<",j,";++",k,"){",S,"=",P,"[",k,"];",C,"}",R.exit);function H(tt){return tt.contextDep&&z||tt.propDep}function U(tt){return!H(tt)}if(N.needsContext&&Pn(_,C,N.context),N.needsFramebuffer&&kn(_,C,N.framebuffer),Un(_,C,N.state,H),N.profile&&H(N.profile)&&St(_,C,N,!1,!0),B)N.useVAO?N.drawVAO?H(N.drawVAO)?C(_.shared.vao,".setVAO(",N.drawVAO.append(_,C),");"):R(_.shared.vao,".setVAO(",N.drawVAO.append(_,R),");"):R(_.shared.vao,".setVAO(",_.shared.vao,".targetVAO);"):(R(_.shared.vao,".setVAO(null);"),Vn(_,R,N,B.attributes,U),Vn(_,C,N,B.attributes,H)),Xt(_,R,N,B.uniforms,U,!1),Xt(_,C,N,B.uniforms,H,!0),lt(_,R,C,N);else{var te=_.global.def("{}"),ae=N.shader.progVar.append(_,C),Se=C.def(ae,".id"),ct=C.def(te,"[",Se,"]");C(_.shared.gl,".useProgram(",ae,".program);","if(!",ct,"){",ct,"=",te,"[",Se,"]=",_.link(function(tt){return Nt(mi,_,N,tt,2)}),"(",ae,");}",ct,".call(this,a0[",k,"],",k,");")}}function A(_,p){var N=_.proc("batch",2);_.batchId="0",gn(_,N);var B=!1,z=!0;Object.keys(p.context).forEach(function(te){B=B||p.context[te].propDep}),B||(Pn(_,N,p.context),z=!1);var k=p.framebuffer,P=!1;k?(k.propDep?B=P=!0:k.contextDep&&B&&(P=!0),P||kn(_,N,k)):kn(_,N,null),p.state.viewport&&p.state.viewport.propDep&&(B=!0);function j(te){return te.contextDep&&B||te.propDep}Bn(_,N,p),Un(_,N,p.state,function(te){return!j(te)}),(!p.profile||!j(p.profile))&&St(_,N,p,!1,"a1"),p.contextDep=B,p.needsContext=z,p.needsFramebuffer=P;var S=p.shader.progVar;if(S.contextDep&&B||S.propDep)xo(_,N,p,null);else{var R=S.append(_,N);if(N(_.shared.gl,".useProgram(",R,".program);"),p.shader.program)xo(_,N,p,p.shader.program);else{N(_.shared.vao,".setVAO(null);");var C=_.global.def("{}"),H=N.def(R,".id"),U=N.def(C,"[",H,"]");N(_.cond(U).then(U,".call(this,a0,a1);").else(U,"=",C,"[",H,"]=",_.link(function(te){return Nt(xo,_,p,te,2)}),"(",R,");",U,".call(this,a0,a1);"))}}Object.keys(p.state).length>0&&N(_.shared.current,".dirty=true;"),_.shared.vao&&N(_.shared.vao,".setVAO(null);")}function Q(_,p){var N=_.proc("scope",3);_.batchId="a2";var B=_.shared,z=B.current;Pn(_,N,p.context),p.framebuffer&&p.framebuffer.append(_,N),Vg(Object.keys(p.state)).forEach(function(P){var j=p.state[P],S=j.append(_,N);an(S)?S.forEach(function(R,C){N.set(_.next[P],"["+C+"]",R)}):N.set(B.next,"."+P,S)}),St(_,N,p,!0,!0),[po,_f,go,Sf,vo].forEach(function(P){var j=p.draw[P];j&&N.set(B.draw,"."+P,""+j.append(_,N))}),Object.keys(p.uniforms).forEach(function(P){var j=p.uniforms[P].append(_,N);Array.isArray(j)&&(j="["+j.join()+"]"),N.set(B.uniforms,"["+x.id(P)+"]",j)}),Object.keys(p.attributes).forEach(function(P){var j=p.attributes[P].append(_,N),S=_.scopeAttrib(P);Object.keys(new G).forEach(function(R){N.set(S,"."+R,j[R])})}),p.scopeVAO&&N.set(B.vao,".targetVAO",p.scopeVAO.append(_,N));function k(P){var j=p.shader[P];j&&N.set(B.shader,"."+P,j.append(_,N))}k(nu),k(ru),Object.keys(p.state).length>0&&(N(z,".dirty=true;"),N.exit(z,".dirty=true;")),N("a1(",_.shared.context,",a0,",_.batchId,");")}function W(_){if(!(typeof _!="object"||an(_))){for(var p=Object.keys(_),N=0;N<p.length;++N)if(ze.isDynamic(_[p[N]]))return!0;return!1}}function Ue(_,p,N){var B=p.static[N];if(!B||!W(B))return;var z=_.global,k=Object.keys(B),P=!1,j=!1,S=!1,R=_.global.def("{}");k.forEach(function(H){var U=B[H];if(ze.isDynamic(U)){typeof U=="function"&&(U=B[H]=ze.unbox(U));var te=dr(U,null);P=P||te.thisDep,S=S||te.propDep,j=j||te.contextDep}else{switch(z(R,".",H,"="),typeof U){case"number":z(U);break;case"string":z('"',U,'"');break;case"object":Array.isArray(U)&&z("[",U.join(),"]");break;default:z(_.link(U));break}z(";")}});function C(H,U){k.forEach(function(te){var ae=B[te];if(ze.isDynamic(ae)){var Se=H.invoke(U,ae);U(R,".",te,"=",Se,";")}})}p.dynamic[N]=new ze.DynamicVariable(xf,{thisDep:P,contextDep:j,propDep:S,ref:R,append:C}),delete p.static[N]}function Lt(_,p,N,B,z){var k=ht();k.stats=k.link(z),Object.keys(p.static).forEach(function(j){Ue(k,p,j)}),wS.forEach(function(j){Ue(k,_,j)});var P=An(_,p,N,B,k);return yn(k,P),Q(k,P),A(k,P),r(k.compile(),{destroy:function(){P.shader.program.destroy()}})}return{next:Ne,current:De,procs:function(){var _=ht(),p=_.proc("poll"),N=_.proc("refresh"),B=_.block();p(B),N(B);var z=_.shared,k=z.gl,P=z.next,j=z.current;B(j,".dirty=false;"),kn(_,p),kn(_,N,null,!0);var S;me&&(S=_.link(me)),O.oes_vertex_array_object&&N(_.link(O.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var R=0;R<Y.maxAttributes;++R){var C=N.def(z.attributes,"[",R,"]"),H=_.cond(C,".buffer");H.then(k,".enableVertexAttribArray(",R,");",k,".bindBuffer(",Ll,",",C,".buffer.buffer);",k,".vertexAttribPointer(",R,",",C,".size,",C,".type,",C,".normalized,",C,".stride,",C,".offset);").else(k,".disableVertexAttribArray(",R,");",k,".vertexAttrib4f(",R,",",C,".x,",C,".y,",C,".z,",C,".w);",C,".buffer=null;"),N(H),me&&N(S,".vertexAttribDivisorANGLE(",R,",",C,".divisor);")}return N(_.shared.vao,".currentVAO=null;",_.shared.vao,".setVAO(",_.shared.vao,".targetVAO);"),Object.keys(ie).forEach(function(U){var te=ie[U],ae=B.def(P,".",U),Se=_.block();Se("if(",ae,"){",k,".enable(",te,")}else{",k,".disable(",te,")}",j,".",U,"=",ae,";"),N(Se),p("if(",ae,"!==",j,".",U,"){",Se,"}")}),Object.keys(ne).forEach(function(U){var te=ne[U],ae=De[U],Se,ct,tt=_.block();if(tt(k,".",te,"("),an(ae)){var Be=ae.length;Se=_.global.def(P,".",U),ct=_.global.def(j,".",U),tt(vn(Be,function(le){return Se+"["+le+"]"}),");",vn(Be,function(le){return ct+"["+le+"]="+Se+"["+le+"];"}).join("")),p("if(",vn(Be,function(le){return Se+"["+le+"]!=="+ct+"["+le+"]"}).join("||"),"){",tt,"}")}else Se=B.def(P,".",U),ct=B.def(j,".",U),tt(Se,");",j,".",U,"=",Se,";"),p("if(",Se,"!==",ct,"){",tt,"}");N(tt)}),_.compile()}(),compile:Lt}}function zS(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var US=34918,VS=34919,Wg=35007,HS=function(c,x){if(!x.ext_disjoint_timer_query)return null;var O=[];function Y(){return O.pop()||x.ext_disjoint_timer_query.createQueryEXT()}function re(me){O.push(me)}var X=[];function q(me){var je=Y();x.ext_disjoint_timer_query.beginQueryEXT(Wg,je),X.push(je),de(X.length-1,X.length,me)}function fe(){x.ext_disjoint_timer_query.endQueryEXT(Wg)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ge=[];function xe(){return ge.pop()||new ce}function ye(me){ge.push(me)}var we=[];function de(me,je,ue){var De=xe();De.startQueryIndex=me,De.endQueryIndex=je,De.sum=0,De.stats=ue,we.push(De)}var pe=[],G=[];function K(){var me,je,ue=X.length;if(ue!==0){G.length=Math.max(G.length,ue+1),pe.length=Math.max(pe.length,ue+1),pe[0]=0,G[0]=0;var De=0;for(me=0,je=0;je<X.length;++je){var Ne=X[je];x.ext_disjoint_timer_query.getQueryObjectEXT(Ne,VS)?(De+=x.ext_disjoint_timer_query.getQueryObjectEXT(Ne,US),re(Ne)):X[me++]=Ne,pe[je+1]=De,G[je+1]=me}for(X.length=me,me=0,je=0;je<we.length;++je){var rt=we[je],ie=rt.startQueryIndex,ne=rt.endQueryIndex;rt.sum+=pe[ne]-pe[ie];var He=G[ie],Ce=G[ne];Ce===He?(rt.stats.gpuTime+=rt.sum/1e6,ye(rt)):(rt.startQueryIndex=He,rt.endQueryIndex=Ce,we[me++]=rt)}we.length=me}}return{beginQuery:q,endQuery:fe,pushScopeStats:de,update:K,getNumPendingQueries:function(){return X.length},clear:function(){O.push.apply(O,X);for(var me=0;me<O.length;me++)x.ext_disjoint_timer_query.deleteQueryEXT(O[me]);X.length=0,O.length=0},restore:function(){X.length=0,O.length=0}}},WS=16384,XS=256,YS=1024,QS=34962,Xg="webglcontextlost",Yg="webglcontextrestored",Qg=1,KS=2,qS=3;function Kg(c,x){for(var O=0;O<c.length;++O)if(c[O]===x)return O;return-1}function ZS(c){var x=Ji(c);if(!x)return null;var O=x.gl,Y=O.getContextAttributes(),re=O.isContextLost(),X=ea(O,x);if(!X)return null;var q=Z(),fe=zS(),ce=X.extensions,ge=HS(O,ce),xe=nn(),ye=O.drawingBufferWidth,we=O.drawingBufferHeight,de={tick:0,time:0,viewportWidth:ye,viewportHeight:we,framebufferWidth:ye,framebufferHeight:we,drawingBufferWidth:ye,drawingBufferHeight:we,pixelRatio:x.pixelRatio},pe={},G={elements:null,primitive:4,count:-1,offset:0,instances:-1},K=gc(O,ce),me=Ls(O,fe,x,De),je=ks(O,ce,me,fe),ue=be(O,ce,K,fe,me,je,G);function De(lt){return ue.destroyBuffer(lt)}var Ne=Gt(O,q,fe,x),rt=hm(O,ce,K,function(){He.procs.poll()},de,fe,x),ie=mm(O,ce,K,fe,x),ne=Rm(O,ce,K,rt,ie,fe),He=GS(O,q,ce,K,me,je,rt,ne,pe,ue,Ne,G,de,ge,x),Ce=xS(O,ne,He.procs.poll,de,Y,ce,K),he=He.next,Ae=O.canvas,Re=[],pt=[],ht=[],Pe=[x.onDestroy],Me=null;function st(){if(Re.length===0){ge&&ge.update(),Me=null;return}Me=At.next(st),Un();for(var lt=Re.length-1;lt>=0;--lt){var Nt=Re[lt];Nt&&Nt(de,null,0)}O.flush(),ge&&ge.update()}function vt(){!Me&&Re.length>0&&(Me=At.next(st))}function Ot(){Me&&(At.cancel(st),Me=null)}function sn(lt){lt.preventDefault(),re=!0,Ot(),pt.forEach(function(Nt){Nt()})}function cn(lt){O.getError(),re=!1,X.restore(),Ne.restore(),me.restore(),rt.restore(),ie.restore(),ne.restore(),ue.restore(),ge&&ge.restore(),He.procs.refresh(),vt(),ht.forEach(function(Nt){Nt()})}Ae&&(Ae.addEventListener(Xg,sn,!1),Ae.addEventListener(Yg,cn,!1));function kt(){Re.length=0,Ot(),Ae&&(Ae.removeEventListener(Xg,sn),Ae.removeEventListener(Yg,cn)),Ne.clear(),ne.clear(),ie.clear(),ue.clear(),rt.clear(),je.clear(),me.clear(),ge&&ge.clear(),Pe.forEach(function(lt){lt()})}function Nn(lt){E(!!lt,"invalid args to regl({...})"),E.type(lt,"object","invalid args to regl({...})");function Nt(z){var k=r({},z);delete k.uniforms,delete k.attributes,delete k.context,delete k.vao,"stencil"in k&&k.stencil.op&&(k.stencil.opBack=k.stencil.opFront=k.stencil.op,delete k.stencil.op);function P(j){if(j in k){var S=k[j];delete k[j],Object.keys(S).forEach(function(R){k[j+"."+R]=S[R]})}}return P("blend"),P("depth"),P("cull"),P("stencil"),P("polygonOffset"),P("scissor"),P("sample"),"vao"in z&&(k.vao=z.vao),k}function Ft(z,k){var P={},j={};return Object.keys(z).forEach(function(S){var R=z[S];if(ze.isDynamic(R)){j[S]=ze.unbox(R,S);return}else if(k&&Array.isArray(R)){for(var C=0;C<R.length;++C)if(ze.isDynamic(R[C])){j[S]=ze.unbox(R,S);return}}P[S]=R}),{dynamic:j,static:P}}var yn=Ft(lt.context||{},!0),mi=Ft(lt.uniforms||{},!0),xo=Ft(lt.attributes||{},!1),A=Ft(Nt(lt),!1),Q={gpuTime:0,cpuTime:0,count:0},W=He.compile(A,xo,mi,yn,Q),Ue=W.draw,Lt=W.batch,_=W.scope,p=[];function N(z){for(;p.length<z;)p.push(null);return p}function B(z,k){var P;if(re&&E.raise("context lost"),typeof z=="function")return _.call(this,null,z,0);if(typeof k=="function")if(typeof z=="number")for(P=0;P<z;++P)_.call(this,null,k,P);else if(Array.isArray(z))for(P=0;P<z.length;++P)_.call(this,z[P],k,P);else return _.call(this,z,k,0);else if(typeof z=="number"){if(z>0)return Lt.call(this,N(z|0),z|0)}else if(Array.isArray(z)){if(z.length)return Lt.call(this,z,z.length)}else return Ue.call(this,z)}return r(B,{stats:Q,destroy:function(){W.destroy()}})}var on=ne.setFBO=Nn({framebuffer:ze.define.call(null,Qg,"framebuffer")});function An(lt,Nt){var Ft=0;He.procs.poll();var yn=Nt.color;yn&&(O.clearColor(+yn[0]||0,+yn[1]||0,+yn[2]||0,+yn[3]||0),Ft|=WS),"depth"in Nt&&(O.clearDepth(+Nt.depth),Ft|=XS),"stencil"in Nt&&(O.clearStencil(Nt.stencil|0),Ft|=YS),E(!!Ft,"called regl.clear with no buffer specified"),O.clear(Ft)}function Pn(lt){if(E(typeof lt=="object"&&lt,"regl.clear() takes an object as input"),"framebuffer"in lt)if(lt.framebuffer&&lt.framebuffer_reglType==="framebufferCube")for(var Nt=0;Nt<6;++Nt)on(r({framebuffer:lt.framebuffer.faces[Nt]},lt),An);else on(lt,An);else An(null,lt)}function kn(lt){E.type(lt,"function","regl.frame() callback must be a function"),Re.push(lt);function Nt(){var Ft=Kg(Re,lt);E(Ft>=0,"cannot cancel a frame twice");function yn(){var mi=Kg(Re,yn);Re[mi]=Re[Re.length-1],Re.length-=1,Re.length<=0&&Ot()}Re[Ft]=yn}return vt(),{cancel:Nt}}function Bn(){var lt=he.viewport,Nt=he.scissor_box;lt[0]=lt[1]=Nt[0]=Nt[1]=0,de.viewportWidth=de.framebufferWidth=de.drawingBufferWidth=lt[2]=Nt[2]=O.drawingBufferWidth,de.viewportHeight=de.framebufferHeight=de.drawingBufferHeight=lt[3]=Nt[3]=O.drawingBufferHeight}function Un(){de.tick+=1,de.time=St(),Bn(),He.procs.poll()}function gn(){rt.refresh(),Bn(),He.procs.refresh(),ge&&ge.update()}function St(){return(nn()-xe)/1e3}gn();function Vn(lt,Nt){E.type(Nt,"function","listener callback must be a function");var Ft;switch(lt){case"frame":return kn(Nt);case"lost":Ft=pt;break;case"restore":Ft=ht;break;case"destroy":Ft=Pe;break;default:E.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ft.push(Nt),{cancel:function(){for(var yn=0;yn<Ft.length;++yn)if(Ft[yn]===Nt){Ft[yn]=Ft[Ft.length-1],Ft.pop();return}}}}var Xt=r(Nn,{clear:Pn,prop:ze.define.bind(null,Qg),context:ze.define.bind(null,KS),this:ze.define.bind(null,qS),draw:Nn({}),buffer:function(lt){return me.create(lt,QS,!1,!1)},elements:function(lt){return je.create(lt,!1)},texture:rt.create2D,cube:rt.createCube,renderbuffer:ie.create,framebuffer:ne.create,framebufferCube:ne.createCube,vao:ue.createVAO,attributes:Y,frame:kn,on:Vn,limits:K,hasExtension:function(lt){return K.extensions.indexOf(lt.toLowerCase())>=0},read:Ce,destroy:kt,_gl:O,_refresh:gn,poll:function(){Un(),ge&&ge.update()},now:St,stats:fe});return x.onDone(null,Xt),Xt}return ZS})})(F_);var MC=F_.exports;const jC=Z0(MC);var FC=1e-6,Go=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Ap(){var e=new Go(16);return Go!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function g1(e){var t=new Go(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function V0(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=t[7],m=t[8],h=t[9],d=t[10],w=t[11],b=t[12],L=t[13],I=t[14],y=t[15],T=n*l-r*o,v=n*u-i*o,F=n*f-a*o,$=r*u-i*l,ee=r*f-a*l,_e=i*f-a*u,se=m*L-h*b,ot=m*I-d*b,Ie=m*y-w*b,Fe=h*I-d*L,Ke=h*y-w*L,Je=d*y-w*I,Qe=T*Je-v*Ke+F*Fe+$*Ie-ee*ot+_e*se;return Qe?(Qe=1/Qe,e[0]=(l*Je-u*Ke+f*Fe)*Qe,e[1]=(i*Ke-r*Je-a*Fe)*Qe,e[2]=(L*_e-I*ee+y*$)*Qe,e[3]=(d*ee-h*_e-w*$)*Qe,e[4]=(u*Ie-o*Je-f*ot)*Qe,e[5]=(n*Je-i*Ie+a*ot)*Qe,e[6]=(I*F-b*_e-y*v)*Qe,e[7]=(m*_e-d*F+w*v)*Qe,e[8]=(o*Ke-l*Ie+f*se)*Qe,e[9]=(r*Ie-n*Ke-a*se)*Qe,e[10]=(b*ee-L*F+y*T)*Qe,e[11]=(h*F-m*ee-w*T)*Qe,e[12]=(l*ot-o*Fe-u*se)*Qe,e[13]=(n*Fe-r*ot+i*se)*Qe,e[14]=(L*v-b*$-I*T)*Qe,e[15]=(m*$-h*v+d*T)*Qe,e):null}function or(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],m=t[7],h=t[8],d=t[9],w=t[10],b=t[11],L=t[12],I=t[13],y=t[14],T=t[15],v=n[0],F=n[1],$=n[2],ee=n[3];return e[0]=v*r+F*l+$*h+ee*L,e[1]=v*i+F*u+$*d+ee*I,e[2]=v*a+F*f+$*w+ee*y,e[3]=v*o+F*m+$*b+ee*T,v=n[4],F=n[5],$=n[6],ee=n[7],e[4]=v*r+F*l+$*h+ee*L,e[5]=v*i+F*u+$*d+ee*I,e[6]=v*a+F*f+$*w+ee*y,e[7]=v*o+F*m+$*b+ee*T,v=n[8],F=n[9],$=n[10],ee=n[11],e[8]=v*r+F*l+$*h+ee*L,e[9]=v*i+F*u+$*d+ee*I,e[10]=v*a+F*f+$*w+ee*y,e[11]=v*o+F*m+$*b+ee*T,v=n[12],F=n[13],$=n[14],ee=n[15],e[12]=v*r+F*l+$*h+ee*L,e[13]=v*i+F*u+$*d+ee*I,e[14]=v*a+F*f+$*w+ee*y,e[15]=v*o+F*m+$*b+ee*T,e}function y1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Sd(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $C(e,t,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),l,u,f;return o<FC?null:(o=1/o,r*=o,i*=o,a*=o,l=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=r*r*f+u,e[1]=i*r*f+a*l,e[2]=a*r*f-i*l,e[3]=0,e[4]=r*i*f-a*l,e[5]=i*i*f+u,e[6]=a*i*f+r*l,e[7]=0,e[8]=r*a*f+i*l,e[9]=i*a*f-r*l,e[10]=a*a*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function BC(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function GC(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],l=t[6],u=t[8],f=t[9],m=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,l),e[2]=Math.hypot(u,f,m),e}function zC(){var e=new Go(4);return Go!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function wd(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}(function(){var e=zC();return function(t,n,r,i,a,o){var l,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function UC(){var e=new Go(2);return Go!=Float32Array&&(e[0]=0,e[1]=0),e}function VC(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+a*a),l=o&&(n*i+r*a)/o;return Math.acos(Math.min(Math.max(l,-1),1))}(function(){var e=UC();return function(t,n,r,i,a,o){var l,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,t.length):u=t.length,l=r;l<u;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}})();const HC=(e=[0,0],t=1,n=0,r=[0,0],i=[[0,1/0],[0,1/0]],a=[[-1/0,1/0],[-1/0,1/0]])=>{const o=new Float32Array(16),l=new Float32Array(16),u=new Float32Array(16);let f=Ap(),m=[...r.slice(0,2),0,1];const h=Array.isArray(i[0])?[...i[0]]:[...i],d=Array.isArray(i[0])?[...i[1]]:[...i],w=Array.isArray(a[0])?[...a[0]]:[...a],b=Array.isArray(a[0])?[...a[1]]:[...a],L=()=>GC(o,f).slice(0,2),I=()=>{const Te=L();return Math.min(Te[0],Te[1])},y=()=>{const Te=L();return Math.max(Te[0],Te[1])},T=()=>Math.acos(f[0]/y()),v=()=>[[...h],[...d]],F=()=>[[...w],[...b]],$=()=>{const Te=L();return[1/Te[0],1/Te[1]]},ee=()=>1/I(),_e=()=>1/y(),se=()=>BC(o,f).slice(0,2),ot=()=>wd(o,m,V0(u,f)).slice(0,2),Ie=()=>f,Fe=()=>m.slice(0,2),Ke=([Te=0,qe=0]=[],Tt=1,Mt=0)=>{f=Ap(),Je([-Te,-qe]),et(Mt),Qe(1/Tt)},Je=([Te=0,qe=0]=[])=>{o[0]=Te,o[1]=qe,o[2]=0;const Tt=y1(l,o);or(f,Tt,f)},Qe=(Te,qe)=>{const Tt=Array.isArray(Te);let Mt=Tt?Te[0]:Te,jt=Tt?Te[1]:Te;if(Mt<=0||jt<=0||Mt===1&&jt===1)return;const Qt=L(),Ut=Qt[0]*Mt,Dt=Qt[1]*jt;if(Mt=Math.max(h[0],Math.min(Ut,h[1]))/Qt[0],jt=Math.max(d[0],Math.min(Dt,d[1]))/Qt[1],Mt===1&&jt===1)return;o[0]=Mt,o[1]=jt,o[2]=1;const Jt=Sd(l,o),hn=qe?[...qe,0]:m,Sn=y1(o,hn);or(f,Sn,or(f,Jt,or(f,V0(u,Sn),f)))},et=Te=>{const qe=Ap();$C(qe,Te,[0,0,1]),or(f,qe,f)},bt=Te=>{const qe=Array.isArray(Te[0]);h[0]=qe?Te[0][0]:Te[0],h[1]=qe?Te[0][1]:Te[1],d[0]=qe?Te[1][0]:Te[0],d[1]=qe?Te[1][1]:Te[1]},nt=Te=>{const qe=Array.isArray(Te[0]);w[0]=qe?Te[0][0]:Te[0],w[1]=qe?Te[0][1]:Te[1],b[0]=qe?Te[1][0]:Te[0],b[1]=qe?Te[1][1]:Te[1]},ve=Te=>{!Te||Te.length<16||(f=Te)},Ve=Te=>{m=[...Te.slice(0,2),0,1]},Ge=()=>{Ke(e,t,n)};return Ke(e,t,n),{get translation(){return se()},get target(){return ot()},get scaling(){return L()},get minScaling(){return I()},get maxScaling(){return y()},get scaleBounds(){return v()},get translationBounds(){return F()},get distance(){return $()},get minDistance(){return ee()},get maxDistance(){return _e()},get rotation(){return T()},get view(){return Ie()},get viewCenter(){return Fe()},lookAt:Ke,translate:Je,pan:Je,rotate:et,scale:Qe,zoom:Qe,reset:Ge,set:(...Te)=>(console.warn("`set()` is deprecated. Please use `setView()` instead."),ve(...Te)),setScaleBounds:bt,setTranslationBounds:nt,setView:ve,setViewCenter:Ve}},WC=["pan","rotate"],x1={alt:"altKey",cmd:"metaKey",ctrl:"ctrlKey",meta:"metaKey",shift:"shiftKey"},XC=(e,{distance:t=1,target:n=[0,0],rotation:r=0,isNdc:i=!0,isFixed:a=!1,isPan:o=!0,isPanInverted:l=[!1,!0],panSpeed:u=1,isRotate:f=!0,rotateSpeed:m=1,defaultMouseDownMoveAction:h="pan",mouseDownMoveModKey:d="alt",isZoom:w=!0,zoomSpeed:b=1,viewCenter:L,scaleBounds:I,translationBounds:y,onKeyDown:T=()=>{},onKeyUp:v=()=>{},onMouseDown:F=()=>{},onMouseUp:$=()=>{},onMouseMove:ee=()=>{},onWheel:_e=()=>{}}={})=>{let se=HC(n,t,r,L,I,y),ot=0,Ie=0,Fe=0,Ke=0,Je=0,Qe=0,et=!1,bt=0,nt=1,ve=1,Ve=1,Ge=!1,Te=!1,qe=!1,Tt=h==="pan",Mt=o,jt=o,Qt=l,Ut=l,Dt=w,Jt=w;const hn=()=>{Mt=Array.isArray(o)?!!o[0]:o,jt=Array.isArray(o)?!!o[1]:o,Qt=Array.isArray(l)?!!l[0]:l,Ut=Array.isArray(l)?!!l[1]:l,Dt=Array.isArray(w)?!!w[0]:w,Jt=Array.isArray(w)?!!w[1]:w};hn();const Sn=i?Oe=>Oe/nt*2*Ve:Oe=>Oe,qt=i?Oe=>Oe/ve*2:Oe=>-Oe,It=i?Oe=>(-1+Oe/nt*2)*Ve:Oe=>Oe,mt=i?Oe=>1-Oe/ve*2:Oe=>Oe,yt=()=>{if(a){const dt=Te;return Te=!1,dt}Ge=!1;const Oe=ot,Rt=Ie;if((Mt||jt)&&et&&(Tt&&!qe||!Tt&&qe)){const dt=Qt?Je-Oe:Oe-Je,tn=Mt?Sn(u*dt):0,Ee=Ut?Qe-Rt:Rt-Qe,ze=jt?qt(u*Ee):0;(tn!==0||ze!==0)&&(se.pan([tn,ze]),Ge=!0)}if((Dt||Jt)&&bt){const dt=b*Math.exp(bt/ve),tn=It(Fe),Ee=mt(Ke);se.scale([Dt?1/dt:1,Jt?1/dt:1],[tn,Ee]),Ge=!0}if(f&&et&&(Tt&&qe||!Tt&&!qe)&&Math.abs(Je-Oe)+Math.abs(Qe-Rt)>0){const dt=nt/2,tn=ve/2,Ee=Je-dt,ze=tn-Qe,At=Oe-dt,nn=tn-Rt,Z=VC([Ee,ze],[At,nn]),gt=Ee*nn-At*ze;se.rotate(m*Z*Math.sign(gt)),Ge=!0}bt=0,Je=Oe,Qe=Rt;const Bt=Ge||Te;return Te=!1,Bt},Et=({defaultMouseDownMoveAction:Oe=null,isFixed:Rt=null,isPan:Bt=null,isPanInverted:dt=null,isRotate:tn=null,isZoom:Ee=null,panSpeed:ze=null,rotateSpeed:At=null,zoomSpeed:nn=null,mouseDownMoveModKey:Z=null}={})=>{h=Oe!==null&&WC.includes(Oe)?Oe:h,Tt=h==="pan",a=Rt!==null?Rt:a,o=Bt!==null?Bt:o,l=dt!==null?dt:l,f=tn!==null?tn:f,w=Ee!==null?Ee:w,u=+ze>0?ze:u,m=+At>0?At:m,b=+nn>0?nn:b,hn(),d=Z!==null&&Object.keys(x1).includes(Z)?Z:d},_t=()=>{const Oe=e.getBoundingClientRect();nt=Oe.width,ve=Oe.height,Ve=nt/ve},Pt=Oe=>{qe=!1,v(Oe)},Vt=Oe=>{qe=Oe[x1[d]],T(Oe)},Ht=Oe=>{et=!1,$(Oe)},wn=Oe=>{et=Oe.buttons===1,F(Oe)},E=document.createEvent("MouseEvent").offsetX!==void 0?Oe=>{Fe=Oe.offsetX,Ke=Oe.offsetY}:Oe=>{const Rt=e.getBoundingClientRect();Fe=Oe.clientX-Rt.left,Ke=Oe.clientY-Rt.top},Ct=Oe=>{ot=Oe.clientX,Ie=Oe.clientY},$t=Oe=>{Ct(Oe),ee(Oe)},Le=Oe=>{if(Dt||Jt){Oe.preventDefault(),Ct(Oe),E(Oe);const Rt=Oe.deltaMode===1?12:1;bt+=Rt*(Oe.deltaY||Oe.deltaX||0)}_e(Oe)},at=()=>{se=void 0,window.removeEventListener("keydown",Vt),window.removeEventListener("keyup",Pt),e.removeEventListener("mousedown",wn),window.removeEventListener("mouseup",Ht),window.removeEventListener("mousemove",$t),e.removeEventListener("wheel",Le)};window.addEventListener("keydown",Vt,{passive:!0}),window.addEventListener("keyup",Pt,{passive:!0}),e.addEventListener("mousedown",wn,{passive:!0}),window.addEventListener("mouseup",Ht,{passive:!0}),window.addEventListener("mousemove",$t,{passive:!0}),e.addEventListener("wheel",Le,{passive:!1}),se.config=Et,se.dispose=at,se.refresh=_t,se.tick=yt;const ft=Oe=>function(){Oe.apply(null,arguments),Te=!0};return se.lookAt=ft(se.lookAt),se.translate=ft(se.translate),se.pan=ft(se.pan),se.rotate=ft(se.rotate),se.scale=ft(se.scale),se.zoom=ft(se.zoom),se.reset=ft(se.reset),se.set=ft(se.set),se.setScaleBounds=ft(se.setScaleBounds),se.setTranslationBounds=ft(se.setTranslationBounds),se.setView=ft(se.setView),se.setViewCenter=ft(se.setViewCenter),_t(),se};function H0(e,t,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;$_(e,t,o,r,i,a%2),H0(e,t,n,r,o-1,a+1),H0(e,t,n,o+1,i,a+1)}function $_(e,t,n,r,i,a){for(;i>r;){if(i-r>600){const f=i-r+1,m=n-r+1,h=Math.log(f),d=.5*Math.exp(2*h/3),w=.5*Math.sqrt(h*d*(f-d)/f)*(m-f/2<0?-1:1),b=Math.max(r,Math.floor(n-m*d/f+w)),L=Math.min(i,Math.floor(n+(f-m)*d/f+w));$_(e,t,n,b,L,a)}const o=t[2*n+a];let l=r,u=i;for(Eu(e,t,r,n),t[2*i+a]>o&&Eu(e,t,r,i);l<u;){for(Eu(e,t,l,u),l++,u--;t[2*l+a]<o;)l++;for(;t[2*u+a]>o;)u--}t[2*r+a]===o?Eu(e,t,r,u):(u++,Eu(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function Eu(e,t,n,r){Lp(e,n,r),Lp(t,2*n,2*r),Lp(t,2*n+1,2*r+1)}function Lp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function YC(e,t,n,r,i,a,o){const l=[0,e.length-1,0],u=[];let f,m;for(;l.length;){const h=l.pop(),d=l.pop(),w=l.pop();if(d-w<=o){for(let I=w;I<=d;I++)f=t[2*I],m=t[2*I+1],f>=n&&f<=i&&m>=r&&m<=a&&u.push(e[I]);continue}const b=Math.floor((w+d)/2);f=t[2*b],m=t[2*b+1],f>=n&&f<=i&&m>=r&&m<=a&&u.push(e[b]);const L=(h+1)%2;(h===0?n<=f:r<=m)&&(l.push(w),l.push(b-1),l.push(L)),(h===0?i>=f:a>=m)&&(l.push(b+1),l.push(d),l.push(L))}return u}function QC(e,t,n,r,i,a){const o=[0,e.length-1,0],l=[],u=i*i;for(;o.length;){const f=o.pop(),m=o.pop(),h=o.pop();if(m-h<=a){for(let I=h;I<=m;I++)E1(t[2*I],t[2*I+1],n,r)<=u&&l.push(e[I]);continue}const d=Math.floor((h+m)/2),w=t[2*d],b=t[2*d+1];E1(w,b,n,r)<=u&&l.push(e[d]);const L=(f+1)%2;(f===0?n-i<=w:r-i<=b)&&(o.push(h),o.push(d-1),o.push(L)),(f===0?n+i>=w:r+i>=b)&&(o.push(d+1),o.push(m),o.push(L))}return l}function E1(e,t,n,r){const i=e-n,a=t-r;return i*i+a*a}const KC=e=>e[0],qC=e=>e[1];class ZC{constructor(t,n=KC,r=qC,i=64,a=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new o(t.length),u=this.coords=new a(t.length*2);for(let f=0;f<t.length;f++)l[f]=f,u[2*f]=n(t[f]),u[2*f+1]=r(t[f]);H0(l,u,i,0,l.length-1,0)}range(t,n,r,i){return YC(this.ids,this.coords,t,n,r,i,this.nodeSize)}within(t,n,r){return QC(this.ids,this.coords,t,n,r,this.nodeSize)}}const JC=`
precision mediump float;
varying vec4 color;
void main() {
  gl_FragColor = color;
}`;var eA=JC;const tA=`
uniform mat4 projectionViewModel;
uniform float aspectRatio;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform float width;
uniform float useOpacity;
uniform float useColorOpacity;
uniform int miter;

attribute vec3 prevPosition;
attribute vec3 currPosition;
attribute vec3 nextPosition;
attribute float opacity;
attribute float offsetScale;
attribute float colorIndex;

varying vec4 color;

void main() {
  vec2 aspectVec = vec2(aspectRatio, 1.0);
  vec4 prevProjected = projectionViewModel * vec4(prevPosition, 1.0);
  vec4 currProjected = projectionViewModel * vec4(currPosition, 1.0);
  vec4 nextProjected = projectionViewModel * vec4(nextPosition, 1.0);

  // get 2D screen space with W divide and aspect correction
  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;
  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;
  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;

  // starting point uses (next - current)
  vec2 dir = vec2(0.0);
  if (currScreen == prevScreen) {
    dir = normalize(nextScreen - currScreen);
  }
  // ending point uses (current - previous)
  else if (currScreen == nextScreen) {
    dir = normalize(currScreen - prevScreen);
  }
  // somewhere in middle, needs a join
  else {
    // get directions from (C - B) and (B - A)
    vec2 dirA = normalize((currScreen - prevScreen));
    if (miter == 1) {
      vec2 dirB = normalize((nextScreen - currScreen));
      // now compute the miter join normal and length
      vec2 tangent = normalize(dirA + dirB);
      vec2 perp = vec2(-dirA.y, dirA.x);
      vec2 miter = vec2(-tangent.y, tangent.x);
      dir = tangent;
    } else {
      dir = dirA;
    }
  }

  vec2 normal = vec2(-dir.y, dir.x) * width;
  normal.x /= aspectRatio;
  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);
  gl_Position = currProjected + offset;

  // Get color from texture
  float colorRowIndex = floor((colorIndex + colorTexEps) / colorTexRes);
  vec2 colorTexIndex = vec2(
    (colorIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);
  color.a = useColorOpacity * color.a + useOpacity * opacity;
}`;var nA=tA;const{push:_1,splice:rA}=Array.prototype,Rp=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ir=Float32Array.BYTES_PER_ELEMENT,iA=(e,t=[])=>{let n=0;return e.forEach(r=>{for(let i=0;i<r-1;i++){const a=n+i*2,o=a+1,l=a+2,u=a+3;t.push(a,o,l,l,o,u)}n+=(r+2)*2}),t},Lr={duplicate(e,t=1,n=1){const r=[],i=new Array(t*2);for(let a=0,o=e.length/t;a<o;a++){const l=a*t;for(let u=0;u<t;u++){const f=e[l+u];i[u]=f,i[u+t]=f*n}_1.apply(r,i)}return r},mapElement(e,t,n,r){for(let i=0,a=e.length/n;i<a;i++){const o=t+i*n;e[o]=r(e[o],o,i)}return e},copyElement(e,t,n,r){const i=new Array(r),a=t*r;for(let o=0;o<r;o++)i[o]=e[a+o];return rA.call(e,n*r,0,...i),e},increaseStride(e,t,n,r=0){const i=[],a=new Array(n).fill(r);for(let o=0,l=e.length/t;o<l;o++){const u=o*t;for(let f=0;f<t;f++)a[f]=e[u+f];_1.apply(i,a)}return i}},aA=(e,{projection:t=Rp,model:n=Rp,view:r=Rp,points:i=[],colorIndices:a=[],color:o=[.8,.5,0,1],opacity:l=null,opacities:u=[],width:f=1,widths:m=[],miter:h=1,is2d:d=!1,zPos2d:w=0}={})=>{if(!e){console.error("Regl instance is undefined.");return}const b=new Float32Array(16);let L,I,y,T,v,F,$,ee,_e,se,ot,Ie,Fe,Ke,Je,Qe,et,bt,nt=d?2:3;const ve=()=>+(u.length===I||l!==null),Ve=()=>{se=e.buffer(),ot=e.buffer(),Ie=e.buffer(),Je=e.buffer(),Qe={prevPosition:{buffer:()=>se,offset:0,stride:ir*3},currPosition:{buffer:()=>se,offset:ir*3*2,stride:ir*3},nextPosition:{buffer:()=>se,offset:ir*3*4,stride:ir*3},opacity:{buffer:()=>ot,offset:ir*2,stride:ir},offsetScale:{buffer:()=>Ie,offset:ir*2,stride:ir},colorIndex:{buffer:()=>Je,offset:ir*2,stride:ir}},et=e.elements(),bt=e({attributes:Qe,depth:{enable:!d},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projectionViewModel:(mt,yt)=>{const Et=mt.projection||yt.projection,_t=mt.model||yt.model,Pt=mt.view||yt.view;return or(b,Et,or(b,Pt,_t))},aspectRatio:({viewportWidth:mt,viewportHeight:yt})=>mt/yt,colorTex:()=>Fe,colorTexRes:()=>Ke,colorTexEps:()=>.5/Ke,pixelRatio:({pixelRatio:mt})=>mt,width:({pixelRatio:mt,viewportHeight:yt})=>f/yt*mt,useOpacity:ve,useColorOpacity:()=>+!ve(),miter:h},elements:()=>et,vert:nA,frag:eA})},Ge=()=>{L===1&&i.length%nt>0&&console.warn(`The length of points (${I}) does not match the dimensions (${nt}). Incomplete points are ignored.`),T=i.flat().slice(0,I*nt),d&&(T=Lr.increaseStride(T,2,3,w)),a.length!==I&&(a=new Array(I).fill(0)),m.length!==I&&(m=new Array(I).fill(1));let mt=a.slice(),yt=u.length===I?u.slice():new Array(I).fill(+l),Et=m.slice(),_t=0;y.forEach(Pt=>{const Vt=_t+Pt-1;Lr.copyElement(T,Vt,Vt,3),Lr.copyElement(T,_t,_t,3),Lr.copyElement(mt,Vt,Vt,1),Lr.copyElement(mt,_t,_t,1),Lr.copyElement(yt,Vt,Vt,1),Lr.copyElement(yt,_t,_t,1),Lr.copyElement(Et,Vt,Vt,1),Lr.copyElement(Et,_t,_t,1),_t+=Pt+2}),v=new Float32Array(Lr.duplicate(T,3)),F=Lr.duplicate(mt),$=Lr.duplicate(yt),ee=Lr.duplicate(Et,1,-1),_e=iA(y),se({usage:"dynamic",type:"float",length:v.length*ir,data:v}),ot({usage:"dynamic",type:"float",length:$.length*ir,data:$}),Ie({usage:"dynamic",type:"float",length:ee.length*ir,data:ee}),Je({usage:"dynamic",type:"float",length:F.length*ir,data:F}),et({primitive:"triangles",usage:"dynamic",type:_e.length>2**16?"uint32":"uint16",data:_e})},Te=()=>{qe(),Ve()},qe=()=>{i=null,T=null,v=null,ee=null,_e=null,se.destroy(),Ie.destroy(),et.destroy()},Tt=({projection:mt,model:yt,view:Et}={})=>{mt&&(t=mt),yt&&(n=yt),Et&&(r=Et),i&&i.length>1&&bt({projection:t,model:n,view:r})},Mt=(mt,yt)=>{const Et=yt.flat(2);return Et.length===I?Et:Et.length===L?y.map((_t,Pt)=>Array(_t).fill(Et[Pt])).flat():mt},jt=()=>i,Qt=(mt=[],{colorIndices:yt=a,opacities:Et=u,widths:_t=m,is2d:Pt=d}={})=>{i=mt,d=Pt,nt=d?2:3,L=Array.isArray(i[0])?i.length:1,y=L>1?i.map(Vt=>Math.floor(Vt.length/nt)):[Math.floor(i.length/nt)],I=y.reduce((Vt,Ht)=>Vt+Ht,0),a=Mt(a,yt),u=Mt(u,Et),m=Mt(m,_t),i&&I>1?Ge():Te()},Ut=(mt,yt=-1)=>Array.isArray(mt)?mt.length&&!Array.isArray(mt[0])?yt+1:Ut(mt[0],++yt):yt,Dt=()=>{const mt=Ut(o)===0?[o]:o;Ke=Math.max(2,Math.ceil(Math.sqrt(mt.length)));const yt=new Uint8Array(Ke**2*4);mt.forEach((Et,_t)=>{yt[_t*4]=Math.min(255,Math.max(0,Math.round(Et[0]*255))),yt[_t*4+1]=Math.min(255,Math.max(0,Math.round(Et[1]*255))),yt[_t*4+2]=Math.min(255,Math.max(0,Math.round(Et[2]*255))),yt[_t*4+3]=Number.isNaN(+Et[3])?255:Math.min(255,Math.max(0,Math.round(Et[3]*255)))}),Fe=e.texture({data:yt,shape:[Ke,Ke,4]})},Jt=(mt,yt=l)=>{o=mt,l=yt,Fe&&Fe.destroy(),Dt()},hn=()=>({color:o,miter:h,width:f}),Sn=({color:mt,opacity:yt,miter:Et,width:_t}={})=>{mt&&Jt(mt,yt),Et&&(h=Et),+_t>0&&(f=_t)},qt=()=>({points:se,widths:Ie,opacities:ot,colorIndices:Je}),It=()=>({points:v,widths:ee,opacities:$,colorIndices:F});return Ve(),Dt(),i&&i.length>1&&Qt(i),{clear:Te,destroy:qe,draw:Tt,getPoints:jt,setPoints:Qt,getData:It,getBuffer:qt,getStyle:hn,setStyle:Sn}};var Jf=aA;const oA=e=>e*e*e,B_=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,lA=e=>--e*e*e+1,sA=e=>e,uA=e=>e*e,cA=e=>e<.5?2*e*e:-1+(4-2*e)*e,fA=e=>e*(2-e),Hl=e=>e,dA=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;const n=new Set(e),r=new Set(t);return n.size!==r.size?!1:t.every(i=>n.has(i))},hA=e=>e.reduce((t,n)=>n>t?n:t,-1/0),S1=(e,t=n=>n)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r,e));return n},mA=(e,t)=>{const n=[];return e.forEach(r=>{n[r]=!0}),t.forEach(r=>{n[r]=!0}),n.reduce((r,i,a)=>(i&&r.push(a),r),[])},Jv=(e,...t)=>(t.forEach(n=>{const r=Object.keys(n).reduce((i,a)=>(i[a]=Object.getOwnPropertyDescriptor(n,a),i),{});Object.getOwnPropertySymbols(n).forEach(i=>{const a=Object.getOwnPropertyDescriptor(n,i);a.enumerable&&(r[i]=a)}),Object.defineProperties(e,r)}),e),pA=(...e)=>t=>e.reduce((n,r)=>r(n),t),vA=e=>t=>Jv({__proto__:{constructor:e}},t),w1=(e,t)=>n=>Jv(n,{get[e](){return t}}),gA=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),yA=e=>new Worker(window.URL.createObjectURL(new Blob([`(${e.toString()})()`],{type:"text/javascript"}))),Nl=(e=1)=>new Promise(t=>{let n=0;const r=()=>requestAnimationFrame(()=>{n++,n<e?r():t()});r()}),G_=(e,t,n=null)=>{let r,i=0;n=n===null?t:n;const a=(...u)=>{const f=()=>{i>0&&(e(...u),i=0)};clearTimeout(r),r=setTimeout(f,n)};let o=!1;const l=(...u)=>{o?(i++,a(...u)):(e(...u),a(...u),o=!0,i=0,setTimeout(()=>{o=!1},t))};return l.reset=()=>{o=!1},l.cancel=()=>{clearTimeout(r)},l.now=(...u)=>e(...u),l},xi="auto",xA=0,Op=1,EA=2,T1=3,_A=4,SA=Float32Array.BYTES_PER_ELEMENT,z_=["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float","EXT_float_blend"],b1={color:[0,0,0,0],depth:1},eg="panZoom",U_="lasso",V_="rotate",wA=[eg,U_,V_],TA=eg,bA={cubicIn:oA,cubicInOut:B_,cubicOut:lA,linear:sA,quadIn:uA,quadInOut:cA,quadOut:fA},C1=B_,gi="continuous",Pl="categorical",A1=[gi,Pl],W0="deselect",tg="lassoEnd",CA=[W0,tg],AA=[0,.666666667,1,1],LA=2,RA=!1,OA=10,NA=3,PA=tg,kA=!1,Zd=750,Jd=500,eh=100,th=250,ng="lasso",nh="rotate",rh="merge",IA=[ng,nh,rh],rg="alt",ig="cmd",H_="ctrl",W_="meta",ag="shift",DA=[rg,ig,H_,W_,ag],MA={[rg]:nh,[ag]:ng,[ig]:rh},jA=1,FA=xi,$A=xi,BA=1,Np=1,GA=6,zA=2,UA=2,Pp=null,VA=2,HA=2,kp=null,WA=null,Ip=null,XA=.66,YA=1,Dp=null,QA=.15,KA=25,qA=1,ZA=1,_u=null,JA=[.66,.66,.66,YA],e2=[0,.55,1,1],t2=[1,1,1,1],n2=[0,0,0,1],Mp=null,r2=[.66,.66,.66,.2],i2=[0,.55,1,1],a2=[1,1,1,1],o2=[0,0],l2=1,s2=0,u2=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c2="IMAGE_LOAD_ERROR",f2=null,d2=!1,h2=[1,1,1,.5],m2=!0,p2=!0,v2=!1,g2=100,y2=1/500,x2="auto",E2=!1,_2=200,S2=500,X_=new Set(["z","valueZ","valueA","value1","category"]),Y_=new Set(["w","valueW","valueB","value2","value"]),og=15e3,L1="Points have not been drawn",w2=(e,t)=>e?z_.reduce((n,r)=>e.hasExtension(r)?n:(t||console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`),!1),!0):!1,T2=e=>{const t=e.getContext("webgl",{antialias:!0,preserveDrawingBuffer:!0}),n=[];return z_.forEach(r=>{t.getExtension(r)?n.push(r):console.warn(`WebGL: ${r} extension not supported. Scatterplot might not render properly`)}),jC({gl:t,extensions:n})},jp=(e,t,n,r)=>Math.sqrt((e-n)**2+(t-r)**2),b2=e=>{let t=1/0,n=-1/0,r=1/0,i=-1/0;for(let a=0;a<e.length;a+=2)t=e[a]<t?e[a]:t,n=e[a]>n?e[a]:n,r=e[a+1]<r?e[a+1]:r,i=e[a+1]>i?e[a+1]:i;return[t,r,n,i]},C2=([e,t,n,r])=>Number.isFinite(e)&&Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(r)&&n-e>0&&r-t>0,A2=(e,t=!1)=>e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,a)=>`#${r}${r}${i}${i}${a}${a}`).substring(1).match(/.{2}/g).map(n=>parseInt(n,16)/255**t),Sa=(e,t,{minLength:n=0}={})=>Array.isArray(e)&&e.length>=n&&e.every(t),wa=e=>!Number.isNaN(+e)&&+e>=0,ed=e=>!Number.isNaN(+e)&&+e>0,R1=(e,t)=>n=>e.indexOf(n)>=0?n:t,L2=(e,t=!1,n=og)=>new Promise((r,i)=>{const a=new Image;t&&(a.crossOrigin="anonymous"),a.src=e,a.onload=()=>{r(a)};const o=()=>{i(new Error(c2))};a.onerror=o,setTimeout(o,n)}),O1=(e,t,n=og)=>new Promise((r,i)=>{L2(t,t.indexOf(window.location.origin)!==0&&t.indexOf("base64")===-1,n).then(a=>{r(e.texture(a))}).catch(a=>{i(a)})}),R2=(e,t=!1)=>[...A2(e,t),255**!t],O2=e=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e),N2=e=>e>=0&&e<=1,ih=e=>Array.isArray(e)&&e.every(N2),P2=(e,[t,n]=[])=>{let r,i,a,o,l=!1;for(let u=0,f=e.length-2;u<e.length;u+=2)r=e[u],i=e[u+1],a=e[f],o=e[f+1],i>n!=o>n&&t<(a-r)*(n-i)/(o-i)+r&&(l=!l),f=u;return l},X0=e=>typeof e=="string"||e instanceof String,k2=e=>Number.isInteger(e)&&e>=0&&e<=255,Q_=e=>Array.isArray(e)&&e.every(k2),I2=e=>e.length===3&&(ih(e)||Q_(e)),D2=e=>e.length===4&&(ih(e)||Q_(e)),Ta=e=>Array.isArray(e)&&e.length&&(Array.isArray(e[0])||X0(e[0])),td=(e,t)=>e>t?e:t,N1=(e,t)=>e<t?e:t,mr=(e,t)=>{if(D2(e)){const n=ih(e);return t&&n||!t&&!n?e:t&&!n?e.map(r=>r/255):e.map(r=>r*255)}if(I2(e)){const n=255**!t,r=ih(e);return t&&r||!t&&!r?[...e,n]:t&&!r?[...e.map(i=>i/255),n]:[...e.map(i=>i*255),n]}return O2(e)?R2(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},P1=e=>Object.entries(e).reduce((t,[n,r])=>(t[r]?t[r]=[...t[r],n]:t[r]=n,t),{}),k1=e=>.21*e[0]+.72*e[1]+.07*e[2],M2=(e,t,n)=>Math.min(n,Math.max(t,e)),j2=(e={})=>{let{regl:t,canvas:n=document.createElement("canvas"),gamma:r=BA}=e;t||(t=T2(n));const i=w2(t),a=[n.width,n.height],o=t.framebuffer({width:a[0],height:a[1],colorFormat:"rgba",colorType:"float"}),l=t({vert:`
      precision highp float;
      attribute vec2 xy;
      void main () {
        gl_Position = vec4(xy, 0, 1);
      }`,frag:`
      precision highp float;
      uniform vec2 srcRes;
      uniform sampler2D src;
      uniform float gamma;

      vec3 approxLinearToSRGB (vec3 rgb, float gamma) {
        return pow(clamp(rgb, vec3(0), vec3(1)), vec3(1.0 / gamma));
      }

      void main () {
        vec4 color = texture2D(src, gl_FragCoord.xy / srcRes);
        gl_FragColor = vec4(approxLinearToSRGB(color.rgb, gamma), color.a);
      }`,attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{src:()=>o,srcRes:()=>a,gamma:()=>r},count:3,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"one",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),u=I=>{const y=I.getContext("2d");y.clearRect(0,0,I.width,I.height),y.drawImage(n,(n.width-I.width)/2,(n.height-I.height)/2,I.width,I.height,0,0,I.width,I.height)},f=(I,y)=>{t.clear(b1),o.use(()=>{t.clear(b1),I()}),l(),u(y)},m=()=>{t.poll()},h=new Set,d=I=>(h.add(I),()=>{h.delete(I)}),w=t.frame(()=>{const I=h.values();let y=I.next();for(;!y.done;)y.value(),y=I.next()}),b=()=>{n.width=window.innerWidth*window.devicePixelRatio,n.height=window.innerHeight*window.devicePixelRatio,a[0]=n.width,a[1]=n.height,o.resize(...a)};return e.canvas||(window.addEventListener("resize",b),window.addEventListener("orientationchange",b),b()),{get canvas(){return n},get regl(){return t},get gamma(){return r},set gamma(I){r=+I},get isSupported(){return i},render:f,onFrame:d,refresh:m,destroy:()=>{w.cancel(),n=void 0,t=void 0,window.removeEventListener("resize",b),window.removeEventListener("orientationchange",b)}}},F2=!0,Fp=8,I1=2,$2=2500,B2=250,G2=()=>{const e=document.createElement("div"),t=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);e.id=`lasso-long-press-${t}`,e.style.position="fixed",e.style.width="1.25rem",e.style.height="1.25rem",e.style.pointerEvents="none",e.style.transform="translate(-50%,-50%)";const n=document.createElement("div");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="1.25rem",n.style.height="1.25rem",n.style.clipPath="inset(0px 0px 0px 50%)",n.style.opacity=0,e.appendChild(n);const r=document.createElement("div");r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.width="0.8rem",r.style.height="0.8rem",r.style.border="0.2rem solid currentcolor",r.style.borderRadius="0.8rem",r.style.clipPath="inset(0px 50% 0px 0px)",r.style.transform="rotate(0deg)",n.appendChild(r);const i=document.createElement("div");i.style.position="absolute",i.style.top=0,i.style.left=0,i.style.width="0.8rem",i.style.height="0.8rem",i.style.border="0.2rem solid currentcolor",i.style.borderRadius="0.8rem",i.style.clipPath="inset(0px 50% 0px 0px)",i.style.transform="rotate(0deg)",n.appendChild(i);const a=document.createElement("div");return a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="1.25rem",a.style.height="1.25rem",a.style.borderRadius="1.25rem",a.style.background="currentcolor",a.style.transform="scale(0)",a.style.opacity=0,e.appendChild(a),{longPress:e,longPressCircle:n,longPressCircleLeft:r,longPressCircleRight:i,longPressEffect:a}},z2=(e,t,n)=>(1-e)*t+n,U2=(e,t)=>`${e}ms ease-out mainIn ${t}ms 1 normal forwards`,V2=(e,t)=>`${e}ms ease-out effectIn ${t}ms 1 normal forwards`,H2=(e,t)=>`${e}ms linear leftSpinIn ${t}ms 1 normal forwards`,W2=(e,t)=>`${e}ms linear rightSpinIn ${t}ms 1 normal forwards`,X2=(e,t)=>`${e}ms linear circleIn ${t}ms 1 normal forwards`,Y2=(e,t,n)=>`
  @keyframes mainIn {
    0% {
      color: ${t};
      opacity: 0;
    }
    0%, ${e}% {
      color: ${t};
      opacity: 1;
    }
    100% {
      color: ${n};
      opacity: 0.8;
    }
  }
`,Q2=(e,t,n,r)=>`
  @keyframes effectIn {
    0%, ${e}% {
      opacity: ${n};
      transform: scale(${r});
    }
    ${t}% {
      opacity: 0.66;
      transform: scale(1.5);
    }
    99% {
      opacity: 0;
      transform: scale(2);
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,K2=(e,t,n)=>`
  @keyframes circleIn {
    0% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e}% {
      clip-path: ${t};
      opacity: 1;
    }
    ${e+.01}%, 100% {
      clip-path: inset(0);
      opacity: 1;
    }
  }
`,q2=(e,t)=>`
  @keyframes leftSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(360deg);
    }
  }
`,Z2=(e,t)=>`
  @keyframes rightSpinIn {
    0% {
      transform: rotate(${t}deg);
    }
    ${e}%, 100% {
      transform: rotate(180deg);
    }
  }
`,J2=({time:e=Zd,extraTime:t=Jd,delay:n=eh,currentColor:r,targetColor:i,effectOpacity:a,effectScale:o,circleLeftRotation:l,circleRightRotation:u,circleClipPath:f,circleOpacity:m})=>{const h=l/360,d=z2(h,e,t),w=Math.round((1-h)*e/d*100),b=Math.round(w/2),L=w+(100-w)/4;return{rules:{main:Y2(w,r,i),effect:Q2(w,L,a,o),circleRight:Z2(b,u),circleLeft:q2(w,l),circle:K2(b,f,m)},names:{main:U2(d,n),effect:V2(d,n),circleLeft:H2(d,n),circleRight:W2(d,n),circle:X2(d,n)}}},eL=e=>`${e}ms linear mainOut 0s 1 normal forwards`,tL=e=>`${e}ms linear effectOut 0s 1 normal forwards`,nL=e=>`${e}ms linear leftSpinOut 0s 1 normal forwards`,rL=e=>`${e}ms linear rightSpinOut 0s 1 normal forwards`,iL=e=>`${e}ms linear circleOut 0s 1 normal forwards`,aL=(e,t)=>`
  @keyframes mainOut {
    0% {
      color: ${e};
    }
    100% {
      color: ${t};
    }
  }
`,oL=(e,t)=>`
  @keyframes effectOut {
    0% {
      opacity: ${e};
      transform: scale(${t});
    }
    99% {
      opacity: 0;
      transform: scale(${t+.5});
    }
    100% {
      opacity: 0;
      transform: scale(0);
    }
  }
`,lL=(e,t)=>`
  @keyframes rightSpinOut {
    0%, ${e}% {
      transform: rotate(${t}deg);
    }
    100% {
      transform: rotate(0deg);
    }
`,sL=e=>`
  @keyframes leftSpinOut {
    0% {
      transform: rotate(${e}deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
`,uL=(e,t,n)=>`
  @keyframes circleOut {
    0%, ${e}% {
      clip-path: ${t};
      opacity: ${n};
    }
    ${e+.01}% {
      clip-path: inset(0 0 0 50%);
      opacity: ${n};
    }
    100% {
      clip-path: inset(0 0 0 50%);
      opacity: 0;
    }
  }
`,cL=({time:e=th,currentColor:t,targetColor:n,effectOpacity:r,effectScale:i,circleLeftRotation:a,circleRightRotation:o,circleClipPath:l,circleOpacity:u})=>{const f=a/360,m=f*e,h=Math.min(100,f*100),d=h>50?Math.round((1-50/h)*100):0;return{rules:{main:aL(t,n),effect:oL(r,i),circleRight:lL(d,o),circleLeft:sL(a),circle:uL(d,l,u)},names:{main:eL(m),effect:tL(m),circleRight:nL(m),circleLeft:rL(m),circle:iL(m)}}},Su=(e,t=null)=>e===null?t:e;let $p;const K_=()=>{if(!$p){const e=document.createElement("style");document.head.appendChild(e),$p=e.sheet}return $p},Fr=e=>{const t=K_(),n=t.rules.length;return t.insertRule(e,n),n},$r=e=>{K_().deleteRule(e)},fL=`${$2}ms ease scaleInFadeOut 0s 1 normal backwards`,dL=(e,t,n)=>`
@keyframes scaleInFadeOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%,-50%) scale(1) rotate(${n+20}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.9) rotate(${n+60}deg);
  }
}
`;let Bp=null;const hL=`${B2}ms ease fadeScaleOut 0s 1 normal backwards`,mL=(e,t,n)=>`
@keyframes fadeScaleOut {
  0% {
    opacity: ${e};
    transform: translate(-50%,-50%) scale(${t}) rotate(${n}deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%,-50%) scale(0) rotate(${n}deg);
  }
}
`;let Gp=null;const q_=(e,{onDraw:t=Hl,onStart:n=Hl,onEnd:r=Hl,enableInitiator:i=F2,initiatorParentElement:a=document.body,longPressIndicatorParentElement:o=document.body,minDelay:l=Fp,minDist:u=I1,pointNorm:f=Hl}={})=>{let m=i,h=a,d=o,w=t,b=n,L=r,I=f;const y=document.createElement("div"),T=Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5);y.id=`lasso-initiator-${T}`,y.style.position="fixed",y.style.display="flex",y.style.justifyContent="center",y.style.alignItems="center",y.style.zIndex=99,y.style.width="4rem",y.style.height="4rem",y.style.borderRadius="4rem",y.style.opacity=.5,y.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)";const{longPress:v,longPressCircle:F,longPressCircleLeft:$,longPressCircleRight:ee,longPressEffect:_e}=G2();let se=!1,ot=!1,Ie=[],Fe=[],Ke,Je=!1,Qe=null,et=null,bt=null,nt=null,ve=null,Ve=null,Ge=null,Te=null,qe=null,Tt=null;const Mt=()=>{se=!1},jt=Ct=>{const{left:$t,top:Le}=e.getBoundingClientRect();return[Ct.clientX-$t,Ct.clientY-Le]};window.addEventListener("mouseup",Mt);const Qt=()=>{y.style.opacity=.5,y.style.transform="translate(-50%,-50%) scale(0) rotate(0deg)"},Ut=(Ct,$t)=>{const Le=getComputedStyle(Ct),at=+Le.opacity,ft=Le.transform.match(/([0-9.-]+)+/g),Oe=+ft[0],Rt=+ft[1],Bt=Math.sqrt(Oe*Oe+Rt*Rt);let dt=Math.atan2(Rt,Oe)*(180/Math.PI);return dt=$t&&dt<=0?360+dt:dt,{opacity:at,scale:Bt,rotate:dt}},Dt=Ct=>{if(!m||se)return;const $t=Ct.clientX,Le=Ct.clientY;y.style.top=`${Le}px`,y.style.left=`${$t}px`;const at=Ut(y),ft=at.opacity,Oe=at.scale,Rt=at.rotate;y.style.opacity=ft,y.style.transform=`translate(-50%,-50%) scale(${Oe}) rotate(${Rt}deg)`,y.style.animation="none",Nl().then(()=>{Bp!==null&&$r(Bp),Bp=Fr(dL(ft,Oe,Rt)),y.style.animation=fL,Nl().then(()=>{Qt()})})},Jt=()=>{const{opacity:Ct,scale:$t,rotate:Le}=Ut(y);y.style.opacity=Ct,y.style.transform=`translate(-50%,-50%) scale(${$t}) rotate(${Le}deg)`,y.style.animation="none",Nl(2).then(()=>{Gp!==null&&$r(Gp),Gp=Fr(mL(Ct,$t,Le)),y.style.animation=hL,Nl().then(()=>{Qt()})})},hn=(Ct,$t,{time:Le=Zd,extraTime:at=Jd,delay:ft=eh}={time:Zd,extraTime:Jd,delay:eh})=>{Je=!0;const Oe=getComputedStyle(v);v.style.color=Oe.color,v.style.top=`${$t}px`,v.style.left=`${Ct}px`,v.style.animation="none";const Rt=getComputedStyle(F);F.style.clipPath=Rt.clipPath,F.style.opacity=Rt.opacity,F.style.animation="none";const Bt=Ut(_e);_e.style.opacity=Bt.opacity,_e.style.transform=`scale(${Bt.scale})`,_e.style.animation="none";const dt=Ut($);$.style.transform=`rotate(${dt.rotate}deg)`,$.style.animation="none";const tn=Ut(ee);ee.style.transform=`rotate(${tn.rotate}deg)`,ee.style.animation="none",Nl().then(()=>{if(!Je)return;ve!==null&&$r(ve),nt!==null&&$r(nt),bt!==null&&$r(bt),et!==null&&$r(et),Qe!==null&&$r(Qe);const{rules:Ee,names:ze}=J2({time:Le,extraTime:at,delay:ft,currentColor:Oe.color||"currentcolor",targetColor:v.dataset.activeColor,effectOpacity:Bt.opacity||0,effectScale:Bt.scale||0,circleLeftRotation:dt.rotate||0,circleRightRotation:tn.rotate||0,circleClipPath:Rt.clipPath||"inset(0 0 0 50%)",circleOpacity:Rt.opacity||0});Qe=Fr(Ee.main),et=Fr(Ee.effect),bt=Fr(Ee.circleLeft),nt=Fr(Ee.circleRight),ve=Fr(Ee.circle),v.style.animation=ze.main,_e.style.animation=ze.effect,$.style.animation=ze.circleLeft,ee.style.animation=ze.circleRight,F.style.animation=ze.circle})},Sn=({time:Ct=th}={time:th})=>{if(!Je)return;Je=!1;const $t=getComputedStyle(v);v.style.color=$t.color,v.style.animation="none";const Le=getComputedStyle(F);F.style.clipPath=Le.clipPath,F.style.opacity=Le.opacity,F.style.animation="none";const at=Ut(_e);_e.style.opacity=at.opacity,_e.style.transform=`scale(${at.scale})`,_e.style.animation="none";const ft=Le.clipPath.slice(-2,-1)==="x",Oe=Ut($,ft);$.style.transform=`rotate(${Oe.rotate}deg)`,$.style.animation="none";const Rt=Ut(ee);ee.style.transform=`rotate(${Rt.rotate}deg)`,ee.style.animation="none",Nl().then(()=>{Tt!==null&&$r(Tt),qe!==null&&$r(qe),Te!==null&&$r(Te),Ge!==null&&$r(Ge),Ve!==null&&$r(Ve);const{rules:Bt,names:dt}=cL({time:Ct,currentColor:$t.color||"currentcolor",targetColor:v.dataset.color,effectOpacity:at.opacity||0,effectScale:at.scale||0,circleLeftRotation:Oe.rotate||0,circleRightRotation:Rt.rotate||0,circleClipPath:Le.clipPath||"inset(0px)",circleOpacity:Le.opacity||1});Ve=Fr(Bt.main),Ge=Fr(Bt.effect),Te=Fr(Bt.circleLeft),qe=Fr(Bt.circleRight),Tt=Fr(Bt.circle),v.style.animation=dt.main,_e.style.animation=dt.effect,$.style.animation=dt.circleLeft,ee.style.animation=dt.circleRight,F.style.animation=dt.circle})},qt=()=>{w(Ie,Fe)},It=Ct=>{if(Ke){if(gA(Ct[0],Ct[1],Ke[0],Ke[1])>I1){Ke=Ct;const Le=I(Ct);Ie.push(Le),Fe.push(Le[0],Le[1]),Ie.length>1&&qt()}}else{ot||(ot=!0,b()),Ke=Ct;const $t=I(Ct);Ie=[$t],Fe=[$t[0],$t[1]]}},mt=G_(It,Fp,Fp),yt=(Ct,$t)=>{const Le=jt(Ct);return $t?mt(Le):It(Le)},Et=()=>{Ie=[],Fe=[],Ke=void 0,qt()},_t=Ct=>{Dt(Ct)},Pt=()=>{se=!0,ot=!0,Et(),b()},Vt=()=>{Jt()},Ht=({merge:Ct=!1}={})=>{ot=!1;const $t=[...Ie],Le=[...Fe];return mt.cancel(),Et(),$t.length&&L($t,Le,{merge:Ct}),$t},wn=({onDraw:Ct=null,onStart:$t=null,onEnd:Le=null,enableInitiator:at=null,initiatorParentElement:ft=null,longPressIndicatorParentElement:Oe=null,minDelay:Rt=null,minDist:Bt=null,pointNorm:dt=null}={})=>{w=Su(Ct,w),b=Su($t,b),L=Su(Le,L),m=Su(at,m),I=Su(dt,I),ft!==null&&ft!==h&&(h.removeChild(y),ft.appendChild(y),h=ft),Oe!==null&&Oe!==d&&(d.removeChild(v),Oe.appendChild(v),d=Oe),m?(y.addEventListener("click",_t),y.addEventListener("mousedown",Pt),y.addEventListener("mouseleave",Vt)):(y.removeEventListener("mousedown",Pt),y.removeEventListener("mouseleave",Vt))},Yn=()=>{h.removeChild(y),d.removeChild(v),window.removeEventListener("mouseup",Mt),y.removeEventListener("click",_t),y.removeEventListener("mousedown",Pt),y.removeEventListener("mouseleave",Vt)},E=()=>Ct=>Jv(Ct,{clear:Et,destroy:Yn,end:Ht,extend:yt,set:wn,showInitiator:Dt,hideInitiator:Jt,showLongPressIndicator:hn,hideLongPressIndicator:Sn});return h.appendChild(y),d.appendChild(v),wn({onDraw:w,onStart:b,onEnd:L,enableInitiator:m,initiatorParentElement:h}),pA(w1("initiator",y),w1("longPressIndicator",v),E(),vA(q_))({})},pL=`
precision mediump float;

uniform sampler2D texture;

varying vec2 uv;

void main () {
  gl_FragColor = texture2D(texture, uv);
}
`,vL=`
precision mediump float;

uniform mat4 modelViewProjection;

attribute vec2 position;

varying vec2 uv;

void main () {
  uv = position;
  gl_Position = modelViewProjection * vec4(-1.0 + 2.0 * uv.x, 1.0 - 2.0 * uv.y, 0, 1);
}
`,gL=`
precision highp float;

varying vec4 color;
varying float finalPointSize;

float linearstep(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {
  vec2 c = gl_PointCoord * 2.0 - 1.0;
  float sdf = length(c) * finalPointSize;
  float alpha = linearstep(finalPointSize + 0.5, finalPointSize - 0.5, sdf);

  gl_FragColor = vec4(color.rgb, alpha * color.a);
}
`,yL=`precision highp float;

varying vec4 color;

void main() {
  gl_FragColor = color;
}
`,xL=e=>`
precision highp float;

uniform sampler2D colorTex;
uniform float colorTexRes;
uniform float colorTexEps;
uniform sampler2D stateTex;
uniform float stateTexRes;
uniform float stateTexEps;
uniform float devicePixelRatio;
uniform sampler2D encodingTex;
uniform float encodingTexRes;
uniform float encodingTexEps;
uniform float pointSizeExtra;
uniform float pointOpacityMax;
uniform float pointOpacityScale;
uniform float numPoints;
uniform float globalState;
uniform float isColoredByZ;
uniform float isColoredByW;
uniform float isOpacityByZ;
uniform float isOpacityByW;
uniform float isOpacityByDensity;
uniform float isSizedByZ;
uniform float isSizedByW;
uniform float colorMultiplicator;
uniform float opacityMultiplicator;
uniform float opacityDensity;
uniform float sizeMultiplicator;
uniform float numColorStates;
uniform float pointScale;
uniform mat4 modelViewProjection;

attribute vec2 stateIndex;

varying vec4 color;
varying float finalPointSize;

void main() {
  vec4 state = texture2D(stateTex, stateIndex);

  gl_Position = modelViewProjection * vec4(state.x, state.y, 0.0, 1.0);

  // Determine color index
  float colorIndexZ =  isColoredByZ * floor(state.z * colorMultiplicator);
  float colorIndexW =  isColoredByW * floor(state.w * colorMultiplicator);

  // Multiply by the number of color states per color
  // I.e., normal, active, hover, background, etc.
  float colorIndex = (colorIndexZ + colorIndexW) * numColorStates;

  // Half a "pixel" or "texel" in texture coordinates
  float colorLinearIndex = colorIndex + globalState;

  // Need to add cEps here to avoid floating point issue that can lead to
  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but
  // floor(3/3.0001) = 0!
  float colorRowIndex = floor((colorLinearIndex + colorTexEps) / colorTexRes);

  vec2 colorTexIndex = vec2(
    (colorLinearIndex / colorTexRes) - colorRowIndex + colorTexEps,
    colorRowIndex / colorTexRes + colorTexEps
  );

  color = texture2D(colorTex, colorTexIndex);

  // Retrieve point size
  float pointSizeIndexZ = isSizedByZ * floor(state.z * sizeMultiplicator);
  float pointSizeIndexW = isSizedByW * floor(state.w * sizeMultiplicator);
  float pointSizeIndex = pointSizeIndexZ + pointSizeIndexW;

  float pointSizeRowIndex = floor((pointSizeIndex + encodingTexEps) / encodingTexRes);
  vec2 pointSizeTexIndex = vec2(
    (pointSizeIndex / encodingTexRes) - pointSizeRowIndex + encodingTexEps,
    pointSizeRowIndex / encodingTexRes + encodingTexEps
  );
  float pointSize = texture2D(encodingTex, pointSizeTexIndex).x;

  // Retrieve opacity
  ${e===3?"":`
        if (isOpacityByDensity < 0.5) {
          float opacityIndexZ = isOpacityByZ * floor(state.z * opacityMultiplicator);
          float opacityIndexW = isOpacityByW * floor(state.w * opacityMultiplicator);
          float opacityIndex = opacityIndexZ + opacityIndexW;

          float opacityRowIndex = floor((opacityIndex + encodingTexEps) / encodingTexRes);
          vec2 opacityTexIndex = vec2(
            (opacityIndex / encodingTexRes) - opacityRowIndex + encodingTexEps,
            opacityRowIndex / encodingTexRes + encodingTexEps
          );
          color.a = texture2D(encodingTex, opacityTexIndex)[${1+e}];
        } else {
          color.a = min(1.0, opacityDensity + globalState);
        }
      `}

  color.a = min(pointOpacityMax, color.a) * pointOpacityScale;
  finalPointSize = (pointSize * pointScale) + pointSizeExtra;
  gl_PointSize = finalPointSize;
}
`,EL=`precision highp float;

uniform sampler2D startStateTex;
uniform sampler2D endStateTex;
uniform float t;

varying vec2 particleTextureIndex;

void main() {
  // Interpolate x, y, and value
  vec3 start = texture2D(startStateTex, particleTextureIndex).xyw;
  vec3 end = texture2D(endStateTex, particleTextureIndex).xyw;
  vec3 curr = start * (1.0 - t) + end * t;

  // The category cannot be interpolated
  float endCategory = texture2D(endStateTex, particleTextureIndex).z;

  gl_FragColor = vec4(curr.xy, endCategory, curr.z);
}`,_L=`precision highp float;

attribute vec2 position;
varying vec2 particleTextureIndex;

void main() {
  // map normalized device coords to texture coords
  particleTextureIndex = 0.5 * (1.0 + position);

  gl_Position = vec4(position, 0, 1);
}`,SL=function(){const t=(f,m,h,d,w)=>{const b=(d-m)*.5,L=(w-h)*.5;return(2*h-2*d+b+L)*f*f*f+(-3*h+3*d-2*b-L)*f*f+b*f+h},n=(f,m,h)=>{const d=h*f,w=Math.floor(d),b=d-w,L=m[Math.max(0,w-1)],I=m[w],y=m[Math.min(h,w+1)],T=m[Math.min(h,w+2)];return[t(b,L[0],I[0],y[0],T[0]),t(b,L[1],I[1],y[1],T[1])]},r=(f,m,h,d)=>(f-h)**2+(m-d)**2;/**
 * Douglas Peucker square segment distance
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} p - Point
 * @param {array} p1 - First boundary point
 * @param {array} p2 - Second boundary point
 * @return {number} Distance
 */const i=(f,m,h)=>{let d=m[0],w=m[1],b=h[0]-d,L=h[1]-w;if(b!==0||L!==0){const I=((f[0]-d)*b+(f[1]-w)*L)/(b*b+L*L);I>1?(d=h[0],w=h[1]):I>0&&(d+=b*I,w+=L*I)}return b=f[0]-d,L=f[1]-w,b*b+L*L};/**
 * Douglas Peucker step function
 * Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param   {[type]}  points  [description]
 * @param   {[type]}  first  [description]
 * @param   {[type]}  last  [description]
 * @param   {[type]}  tolerance  [description]
 * @param   {[type]}  simplified  [description]
 * @return  {[type]}  [description]
 */const a=(f,m,h,d,w)=>{let b=d,L;for(let I=m+1;I<h;I++){const y=i(f[I],f[m],f[h]);y>b&&(L=I,b=y)}b>d&&(L-m>1&&a(f,m,L,d,w),w.push(f[L]),h-L>1&&a(f,L,h,d,w))};/**
 * Douglas Peucker. Implementation from https://github.com/mourner/simplify-js
 * @author Vladimir Agafonkin
 * @copyright Vladimir Agafonkin 2013
 * @license BSD
 * @param {array} points - List of points to be simplified
 * @param {number} tolerance - Tolerance level. Points below this distance level will be ignored
 * @return {array} Simplified point list
 */const o=(f,m)=>{const h=f.length-1,d=[f[0]];return a(f,0,h,m,d),d.push(f[h]),d},l=(f,{maxIntPointsPerSegment:m=100,tolerance:h=.002}={})=>{const d=f.length,w=d-1,b=w*m+1,L=h**2;let I=[],y;for(let T=0;T<d-1;T++){let v=[f[T].slice(0,2)];y=f[T];for(let F=1;F<m;F++){const $=(T*m+F)/b,ee=n($,f,w);r(y[0],y[1],ee[0],ee[1])>L&&(v.push(ee),y=ee)}v.push(f[T+1]),v=o(v,L),I=I.concat(v.slice(0,v.length-1))}return I.push(f[f.length-1].slice(0,2)),I.flat()},u=f=>{const m={},h=!Number.isNaN(+f[0][5]);return f.forEach(d=>{const w=d[4];m[w]||(m[w]=[]),h?m[w][d[5]]=d:m[w].push(d)}),Object.entries(m).forEach(d=>{m[d[0]]=d[1].filter(w=>w),m[d[0]].reference=d[1][0]}),m};self.onmessage=function(m){(m.data.points?+m.data.points.length:0)||self.postMessage({error:new Error("No points provided")}),m.data.points;const d=u(m.data.points);self.postMessage({points:Object.entries(d).reduce((w,b)=>(w[b[0]]=l(b[1],m.data.options),w[b[0]].reference=b[1].reference,w),{})})}},wL=(e,t={tolerance:.002,maxIntPointsPerSegment:100})=>new Promise((n,r)=>{const i=yA(SL);i.onmessage=a=>{a.data.error?r(a.data.error):n(a.data.points),i.terminate()},i.postMessage({points:e,options:t})});var TL="1.8.5";const zp={showRecticle:"showReticle",recticleColor:"reticleColor"},Up=e=>{Object.keys(e).filter(t=>zp[t]).forEach(t=>{console.warn(`regl-scatterplot: the "${t}" property is deprecated. Please use "${zp[t]}" instead.`),e[zp[t]]=e[t],delete e[t]})},Br=(e,t,{allowSegment:n=!1,allowDensity:r=!1}={})=>X_.has(e)?"valueZ":Y_.has(e)?"valueW":e==="segment"?n?"segment":t:e==="density"&&r?"density":t,Vp=e=>{switch(e){case"valueZ":return 2;case"valueW":return 3;default:return null}},bL=(e={})=>{const t=IC({async:!e.syncEvents,caseInsensitive:!0}),n=new Float32Array(16),r=new Float32Array(16),i=[0,0];Up(e);let{renderer:a,backgroundColor:o=n2,backgroundImage:l=f2,canvas:u=document.createElement("canvas"),colorBy:f=_u,deselectOnDblClick:m=m2,deselectOnEscape:h=p2,lassoColor:d=AA,lassoLineWidth:w=LA,lassoMinDelay:b=OA,lassoMinDist:L=NA,lassoClearEvent:I=PA,lassoInitiator:y=RA,lassoInitiatorParentElement:T=document.body,lassoOnLongPress:v=kA,lassoLongPressTime:F=Zd,lassoLongPressAfterEffectTime:$=Jd,lassoLongPressEffectDelay:ee=eh,lassoLongPressRevertEffectTime:_e=th,keyMap:se=MA,mouseMode:ot=TA,showReticle:Ie=d2,reticleColor:Fe=h2,pointColor:Ke=JA,pointColorActive:Je=e2,pointColorHover:Qe=t2,showPointConnections:et=v2,pointConnectionColor:bt=r2,pointConnectionColorActive:nt=i2,pointConnectionColorHover:ve=a2,pointConnectionColorBy:Ve=Mp,pointConnectionOpacity:Ge=WA,pointConnectionOpacityBy:Te=Ip,pointConnectionOpacityActive:qe=XA,pointConnectionSize:Tt=VA,pointConnectionSizeActive:Mt=HA,pointConnectionSizeBy:jt=kp,pointConnectionMaxIntPointsPerSegment:Qt=g2,pointConnectionTolerance:Ut=y2,pointSize:Dt=GA,pointSizeSelected:Jt=zA,pointSizeMouseDetection:hn=x2,pointOutlineWidth:Sn=UA,opacity:qt=xi,opacityBy:It=Dp,opacityByDensityFill:mt=QA,opacityInactiveMax:yt=qA,opacityInactiveScale:Et=ZA,sizeBy:_t=Pp,height:Pt=$A,width:Vt=FA}=e,Ht=Vt===xi?1:Vt,wn=Pt===xi?1:Pt;const{performanceMode:Yn=E2,opacityByDensityDebounceTime:E=KA}=e;a||(a=j2({regl:e.regl,gamma:e.gamma})),o=mr(o,!0),d=mr(d,!0),Fe=mr(Fe,!0);let Ct=!1,$t=k1(o),Le,at,ft=!1,Oe=null,Rt=[0,0],Bt=-1,dt=[];const tn=new Set,Ee=new Set;let ze=!1;const At=new Set;let nn=0,Z=0,gt=!1,mn=[],ln,ii,qi=e.aspectRatio||jA,Zi,Ji,ea,vn,_r,ps,Qa,Ka,vs,Yo=P1(se),ta,qa,na,Qo=!1,wt=!0,Ci=!1,Ko;Ke=Ta(Ke)?[...Ke]:[Ke],Je=Ta(Je)?[...Je]:[Je],Qe=Ta(Qe)?[...Qe]:[Qe],Ke=Ke.map(s=>mr(s,!0)),Je=Je.map(s=>mr(s,!0)),Qe=Qe.map(s=>mr(s,!0)),qt=!Array.isArray(qt)&&Number.isNaN(+qt)?Ke[0][3]:qt,qt=Sa(qt,wa,{minLength:1})?[...qt]:[qt],Dt=Sa(Dt,wa,{minLength:1})?[...Dt]:[Dt];let mc=Np/Dt[0];bt==="inherit"?bt=[...Ke]:(bt=Ta(bt)?[...bt]:[bt],bt=bt.map(s=>mr(s,!0))),nt==="inherit"?nt=[...Je]:(nt=Ta(nt)?[...nt]:[nt],nt=nt.map(s=>mr(s,!0))),ve==="inherit"?ve=[...Qe]:(ve=Ta(ve)?[...ve]:[ve],ve=ve.map(s=>mr(s,!0))),Ge==="inherit"?Ge=[...qt]:Ge=Sa(Ge,wa,{minLength:1})?[...Ge]:[Ge],Tt==="inherit"?Tt=[...Dt]:Tt=Sa(Tt,wa,{minLength:1})?[...Tt]:[Tt],f=Br(f,_u),It=Br(It,Dp,{allowDensity:!0}),_t=Br(_t,Pp),Ve=Br(Ve,Mp,{allowSegment:!0}),Te=Br(Te,Ip,{allowSegment:!0}),jt=Br(jt,kp,{allowSegment:!0});let ai,oi,li,pc,Sr=0,gs=0,Za,ys,Ja,qo,Zo,Jo,el,Ai=!1,eo=null,xs,Es,vc=Ie,ra,ia=0,tl,aa=0,_s=!1,cr=!1,si=!1,ui=Pl,Li=Pl,Dn,Dr=!1,$n=e.xScale||null,Tn=e.yScale||null,oa=0,nl=0,rl=0,il=0;$n&&(oa=$n.domain()[0],nl=$n.domain()[1]-$n.domain()[0],$n.range([0,Ht])),Tn&&(rl=Tn.domain()[0],il=Tn.domain()[1]-Tn.domain()[0],Tn.range([wn,0]));const gc=s=>-1+s/Ht*2,fr=s=>1+s/wn*-2,rr=()=>[gc(i[0]),fr(i[1])],wr=(s,M)=>{const V=[s,M,1,1],oe=V0(n,or(n,Zi,or(n,Le.view,ea)));return wd(V,V,oe),V.slice(0,2)},yc=(s=0)=>{const M=lo(),oe=(qa[1]-na[1])/u.height;return(vs*M+s)*oe},Ss=()=>ze?ln.points.filter((s,M)=>At.has(M)):ln.points,al=(s,M,V,oe)=>{const be=ln.range(s,M,V,oe);return ze?be.filter($e=>At.has($e)):be},ws=()=>{const[s,M]=rr(),[V,oe]=wr(s,M),be=yc(4),$e=al(V-be,oe-be,V+be,oe+be);let Xe=be,xt=-1;return $e.forEach(Wt=>{const[Gt,bn]=ln.points[Wt],Zt=jp(Gt,bn,V,oe);Zt<Xe&&(Xe=Zt,xt=Wt)}),xt},Ih=(s,M)=>{mn=s,at.setPoints(M),t.publish("lassoExtend",{coordinates:s})},Dh=s=>{const M=b2(s);if(!C2(M))return[];const V=al(...M),oe=[];return V.forEach(be=>{P2(s,ln.points[be])&&oe.push(be)}),oe},la=()=>{mn=[],at&&at.clear()},to=s=>s&&s.length>4,Ri=(s,M)=>{if(ps||!et||!to(ln.points[s[0]]))return;const V=M===0,oe=M===1?Xe=>Ee.add(Xe):Hl,be=Object.keys(s.reduce((Xe,xt)=>{const Wt=ln.points[xt],bn=Array.isArray(Wt[4])?Wt[4][0]:Wt[4];return Xe[bn]=!0,Xe},{})),$e=vn.getData().opacities;be.filter(Xe=>!Ee.has(+Xe)).forEach(Xe=>{const xt=_r[Xe][0],Wt=_r[Xe][2],Gt=_r[Xe][3],bn=xt*4+Gt*2,Zt=bn+Wt*2+4;$e.__original__===void 0&&($e.__original__=$e.slice());for(let zt=bn;zt<Zt;zt++)$e[zt]=V?$e.__original__[zt]:qe;oe(Xe)}),vn.getBuffer().opacities.subdata($e,0)},ol=s=>[s%Sr/Sr+gs,Math.floor(s/Sr)/Sr+gs],Mh=s=>ze&&!At.has(s),ll=({preventEvent:s=!1}={})=>{I===W0&&la(),dt.length&&(s||t.publish("deselect"),Ee.clear(),Ri(dt,0),dt=[],tn.clear(),wt=!0)},sa=(s,{merge:M=!1,preventEvent:V=!1}={})=>{const oe=Array.isArray(s)?s:[s],be=[...dt];if(M){if(dt=mA(dt,oe),be.length===dt.length){wt=!0;return}}else{if(dt&&dt.length&&Ri(dt,0),be.length>0&&oe.length===0){ll({preventEvent:V});return}dt=oe}if(dA(be,dt)){wt=!0;return}const $e=[];tn.clear(),Ee.clear();for(let Xe=dt.length-1;Xe>=0;Xe--){const xt=dt[Xe];if(xt<0||xt>=nn||Mh(xt)){dt.splice(Xe,1);continue}tn.add(xt),$e.push.apply($e,ol(xt))}ys({usage:"dynamic",type:"float",data:$e}),Ri(dt,1),V||t.publish("select",{points:dt}),wt=!0},no=(s,{showReticleOnce:M=!1,preventEvent:V=!1}={})=>{let oe=!1;if(s>=0&&s<nn){oe=!0;const be=Dn,$e=s!==Dn;+be>=0&&$e&&!tn.has(be)&&Ri([be],0),Dn=s,Ja.subdata(ol(s)),tn.has(s)||Ri([s],2),$e&&!V&&t.publish("pointover",Dn)}else oe=+Dn>=0,oe&&(tn.has(Dn)||Ri([Dn],0),V||t.publish("pointout",Dn)),Dn=void 0;oe&&(wt=!0,Ci=M)},Ts=s=>{const M=u.getBoundingClientRect();return i[0]=s.clientX-M.left,i[1]=s.clientY-M.top,[...i]},Rn=q_(u,{onStart:()=>{Le.config({isFixed:!0}),ft=!0,gt=!0,la(),Bt>=0&&(clearTimeout(Bt),Bt=-1),t.publish("lassoStart")},onDraw:Ih,onEnd:(s,M,{merge:V=!1}={})=>{Le.config({isFixed:!1}),mn=[...s];const oe=Dh(M);sa(oe,{merge:V}),t.publish("lassoEnd",{coordinates:mn}),I===tg&&la()},enableInitiator:y,initiatorParentElement:T,pointNorm:([s,M])=>wr(gc(s),fr(M))}),sl=()=>ot===U_,ro=(s,M)=>{switch(Yo[M]){case rg:return s.altKey;case ig:return s.metaKey;case H_:return s.ctrlKey;case W_:return s.metaKey;case ag:return s.shiftKey;default:return!1}},xc=s=>document.elementsFromPoint(s.clientX,s.clientY).some(M=>M===u),bs=s=>{!cr||s.buttons!==1||(ft=!0,Oe=performance.now(),Rt=Ts(s),gt=sl()||ro(s,ng),!gt&&v&&(Rn.showLongPressIndicator(s.clientX,s.clientY,{time:F,extraTime:$,delay:ee}),Bt=setTimeout(()=>{Bt=-1,gt=!0},F)))},Cs=s=>{cr&&(ft=!1,Bt>=0&&(clearTimeout(Bt),Bt=-1),gt&&(s.preventDefault(),gt=!1,Rn.end({merge:ro(s,rh)})),v&&Rn.hideLongPressIndicator({time:_e}))},ul=s=>{if(!cr)return;s.preventDefault();const M=Ts(s);if(jp(...M,...Rt)>=L)return;const V=performance.now()-Oe;if(!y||V<S2){const oe=ws();oe>=0?(dt.length&&I===W0&&la(),sa([oe],{merge:ro(s,rh)})):ta||(ta=setTimeout(()=>{ta=null,Rn.showInitiator(s)},_2))}},cl=s=>{Rn.hideInitiator(),ta&&(clearTimeout(ta),ta=null),m&&(s.preventDefault(),ll())},Xr=s=>{if(si||(Dr=xc(s),si=!0),!cr||!Dr&&!ft)return;const M=Ts(s),oe=jp(...M,...Rt)>=L;Dr&&!gt&&no(ws()),gt?(s.preventDefault(),Rn.extend(s,!0)):ft&&v&&oe&&Rn.hideLongPressIndicator({time:_e}),Bt>=0&&oe&&(clearTimeout(Bt),Bt=-1),ft&&(wt=!0)},io=()=>{Dn=void 0,Dr=!1,si=!1,cr&&(+Dn>=0&&!tn.has(Dn)&&Ri([Dn],0),Cs(),wt=!0)},fl=()=>{const s=Math.max(Dt.length,qt.length);aa=Math.max(2,Math.ceil(Math.sqrt(s)));const M=new Float32Array(aa**2*4);for(let V=0;V<s;V++){M[V*4]=Dt[V]||0,M[V*4+1]=Math.min(1,qt[V]||0);const oe=Number((Je[V]||Je[0])[3]);M[V*4+2]=Math.min(1,Number.isNaN(oe)?1:oe);const be=Number((Qe[V]||Qe[0])[3]);M[V*4+3]=Math.min(1,Number.isNaN(be)?1:be)}return a.regl.texture({data:M,shape:[aa,aa,4],type:"float"})},As=(s=Ke,M=Je,V=Qe)=>{const oe=s.length,be=M.length,$e=V.length,Xe=[];if(oe===be&&be===$e)for(let xt=0;xt<oe;xt++)Xe.push(s[xt],M[xt],V[xt],o);else for(let xt=0;xt<oe;xt++){const Wt=[s[xt][0],s[xt][1],s[xt][2],1],Gt=f===_u?M[0]:Wt,bn=f===_u?V[0]:Wt;Xe.push(s[xt],Gt,bn,o)}return Xe},Ls=()=>{const s=As(),M=s.length;ia=Math.max(2,Math.ceil(Math.sqrt(M)));const V=new Float32Array(ia**2*4);return s.forEach((oe,be)=>{V[be*4]=oe[0],V[be*4+1]=oe[1],V[be*4+2]=oe[2],V[be*4+3]=oe[3]}),a.regl.texture({data:V,shape:[ia,ia,4],type:"float"})},jh=(s,M)=>{Ji[0]=s/ii,Ji[5]=M},Rs=()=>{ii=Ht/wn,Zi=Sd([],[1/ii,1,1]),Ji=Sd([],[1/ii,1,1]),ea=Sd([],[qi,1,1])},Fh=s=>{+s<=0||(qi=s)},Os=(s,M)=>V=>{if(!V||!V.length)return;const be=[...s()];let $e=Ta(V)?V:[V];$e=$e.map(Xe=>mr(Xe,!0)),ra&&ra.destroy();try{M($e),ra=Ls()}catch{console.error("Invalid colors. Switching back to default colors."),M(be),ra=Ls()}},$h=Os(()=>Ke,s=>{Ke=s}),Bh=Os(()=>Je,s=>{Je=s}),ci=Os(()=>Qe,s=>{Qe=s}),Gh=()=>{const s=wr(-1,-1),M=wr(1,1),V=(s[0]+1)/2,oe=(M[0]+1)/2,be=(s[1]+1)/2,$e=(M[1]+1)/2,Xe=[oa+V*nl,oa+oe*nl],xt=[rl+be*il,rl+$e*il];return[Xe,xt]},Oi=()=>{if(!$n&&!Tn)return;const[s,M]=Gh();$n&&$n.domain(s),Tn&&Tn.domain(M)},Ni=s=>{wn=Math.max(1,s),u.height=Math.floor(wn*window.devicePixelRatio),Tn&&(Tn.range([wn,0]),Oi())},zh=s=>{if(s===xi){Pt=s,u.style.height="100%",window.requestAnimationFrame(()=>{u&&Ni(u.getBoundingClientRect().height)});return}!+s||+s<=0||(Pt=+s,Ni(Pt),u.style.height=`${Pt}px`)},fi=()=>{vs=hn,hn===xi&&(vs=Array.isArray(Dt)?hA(Dt):Dt)},Ec=s=>{Sa(s,wa,{minLength:1})&&(Dt=[...s]),ed(+s)&&(Dt=[+s]),mc=Np/Dt[0],tl=fl(),fi()},ca=s=>{!+s||+s<0||(Jt=+s)},_c=s=>{!+s||+s<0||(Sn=+s)},Yr=s=>{Ht=Math.max(1,s),u.width=Math.floor(Ht*window.devicePixelRatio),$n&&($n.range([0,Ht]),Oi())},Ns=s=>{if(s===xi){Vt=s,u.style.width="100%",window.requestAnimationFrame(()=>{u&&Yr(u.getBoundingClientRect().width)});return}!+s||+s<=0||(Vt=+s,Yr(Vt),u.style.width=`${Ht}px`)},Uh=s=>{Sa(s,wa,{minLength:1})&&(qt=[...s]),ed(+s)&&(qt=[+s]),tl=fl()},Ps=s=>{switch(s){case"valueZ":return ui;case"valueW":return Li;default:return null}},ks=(s,M)=>{switch(s){case gi:return V=>Math.round(V*(M.length-1));case Pl:default:return Hl}},Sc=s=>{f=Br(s,_u)},Vh=s=>{It=Br(s,Dp,{allowDensity:!0})},Hh=s=>{_t=Br(s,Pp)},wc=s=>{Ve=Br(s,Mp,{allowSegment:!0})},an=s=>{Te=Br(s,Ip,{allowSegment:!0})},Tc=s=>{jt=Br(s,kp,{allowSegment:!0})},Wh=()=>[u.width,u.height],Mr=()=>l,Is=()=>ra,dl=()=>ia,Pi=()=>.5/ia,Ds=()=>window.devicePixelRatio,hl=()=>Za,ki=()=>ys,ml=()=>tl,bc=()=>aa,Ms=()=>.5/aa,js=()=>0,Xh=()=>li||ai,Yh=()=>Sr,Qh=()=>.5/Sr,Cc=()=>Ji,pl=()=>Le.view,ao=()=>ea,oo=()=>or(r,Ji,or(r,Le.view,ea)),lo=()=>Le.scaling[0]>1?Math.asinh(td(1,Le.scaling[0]))/Math.asinh(1)*window.devicePixelRatio:td(mc,Le.scaling[0])*window.devicePixelRatio,fa=()=>ze?At.size:nn,Ii=()=>dt.length,Fs=()=>Ii()>0?yt:1,$s=()=>Ii()>0?Et:1,Bs=()=>+(f==="valueZ"),Ac=()=>+(f==="valueW"),Lc=()=>+(It==="valueZ"),Rc=()=>+(It==="valueW"),Oc=()=>+(It==="density"),Nc=()=>+(_t==="valueZ"),Pc=()=>+(_t==="valueW"),kc=()=>f==="valueZ"?ui===gi?Ke.length-1:1:Li===gi?Ke.length-1:1,Ic=()=>It==="valueZ"?ui===gi?qt.length-1:1:Li===gi?qt.length-1:1,da=()=>_t==="valueZ"?ui===gi?Dt.length-1:1:Li===gi?Dt.length-1:1,Gs=s=>{if(It!=="density")return 1;const M=lo(),V=Dt[0]*M,oe=2/(2/Le.view[0])*(2/(2/Le.view[5])),be=s.viewportHeight,$e=s.viewportWidth;let Xe=mt*$e*be/(Z*V*V)*N1(1,oe);Xe*=Yn?1:1/(.25*Math.PI);const xt=td(Np,V)+.5;return Xe*=(V/xt)**2,N1(1,td(0,Xe))},zs=a.regl({framebuffer:()=>pc,vert:_L,frag:EL,attributes:{position:[-4,0,4,4,4,-4]},uniforms:{startStateTex:()=>oi,endStateTex:()=>ai,t:(s,M)=>M.t},count:3}),Tr=(s,M,V,oe=xA,be=Fs,$e=$s)=>a.regl({frag:Yn?yL:gL,vert:xL(oe),blend:{enable:!Yn,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:V,size:2}},uniforms:{resolution:Wh,modelViewProjection:oo,devicePixelRatio:Ds,pointScale:lo,encodingTex:ml,encodingTexRes:bc,encodingTexEps:Ms,pointOpacityMax:be,pointOpacityScale:$e,pointSizeExtra:s,globalState:oe,colorTex:Is,colorTexRes:dl,colorTexEps:Pi,stateTex:Xh,stateTexRes:Yh,stateTexEps:Qh,isColoredByZ:Bs,isColoredByW:Ac,isOpacityByZ:Lc,isOpacityByW:Rc,isOpacityByDensity:Oc,isSizedByZ:Nc,isSizedByW:Pc,colorMultiplicator:kc,opacityMultiplicator:Ic,opacityDensity:Gs,sizeMultiplicator:da,numColorStates:_A},count:M,primitive:"points"}),Kh=Tr(js,fa,hl),qh=Tr(js,()=>1,()=>Ja,EA,()=>1,()=>1),Zh=Tr(()=>(Jt+Sn*2)*window.devicePixelRatio,Ii,ki,Op,()=>1,()=>1),Us=Tr(()=>(Jt+Sn)*window.devicePixelRatio,Ii,ki,T1,()=>1,()=>1),Jh=Tr(()=>Jt*window.devicePixelRatio,Ii,ki,Op,()=>1,()=>1),em=()=>{Zh(),Us(),Jh()},tm=a.regl({frag:pL,vert:vL,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{modelViewProjection:oo,texture:Mr},count:6}),Vs=a.regl({vert:`
      precision mediump float;
      uniform mat4 modelViewProjection;
      attribute vec2 position;
      void main () {
        gl_Position = modelViewProjection * vec4(position, 0, 1);
      }`,frag:`
      precision mediump float;
      uniform vec4 color;
      void main () {
        gl_FragColor = vec4(color.rgb, 0.2);
      }`,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},attributes:{position:()=>mn},uniforms:{modelViewProjection:oo,color:()=>d},elements:()=>Array.from({length:mn.length-2},(s,M)=>[0,M+1,M+2])}),nm=()=>{if(!(Dn>=0))return;const[s,M]=ln.points[Dn].slice(0,2),V=[s,M,0,1];or(n,Ji,or(n,Le.view,ea)),wd(V,V,n),Qa.setPoints([-1,V[1],1,V[1]]),Ka.setPoints([V[0],1,V[0],-1]),Qa.draw(),Ka.draw(),Tr(()=>(Jt+Sn*2)*window.devicePixelRatio,()=>1,Ja,Op)(),Tr(()=>(Jt+Sn)*window.devicePixelRatio,()=>1,Ja,T1)()},vl=s=>{const M=new Float32Array(s*2);let V=0;for(let oe=0;oe<s;++oe){const be=ol(oe);M[V]=be[0],M[V+1]=be[1],V+=2}return M},Hs=(s,M={})=>{const V=s.length;Sr=Math.max(2,Math.ceil(Math.sqrt(V))),gs=.5/Sr;const oe=new Float32Array(Sr**2*4);let be=!0,$e=!0,Xe=0,xt=0,Wt=0;for(let Gt=0;Gt<V;++Gt)Xe=Gt*4,oe[Xe]=s[Gt][0],oe[Xe+1]=s[Gt][1],xt=s[Gt][2]||0,Wt=s[Gt][3]||0,oe[Xe+2]=xt,oe[Xe+3]=Wt,be&&(be=Number.isInteger(xt)),$e&&($e=Number.isInteger(Wt));return M.z&&A1.includes(M.z)?ui=M.z:ui=be?Pl:gi,M.w&&A1.includes(M.w)?Li=M.w:Li=$e?Pl:gi,a.regl.texture({data:oe,shape:[Sr,Sr,4],type:"float"})},Dc=(s,M={})=>{if(!ai)return!1;if(Ai){const V=oi;oi=li,V.destroy()}else oi=ai;return li=Hs(s,M),pc=a.regl.framebuffer({color:li,depth:!1,stencil:!1}),ai=void 0,!0},Ws=()=>!!(oi&&li),rm=()=>{oi&&(oi.destroy(),oi=void 0),li&&(li.destroy(),li=void 0)},so=(s,M={})=>{cr=!1,nn=s.length,Z=nn,ai&&ai.destroy(),ai=Hs(s,M),Za({usage:"static",type:"float",data:vl(nn)}),ln=new ZC(s,V=>V[0],V=>V[1],16),cr=!0},Mc=(s,M)=>{qo=Le.target,Zo=s,Jo=Le.distance[0],el=M},im=()=>qo!==void 0&&Zo!==void 0&&Jo!==void 0&&el!==void 0,am=()=>{qo=void 0,Zo=void 0,Jo=void 0,el=void 0},om=s=>{const M=Ve==="inherit"?f:Ve;if(M==="segment"){const V=bt.length-1;return V<1?[]:s.reduce((oe,be,$e)=>{let Xe=0;const xt=[];for(let Gt=2;Gt<be.length;Gt+=2){const bn=Math.sqrt((be[Gt-2]-be[Gt])**2+(be[Gt-1]-be[Gt+1])**2);xt.push(bn),Xe+=bn}oe[$e]=[0];let Wt=0;for(let Gt=0;Gt<be.length/2-1;Gt++)Wt+=xt[Gt],oe[$e].push(Math.floor(Wt/Xe*V)*4);return oe},[])}if(M){const V=Vp(M),oe=ks(Ps(M),Ve==="inherit"?Ke:bt);return _r.reduce((be,[$e,Xe])=>(be[$e]=oe(Xe[V])*4,be),[])}return Array(_r.length).fill(0)},lm=()=>{const s=Te==="inherit"?It:Te;if(s==="segment"){const M=Ge.length-1;return M<1?[]:_r.reduce((V,[oe,be,$e])=>(V[oe]=S1($e,Xe=>Ge[Math.floor(Xe/($e-1)*M)]),V),[])}if(s){const M=Vp(s),V=Te==="inherit"?qt:Ge,oe=ks(Ps(s),V);return _r.reduce((be,[$e,Xe])=>(be[$e]=V[oe(Xe[M])],be),[])}},sm=()=>{const s=jt==="inherit"?_t:jt;if(s==="segment"){const M=Tt.length-1;return M<1?[]:_r.reduce((V,[oe,be,$e])=>(V[oe]=S1($e,Xe=>Tt[Math.floor(Xe/($e-1)*M)]),V),[])}if(s){const M=Vp(s),V=jt==="inherit"?Dt:Tt,oe=ks(Ps(s),V);return _r.reduce((be,[$e,Xe])=>(be[$e]=V[oe(Xe[M])],be),[])}},um=s=>{_r=[];let M=0;Object.keys(s).forEach((V,oe)=>{_r[V]=[oe,s[V].reference,s[V].length/2,M],M+=s[V].length/2})},ha=s=>new Promise(M=>{vn.setPoints([]),!s||!s.length?M():(ps=!0,wL(s,{maxIntPointsPerSegment:Qt,tolerance:Ut}).then(V=>{um(V);const oe=Object.values(V);vn.setPoints(oe.length===1?oe[0]:oe,{colorIndices:om(oe),opacities:lm(),widths:sm()}),ps=!1,M()}))}),uo=({preventEvent:s=!1}={})=>(ze=!1,At.clear(),Za.subdata(vl(nn)),new Promise(M=>{const V=()=>{t.subscribe("draw",()=>{s||t.publish("unfilter"),M()},1),wt=!0};et||to(ln.points[0])?ha(Ss()).then(()=>{s||t.publish("pointConnectionsDraw"),V()}):V()})),jc=(s,{preventEvent:M=!1}={})=>{const V=Array.isArray(s)?s:[s];ze=!0,At.clear();const oe=[],be=[];for(let $e=V.length-1;$e>=0;$e--){const Xe=V[$e];if(Xe<0||Xe>=nn){V.splice($e,1);continue}At.add(Xe),oe.push.apply(oe,ol(Xe)),tn.has(Xe)&&be.push(Xe)}return Za.subdata(oe),sa(be,{preventEvent:M}),At.has(Dn)||no(-1,{preventEvent:M}),new Promise($e=>{const Xe=()=>{t.subscribe("draw",()=>{M||t.publish("filter",{points:V}),$e()},1),wt=!0};et||to(ln.points[0])?ha(Ss()).then(()=>{M||t.publish("pointConnectionsDraw"),sa(be,{preventEvent:M}),Xe()}):Xe()})},co=()=>al(na[0],na[1],qa[0],qa[1]),ma=G_(()=>{Z=co().length},E),Fc=s=>{const[M,V]=qo,[oe,be]=Zo,$e=1-s,Xe=M*$e+oe*s,xt=V*$e+be*s,Wt=Jo*$e+el*s;Le.lookAt([Xe,xt],Wt)},$c=()=>Ws(),Bc=()=>im(),Gc=(s,M)=>{eo||(eo=performance.now());const V=performance.now()-eo,oe=M2(M(V/s),0,1);return $c()&&zs({t:oe}),Bc()&&Fc(oe),V<s},zc=()=>{Ai=!1,eo=null,xs=void 0,Es=void 0,Ie=vc,rm(),am(),t.publish("transitionEnd")},gl=({duration:s=500,easing:M=C1})=>{Ai&&t.publish("transitionEnd"),Ai=!0,eo=null,xs=s,Es=X0(M)?bA[M]||C1:M,vc=Ie,Ie=!1,t.publish("transitionStart")},cm=s=>new Promise((M,V)=>{if(!s||Array.isArray(s))M(s);else{const oe=Array.isArray(s.x)||ArrayBuffer.isView(s.x)?s.x.length:0,be=(Array.isArray(s.x)||ArrayBuffer.isView(s.x))&&(Zt=>s.x[Zt]),$e=(Array.isArray(s.y)||ArrayBuffer.isView(s.y))&&(Zt=>s.y[Zt]),Xe=(Array.isArray(s.line)||ArrayBuffer.isView(s.line))&&(Zt=>s.line[Zt]),xt=(Array.isArray(s.lineOrder)||ArrayBuffer.isView(s.lineOrder))&&(Zt=>s.lineOrder[Zt]),Wt=Object.keys(s),Gt=(()=>{const Zt=Wt.find(zt=>X_.has(zt));return Zt&&(Array.isArray(s[Zt])||ArrayBuffer.isView(s[Zt]))&&(zt=>s[Zt][zt])})(),bn=(()=>{const Zt=Wt.find(zt=>Y_.has(zt));return Zt&&(Array.isArray(s[Zt])||ArrayBuffer.isView(s[Zt]))&&(zt=>s[Zt][zt])})();be&&$e&&Gt&&bn&&Xe&&xt?M(s.x.map((Zt,zt)=>[Zt,$e(zt),Gt(zt),bn(zt),Xe(zt),xt(zt)])):be&&$e&&Gt&&bn&&Xe?M(Array.from({length:oe},(Zt,zt)=>[be(zt),$e(zt),Gt(zt),bn(zt),Xe(zt)])):be&&$e&&Gt&&bn?M(Array.from({length:oe},(Zt,zt)=>[be(zt),$e(zt),Gt(zt),bn(zt)])):be&&$e&&Gt?M(Array.from({length:oe},(Zt,zt)=>[be(zt),$e(zt),Gt(zt)])):be&&$e?M(Array.from({length:oe},(Zt,zt)=>[be(zt),$e(zt)])):V(new Error("You need to specify at least x and y"))}}),pa=(s,M={})=>Ct?Promise.reject(new Error("The instance was already destroyed")):cm(s).then(V=>new Promise(oe=>{if(Ct){oe();return}let be=!1;(!M.preventFilterReset||(V==null?void 0:V.length)!==nn)&&(ze=!1,At.clear());const $e=V&&to(V[0])&&(et||M.showPointConnectionsOnce),{zDataType:Xe,wDataType:xt}=M;V&&(M.transition&&(V.length===nn?be=Dc(V,{z:Xe,w:xt}):console.warn("Cannot transition! The number of points between the previous and current draw call must be identical.")),so(V,{z:Xe,w:xt}),M.hover!==void 0&&no(M.hover,{preventEvent:!0}),M.select!==void 0&&sa(M.select,{preventEvent:!0}),M.filter!==void 0&&jc(M.filter,{preventEvent:!0}),$e&&ha(V).then(()=>{t.publish("pointConnectionsDraw"),wt=!0,Ci=M.showReticleOnce})),M.transition&&be?($e?Promise.all([new Promise(Wt=>{t.subscribe("transitionEnd",()=>{wt=!0,Ci=M.showReticleOnce,Wt()},1)}),new Promise(Wt=>{t.subscribe("pointConnectionsDraw",Wt,1)})]).then(oe):t.subscribe("transitionEnd",()=>{wt=!0,Ci=M.showReticleOnce,oe()},1),gl({duration:M.transitionDuration,easing:M.transitionEasing})):($e?Promise.all([new Promise(Wt=>{t.subscribe("draw",Wt,1)}),new Promise(Wt=>{t.subscribe("pointConnectionsDraw",Wt,1)})]).then(oe):t.subscribe("draw",oe,1),wt=!0,Ci=M.showReticleOnce)})),On=s=>(...M)=>{const V=s(...M);return wt=!0,V},Uc=s=>{let M=1/0,V=-1/0,oe=1/0,be=-1/0;for(let $e=0;$e<s.length;$e++){const[Xe,xt]=ln.points[s[$e]];M=Math.min(M,Xe),V=Math.max(V,Xe),oe=Math.min(oe,xt),be=Math.max(be,xt)}return{x:M,y:oe,width:V-M,height:be-oe}},Xs=(s,M={})=>new Promise(V=>{const oe=[s.x+s.width/2,s.y+s.height/2],be=2*Math.atan(1),$e=s.height*ii>s.width?s.height/2/Math.tan(be/2):s.width/2/Math.tan(be*ii/2);M.transition?(Le.config({isFixed:!0}),Mc(oe,$e),t.subscribe("transitionEnd",()=>{V(),Le.config({isFixed:!1})},1),gl({duration:M.transitionDuration,easing:M.transitionEasing})):(Le.lookAt(oe,$e),t.subscribe("draw",V,1),wt=!0)}),Di=(s,M={})=>{if(!cr)return Promise.reject(new Error(L1));const V=Uc(s),oe=V.x+V.width/2,be=V.y+V.height/2,$e=yc(),Xe=1+(M.padding||0),xt=Math.max(V.width,$e)*Xe,Wt=Math.max(V.height,$e)*Xe,Gt=oe-xt/2,bn=be-Wt/2;return Xs({x:Gt,y:bn,width:xt,height:Wt},M)},Ys=(s,M,V={})=>new Promise(oe=>{V.transition?(Le.config({isFixed:!0}),Mc(s,M),t.subscribe("transitionEnd",()=>{oe(),Le.config({isFixed:!1})},1),gl({duration:V.transitionDuration,easing:V.transitionEasing})):(Le.lookAt(s,M),t.subscribe("draw",oe,1),wt=!0)}),Vc=(s={})=>Ys([0,0],1,s),fm=s=>{if(!cr)throw new Error(L1);const M=ln.points[s];if(!M)return;const V=[M[0],M[1],0,1];or(n,Zi,or(n,Le.view,ea)),wd(V,V,n);const oe=Ht*(V[0]+1)/2,be=wn*(.5-V[1]/2);return[oe,be]},Qs=()=>{vn.setStyle({color:As(bt,nt,ve),opacity:Ge===null?null:Ge[0],width:Tt[0]})},Hc=()=>{const s=Math.round($t)>.5?0:255;Rn.initiator.style.border=`1px dashed rgba(${s}, ${s}, ${s}, 0.33)`,Rn.initiator.style.background=`rgba(${s}, ${s}, ${s}, 0.1)`},Wc=()=>{const s=Math.round($t)>.5?0:255;Rn.longPressIndicator.style.color=`rgb(${s}, ${s}, ${s})`,Rn.longPressIndicator.dataset.color=`rgb(${s}, ${s}, ${s})`;const M=d.map(V=>Math.round(V*255));Rn.longPressIndicator.dataset.activeColor=`rgb(${M[0]}, ${M[1]}, ${M[2]})`},Ks=s=>{s&&(o=mr(s,!0),$t=k1(o),Hc(),Wc())},Xc=s=>{s?X0(s)?O1(a.regl,s).then(M=>{l=M,wt=!0,t.publish("backgroundImageReady")}).catch(()=>{console.error(`Count not create texture from ${s}`),l=null}):s._reglType==="texture2d"?l=s:l=null:l=null},dm=s=>{s>0&&Le.lookAt(Le.target,s,Le.rotation)},Yc=s=>{s!==null&&Le.lookAt(Le.target,Le.distance[0],s)},Qc=s=>{s&&Le.lookAt(s,Le.distance[0],Le.rotation)},Kc=s=>{s&&Le.setView(s)},yl=s=>{if(!s)return;d=mr(s,!0),at.setStyle({color:d});const M=d.map(V=>Math.round(V*255));Rn.longPressIndicator.dataset.activeColor=`rgb(${M[0]}, ${M[1]}, ${M[2]})`},hm=s=>{Number.isNaN(+s)||+s<1||(w=+s,at.setStyle({width:w}))},di=s=>{+s&&(b=+s,Rn.set({minDelay:b}))},xl=s=>{+s&&(L=+s,Rn.set({minDist:L}))},qc=s=>{I=R1(CA,I)(s)},Zc=s=>{y=!!s,Rn.set({enableInitiator:y})},Jc=s=>{T=s,Rn.set({startInitiatorParentElement:T})},ef=s=>{v=!!s},tf=s=>{F=Number(s)},nf=s=>{$=Number(s)},rf=s=>{ee=Number(s)},af=s=>{_e=Number(s)},of=s=>{se=Object.entries(s).reduce((M,[V,oe])=>(DA.includes(V)&&IA.includes(oe)&&(M[V]=oe),M),{}),Yo=P1(se),Yo[nh]?Le.config({isRotate:!0,mouseDownMoveModKey:Yo[nh]}):Le.config({isRotate:!1})},Cr=s=>{ot=R1(wA,eg)(s),Le.config({defaultMouseDownMoveAction:ot===V_?"rotate":"pan"})},lf=s=>{s!==null&&(Ie=s)},mm=s=>{s&&(Fe=mr(s,!0),Qa.setStyle({color:Fe}),Ka.setStyle({color:Fe}))},Qr=s=>{s&&($n=s,oa=s.domain()[0],nl=s?s.domain()[1]-s.domain()[0]:0,$n.range([0,Ht]),Oi())},qs=s=>{s&&(Tn=s,rl=Tn.domain()[0],il=Tn?Tn.domain()[1]-Tn.domain()[0]:0,Tn.range([wn,0]),Oi())},Mi=s=>{m=!!s},El=s=>{h=!!s},sf=s=>{et=!!s,et?to(ln.points[0])&&ha(Ss()).then(()=>{t.publish("pointConnectionsDraw"),wt=!0}):ha()},_l=(s,M)=>V=>{if(V==="inherit")s([...M()]);else{const oe=Ta(V)?V:[V];s(oe.map(be=>mr(be,!0)))}Qs()},uf=_l(s=>{bt=s},()=>Ke),cf=_l(s=>{nt=s},()=>Je),ff=_l(s=>{ve=s},()=>Qe),pm=s=>{Sa(s,wa,{minLength:1})&&(Ge=[...s]),ed(+s)&&(Ge=[+s]),bt=bt.map(M=>(M[3]=Number.isNaN(+Ge[0])?M[3]:+Ge[0],M)),Qs()},vm=s=>{!Number.isNaN(+s)&&+s&&(qe=+s)},gm=s=>{Sa(s,wa,{minLength:1})&&(Tt=[...s]),ed(+s)&&(Tt=[+s]),Qs()},ym=s=>{!Number.isNaN(+s)&&+s&&(Mt=Math.max(0,s))},xm=s=>{Qt=Math.max(0,s)},Em=s=>{Ut=Math.max(0,s)},_m=s=>{hn=s,fi()},df=s=>{mt=+s},hf=s=>{yt=+s},Sm=s=>{Et=+s},wm=s=>{a.gamma=s},Zs=s=>{if(Up({property:!0}),s==="aspectRatio")return qi;if(s==="background"||s==="backgroundColor")return o;if(s==="backgroundImage")return l;if(s==="camera")return Le;if(s==="cameraTarget")return Le.target;if(s==="cameraDistance")return Le.distance[0];if(s==="cameraRotation")return Le.rotation;if(s==="cameraView")return Le.view;if(s==="canvas")return u;if(s==="colorBy")return f;if(s==="sizeBy")return _t;if(s==="deselectOnDblClick")return m;if(s==="deselectOnEscape")return h;if(s==="height")return Pt;if(s==="lassoColor")return d;if(s==="lassoLineWidth")return w;if(s==="lassoMinDelay")return b;if(s==="lassoMinDist")return L;if(s==="lassoClearEvent")return I;if(s==="lassoInitiator")return y;if(s==="lassoInitiatorElement")return Rn.initiator;if(s==="lassoInitiatorParentElement")return T;if(s==="keyMap")return{...se};if(s==="mouseMode")return ot;if(s==="opacity")return qt.length===1?qt[0]:qt;if(s==="opacityBy")return It;if(s==="opacityByDensityFill")return mt;if(s==="opacityByDensityDebounceTime")return E;if(s==="opacityInactiveMax")return yt;if(s==="opacityInactiveScale")return Et;if(s==="points")return ln.points;if(s==="hoveredPoint")return Dn;if(s==="selectedPoints")return[...dt];if(s==="filteredPoints")return ze?Array.from(At):Array.from({length:ln.points.length},(M,V)=>V);if(s==="pointsInView")return co();if(s==="pointColor")return Ke.length===1?Ke[0]:Ke;if(s==="pointColorActive")return Je.length===1?Je[0]:Je;if(s==="pointColorHover")return Qe.length===1?Qe[0]:Qe;if(s==="pointOutlineWidth")return Sn;if(s==="pointSize")return Dt.length===1?Dt[0]:Dt;if(s==="pointSizeSelected")return Jt;if(s==="pointSizeMouseDetection")return hn;if(s==="showPointConnections")return et;if(s==="pointConnectionColor")return bt.length===1?bt[0]:bt;if(s==="pointConnectionColorActive")return nt.length===1?nt[0]:nt;if(s==="pointConnectionColorHover")return ve.length===1?ve[0]:ve;if(s==="pointConnectionColorBy")return Ve;if(s==="pointConnectionOpacity")return Ge.length===1?Ge[0]:Ge;if(s==="pointConnectionOpacityBy")return Te;if(s==="pointConnectionOpacityActive")return qe;if(s==="pointConnectionSize")return Tt.length===1?Tt[0]:Tt;if(s==="pointConnectionSizeActive")return Mt;if(s==="pointConnectionSizeBy")return jt;if(s==="pointConnectionMaxIntPointsPerSegment")return Qt;if(s==="pointConnectionTolerance")return Ut;if(s==="reticleColor")return Fe;if(s==="regl")return a.regl;if(s==="showReticle")return Ie;if(s==="version")return TL;if(s==="width")return Vt;if(s==="xScale")return $n;if(s==="yScale")return Tn;if(s==="performanceMode")return Yn;if(s==="gamma")return a.gamma;if(s==="renderer")return a;if(s==="isDestroyed")return Ct;if(s==="isPointsDrawn")return cr;if(s==="isPointsFiltered")return ze;if(s==="zDataType")return ui;if(s==="wDataType")return Li},fo=(s={})=>(Up(s),(s.backgroundColor!==void 0||s.background!==void 0)&&Ks(s.backgroundColor||s.background),s.backgroundImage!==void 0&&Xc(s.backgroundImage),s.cameraTarget!==void 0&&Qc(s.cameraTarget),s.cameraDistance!==void 0&&dm(s.cameraDistance),s.cameraRotation!==void 0&&Yc(s.cameraRotation),s.cameraView!==void 0&&Kc(s.cameraView),s.colorBy!==void 0&&Sc(s.colorBy),s.pointColor!==void 0&&$h(s.pointColor),s.pointColorActive!==void 0&&Bh(s.pointColorActive),s.pointColorHover!==void 0&&ci(s.pointColorHover),s.pointSize!==void 0&&Ec(s.pointSize),s.pointSizeSelected!==void 0&&ca(s.pointSizeSelected),s.pointSizeMouseDetection!==void 0&&_m(s.pointSizeMouseDetection),s.sizeBy!==void 0&&Hh(s.sizeBy),s.opacity!==void 0&&Uh(s.opacity),s.showPointConnections!==void 0&&sf(s.showPointConnections),s.pointConnectionColor!==void 0&&uf(s.pointConnectionColor),s.pointConnectionColorActive!==void 0&&cf(s.pointConnectionColorActive),s.pointConnectionColorHover!==void 0&&ff(s.pointConnectionColorHover),s.pointConnectionColorBy!==void 0&&wc(s.pointConnectionColorBy),s.pointConnectionOpacityBy!==void 0&&an(s.pointConnectionOpacityBy),s.pointConnectionOpacity!==void 0&&pm(s.pointConnectionOpacity),s.pointConnectionOpacityActive!==void 0&&vm(s.pointConnectionOpacityActive),s.pointConnectionSize!==void 0&&gm(s.pointConnectionSize),s.pointConnectionSizeActive!==void 0&&ym(s.pointConnectionSizeActive),s.pointConnectionSizeBy!==void 0&&Tc(s.pointConnectionSizeBy),s.pointConnectionMaxIntPointsPerSegment!==void 0&&xm(s.pointConnectionMaxIntPointsPerSegment),s.pointConnectionTolerance!==void 0&&Em(s.pointConnectionTolerance),s.opacityBy!==void 0&&Vh(s.opacityBy),s.lassoColor!==void 0&&yl(s.lassoColor),s.lassoLineWidth!==void 0&&hm(s.lassoLineWidth),s.lassoMinDelay!==void 0&&di(s.lassoMinDelay),s.lassoMinDist!==void 0&&xl(s.lassoMinDist),s.lassoClearEvent!==void 0&&qc(s.lassoClearEvent),s.lassoInitiator!==void 0&&Zc(s.lassoInitiator),s.lassoInitiatorParentElement!==void 0&&Jc(s.lassoInitiatorParentElement),s.lassoOnLongPress!==void 0&&ef(s.lassoOnLongPress),s.lassoLongPressTime!==void 0&&tf(s.lassoLongPressTime),s.lassoLongPressAfterEffectTime!==void 0&&nf(s.lassoLongPressAfterEffectTime),s.lassoLongPressEffectDelay!==void 0&&rf(s.lassoLongPressEffectDelay),s.lassoLongPressRevertEffectTime!==void 0&&af(s.lassoLongPressRevertEffectTime),s.keyMap!==void 0&&of(s.keyMap),s.mouseMode!==void 0&&Cr(s.mouseMode),s.showReticle!==void 0&&lf(s.showReticle),s.reticleColor!==void 0&&mm(s.reticleColor),s.pointOutlineWidth!==void 0&&_c(s.pointOutlineWidth),s.height!==void 0&&zh(s.height),s.width!==void 0&&Ns(s.width),s.aspectRatio!==void 0&&Fh(s.aspectRatio),s.xScale!==void 0&&Qr(s.xScale),s.yScale!==void 0&&qs(s.yScale),s.deselectOnDblClick!==void 0&&Mi(s.deselectOnDblClick),s.deselectOnEscape!==void 0&&El(s.deselectOnEscape),s.opacityByDensityFill!==void 0&&df(s.opacityByDensityFill),s.opacityInactiveMax!==void 0&&hf(s.opacityInactiveMax),s.opacityInactiveScale!==void 0&&Sm(s.opacityInactiveScale),s.gamma!==void 0&&wm(s.gamma),new Promise(M=>{window.requestAnimationFrame(()=>{u&&(Rs(),Le.refresh(),a.refresh(),wt=!0,M())})})),Tm=(s,{preventEvent:M=!1}={})=>{Kc(s),wt=!0,Qo=M},mf=()=>{Le||(Le=XC(u,{isPanInverted:[!1,!0]})),e.cameraView?Le.setView(g1(e.cameraView)):e.cameraTarget||e.cameraDistance||e.cameraRotation?Le.lookAt([...e.cameraTarget||o2],e.cameraDistance||l2,e.cameraRotation||s2):Le.setView(g1(u2)),qa=wr(1,1),na=wr(-1,-1)},bm=({preventEvent:s=!1}={})=>{mf(),Oi(),!s&&t.publish("view",{view:Le.view,camera:Le,xScale:$n,yScale:Tn})},pf=({key:s})=>{switch(s){case"Escape":h&&ll();break}},vf=()=>{Dr=!0,si=!0},Js=()=>{no(),Dr=!1,si=!0,wt=!0},gf=()=>{wt=!0},Cm=()=>{so([]),vn.clear()},ho=()=>{Le.refresh();const s=Vt===xi,M=Pt===xi;if(s||M){const{width:V,height:oe}=u.getBoundingClientRect();s&&Yr(V),M&&Ni(oe),Rs(),wt=!0}},Am=()=>u.getContext("2d").getImageData(0,0,u.width,u.height),Lm=()=>{Rs(),mf(),Oi(),at=Jf(a.regl,{color:d,width:w,is2d:!0}),vn=Jf(a.regl,{color:bt,colorHover:ve,colorActive:nt,opacity:Ge===null?null:Ge[0],width:Tt[0],widthActive:Mt,is2d:!0}),Qa=Jf(a.regl,{color:Fe,width:1,is2d:!0}),Ka=Jf(a.regl,{color:Fe,width:1,is2d:!0}),fi(),u.addEventListener("wheel",gf),Za=a.regl.buffer(),ys=a.regl.buffer(),Ja=a.regl.buffer({usage:"dynamic",type:"float",length:SA*2}),ra=Ls(),tl=fl();const s=fo({backgroundImage:l,width:Vt,height:Pt,keyMap:se});Hc(),Wc(),window.addEventListener("keyup",pf,!1),window.addEventListener("blur",io,!1),window.addEventListener("mouseup",Cs,!1),window.addEventListener("mousemove",Xr,!1),u.addEventListener("mousedown",bs,!1),u.addEventListener("mouseenter",vf,!1),u.addEventListener("mouseleave",Js,!1),u.addEventListener("click",ul,!1),u.addEventListener("dblclick",cl,!1),"ResizeObserver"in window?(Ko=new ResizeObserver(ho),Ko.observe(u)):(window.addEventListener("resize",ho),window.addEventListener("orientationchange",ho)),s.then(()=>{t.publish("init")})},va=a.onFrame(()=>{_s=Le.tick(),!(!cr||!(wt||Ai))&&(Ai&&!Gc(xs,Es)&&zc(),_s&&(qa=wr(1,1),na=wr(-1,-1),It==="density"&&ma()),a.render(()=>{const s=u.width/a.canvas.width,M=u.height/a.canvas.height;jh(s,M),l&&l._reglType&&tm(),mn.length>2&&Vs(),Ai||vn.draw({projection:Cc(),model:ao(),view:pl()}),Kh(),!ft&&(Ie||Ci)&&nm(),Dn>=0&&qh(),dt.length&&em(),at.draw({projection:Cc(),model:ao(),view:pl()})},u),_s&&(Oi(),Qo?Qo=!1:t.publish("view",{view:Le.view,camera:Le,xScale:$n,yScale:Tn})),wt=!1,Ci=!1,t.publish("draw"))}),Rm=()=>{wt=!0},Om=()=>{cr=!1,Ct=!0,va(),window.removeEventListener("keyup",pf,!1),window.removeEventListener("blur",io,!1),window.removeEventListener("mouseup",Cs,!1),window.removeEventListener("mousemove",Xr,!1),u.removeEventListener("mousedown",bs,!1),u.removeEventListener("mouseenter",vf,!1),u.removeEventListener("mouseleave",Js,!1),u.removeEventListener("click",ul,!1),u.removeEventListener("dblclick",cl,!1),u.removeEventListener("wheel",gf,!1),Ko?Ko.disconnect():(window.removeEventListener("resize",ho),window.removeEventListener("orientationchange",ho)),u=void 0,Le.dispose(),Le=void 0,at.destroy(),Rn.destroy(),vn.destroy(),Qa.destroy(),Ka.destroy(),e.renderer||a.destroy(),t.publish("destroy"),t.clear()};return Lm(),{get isSupported(){return a.isSupported},clear:On(Cm),createTextureFromUrl:(s,M=og)=>O1(a.regl,s,M),deselect:ll,destroy:Om,draw:pa,filter:jc,get:Zs,getScreenPosition:fm,hover:no,redraw:Rm,refresh:a.refresh,reset:On(bm),select:sa,set:fo,export:Am,subscribe:t.subscribe,unfilter:uo,unsubscribe:t.unsubscribe,view:Tm,zoomToLocation:Ys,zoomToArea:Xs,zoomToPoints:Di,zoomToOrigin:Vc}};function Td(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Z_(e){let t,n,r;e.length!==2?(t=Td,n=(l,u)=>Td(e(l),u),r=(l,u)=>e(l)-u):(t=e===Td||e===CL?e:AL,n=e,r=e);function i(l,u,f=0,m=l.length){if(f<m){if(t(u,u)!==0)return m;do{const h=f+m>>>1;n(l[h],u)<0?f=h+1:m=h}while(f<m)}return f}function a(l,u,f=0,m=l.length){if(f<m){if(t(u,u)!==0)return m;do{const h=f+m>>>1;n(l[h],u)<=0?f=h+1:m=h}while(f<m)}return f}function o(l,u,f=0,m=l.length){const h=i(l,u,f,m-1);return h>f&&r(l[h-1],u)>-r(l[h],u)?h-1:h}return{left:i,center:o,right:a}}function AL(){return 0}function LL(e){return e===null?NaN:+e}const RL=Z_(Td),OL=RL.right;Z_(LL).center;const NL=OL;function PL(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class kL extends Map{constructor(t,n=ML){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(D1(this,t))}has(t){return super.has(D1(this,t))}set(t,n){return super.set(IL(this,t),n)}delete(t){return super.delete(DL(this,t))}}function D1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function IL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function DL({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ML(e){return e!==null&&typeof e=="object"?e.valueOf():e}function jL(e){return e}function FL(e,...t){return $L(e,Array.from,jL,t)}function $L(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const l=new kL,u=r[o++];let f=-1;for(const m of a){const h=u(m,++f,a),d=l.get(h);d?d.push(m):l.set(h,[m])}for(const[m,h]of l)l.set(m,i(h,o));return t(l)}(e,0)}const BL=Math.sqrt(50),GL=Math.sqrt(10),zL=Math.sqrt(2);function ah(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=BL?10:a>=GL?5:a>=zL?2:1;let l,u,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(e*f),u=Math.round(t*f),l/f<e&&++l,u/f>t&&--u,f=-f):(f=Math.pow(10,i)*o,l=Math.round(e/f),u=Math.round(t/f),l*f<e&&++l,u*f>t&&--u),u<l&&.5<=n&&n<2?ah(e,t,n*2):[l,u,f]}function Y0(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?ah(t,e,n):ah(e,t,n);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(o<0)for(let f=0;f<l;++f)u[f]=(a-f)/-o;else for(let f=0;f<l;++f)u[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)u[f]=(i+f)/-o;else for(let f=0;f<l;++f)u[f]=(i+f)*o;return u}function Q0(e,t,n){return t=+t,e=+e,n=+n,ah(e,t,n)[2]}function UL(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Q0(t,e,n):Q0(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function VL(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function J_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function HL(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}function Oh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ms(){}var zo=.7,ls=1/zo,Zl="\\s*([+-]?\\d+)\\s*",ic="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WL=/^#([0-9a-f]{3,8})$/,XL=new RegExp(`^rgb\\(${Zl},${Zl},${Zl}\\)$`),YL=new RegExp(`^rgb\\(${bi},${bi},${bi}\\)$`),QL=new RegExp(`^rgba\\(${Zl},${Zl},${Zl},${ic}\\)$`),KL=new RegExp(`^rgba\\(${bi},${bi},${bi},${ic}\\)$`),qL=new RegExp(`^hsl\\(${ic},${bi},${bi}\\)$`),ZL=new RegExp(`^hsla\\(${ic},${bi},${bi},${ic}\\)$`),M1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oh(ms,ac,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:j1,formatHex:j1,formatHex8:JL,formatHsl:eR,formatRgb:F1,toString:F1});function j1(){return this.rgb().formatHex()}function JL(){return this.rgb().formatHex8()}function eR(){return tS(this).formatHsl()}function F1(){return this.rgb().formatRgb()}function ac(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=WL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$1(t):n===3?new tr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XL.exec(e))?new tr(t[1],t[2],t[3],1):(t=YL.exec(e))?new tr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=QL.exec(e))?nd(t[1],t[2],t[3],t[4]):(t=KL.exec(e))?nd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qL.exec(e))?z1(t[1],t[2]/100,t[3]/100,1):(t=ZL.exec(e))?z1(t[1],t[2]/100,t[3]/100,t[4]):M1.hasOwnProperty(e)?$1(M1[e]):e==="transparent"?new tr(NaN,NaN,NaN,0):null}function $1(e){return new tr(e>>16&255,e>>8&255,e&255,1)}function nd(e,t,n,r){return r<=0&&(e=t=n=NaN),new tr(e,t,n,r)}function eS(e){return e instanceof ms||(e=ac(e)),e?(e=e.rgb(),new tr(e.r,e.g,e.b,e.opacity)):new tr}function oh(e,t,n,r){return arguments.length===1?eS(e):new tr(e,t,n,r??1)}function tr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Oh(tr,oh,lg(ms,{brighter(e){return e=e==null?ls:Math.pow(ls,e),new tr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zo:Math.pow(zo,e),new tr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tr(Io(this.r),Io(this.g),Io(this.b),lh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:B1,formatHex:B1,formatHex8:tR,formatRgb:G1,toString:G1}));function B1(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}`}function tR(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}${Oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function G1(){const e=lh(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function lh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oo(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function z1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ei(e,t,n,r)}function tS(e){if(e instanceof ei)return new ei(e.h,e.s,e.l,e.opacity);if(e instanceof ms||(e=ac(e)),!e)return new ei;if(e instanceof ei)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(t===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new ei(o,l,u,e.opacity)}function nR(e,t,n,r){return arguments.length===1?tS(e):new ei(e,t,n,r??1)}function ei(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Oh(ei,nR,lg(ms,{brighter(e){return e=e==null?ls:Math.pow(ls,e),new ei(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zo:Math.pow(zo,e),new ei(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new tr(Hp(e>=240?e-240:e+120,i,r),Hp(e,i,r),Hp(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ei(U1(this.h),rd(this.s),rd(this.l),lh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lh(this.opacity);return`${e===1?"hsl(":"hsla("}${U1(this.h)}, ${rd(this.s)*100}%, ${rd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function U1(e){return e=(e||0)%360,e<0?e+360:e}function rd(e){return Math.max(0,Math.min(1,e||0))}function Hp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rR=Math.PI/180,iR=180/Math.PI;var nS=-.14861,sg=1.78277,ug=-.29227,Nh=-.90649,oc=1.97294,V1=oc*Nh,H1=oc*sg,W1=sg*ug-Nh*nS;function aR(e){if(e instanceof Do)return new Do(e.h,e.s,e.l,e.opacity);e instanceof tr||(e=eS(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(W1*r+V1*t-H1*n)/(W1+V1-H1),a=r-i,o=(oc*(n-i)-ug*a)/Nh,l=Math.sqrt(o*o+a*a)/(oc*i*(1-i)),u=l?Math.atan2(o,a)*iR-120:NaN;return new Do(u<0?u+360:u,l,i,e.opacity)}function Va(e,t,n,r){return arguments.length===1?aR(e):new Do(e,t,n,r??1)}function Do(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Oh(Do,Va,lg(ms,{brighter(e){return e=e==null?ls:Math.pow(ls,e),new Do(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zo:Math.pow(zo,e),new Do(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*rR,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new tr(255*(t+n*(nS*r+sg*i)),255*(t+n*(ug*r+Nh*i)),255*(t+n*(oc*r)),this.opacity)}}));const Ph=e=>()=>e;function rS(e,t){return function(n){return e+n*t}}function oR(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function lR(e,t){var n=t-e;return n?rS(e,n>180||n<-180?n-360*Math.round(n/360):n):Ph(isNaN(e)?t:e)}function sR(e){return(e=+e)==1?Jl:function(t,n){return n-t?oR(t,n,e):Ph(isNaN(t)?n:t)}}function Jl(e,t){var n=t-e;return n?rS(e,n):Ph(isNaN(e)?t:e)}const X1=function e(t){var n=sR(t);function r(i,a){var o=n((i=oh(i)).r,(a=oh(a)).r),l=n(i.g,a.g),u=n(i.b,a.b),f=Jl(i.opacity,a.opacity);return function(m){return i.r=o(m),i.g=l(m),i.b=u(m),i.opacity=f(m),i+""}}return r.gamma=e,r}(1);function uR(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function cR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fR(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=kh(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<r;++o)a[o]=i[o](l);return a}}function dR(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function sh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hR(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=kh(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var K0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wp=new RegExp(K0.source,"g");function mR(e){return function(){return e}}function pR(e){return function(t){return e(t)+""}}function vR(e,t){var n=K0.lastIndex=Wp.lastIndex=0,r,i,a,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=K0.exec(e))&&(i=Wp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:sh(r,i)})),n=Wp.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?pR(u[0].x):mR(t):(t=u.length,function(f){for(var m=0,h;m<t;++m)l[(h=u[m]).i]=h.x(f);return l.join("")})}function kh(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ph(t):(n==="number"?sh:n==="string"?(r=ac(t))?(t=r,X1):vR:t instanceof ac?X1:t instanceof Date?dR:cR(t)?uR:Array.isArray(t)?fR:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hR:sh)(e,t)}function iS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function aS(e){return function t(n){n=+n;function r(i,a){var o=e((i=Va(i)).h,(a=Va(a)).h),l=Jl(i.s,a.s),u=Jl(i.l,a.l),f=Jl(i.opacity,a.opacity);return function(m){return i.h=o(m),i.s=l(m),i.l=u(Math.pow(m,n)),i.opacity=f(m),i+""}}return r.gamma=t,r}(1)}aS(lR);var oS=aS(Jl);function gR(e){return function(){return e}}function yR(e){return+e}var Y1=[0,1];function Pa(e){return e}function q0(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:gR(isNaN(t)?NaN:.5)}function xR(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ER(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=q0(i,r),a=n(o,a)):(r=q0(r,i),a=n(a,o)),function(l){return a(r(l))}}function _R(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=q0(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var u=NL(e,l,1,r)-1;return a[u](i[u](l))}}function lS(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sS(){var e=Y1,t=Y1,n=kh,r,i,a,o=Pa,l,u,f;function m(){var d=Math.min(e.length,t.length);return o!==Pa&&(o=xR(e[0],e[d-1])),l=d>2?_R:ER,u=f=null,h}function h(d){return d==null||isNaN(d=+d)?a:(u||(u=l(e.map(r),t,n)))(r(o(d)))}return h.invert=function(d){return o(i((f||(f=l(t,e.map(r),sh)))(d)))},h.domain=function(d){return arguments.length?(e=Array.from(d,yR),m()):e.slice()},h.range=function(d){return arguments.length?(t=Array.from(d),m()):t.slice()},h.rangeRound=function(d){return t=Array.from(d),n=iS,m()},h.clamp=function(d){return arguments.length?(o=d?!0:Pa,m()):o!==Pa},h.interpolate=function(d){return arguments.length?(n=d,m()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,w){return r=d,i=w,m()}}function SR(){return sS()(Pa,Pa)}function wR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function uh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ss(e){return e=uh(Math.abs(e)),e?e[1]:NaN}function TR(e,t){return function(n,r){for(var i=n.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function bR(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var CR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lc(e){if(!(t=CR.exec(e)))throw new Error("invalid format: "+e);var t;return new cg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lc.prototype=cg.prototype;function cg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}cg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function AR(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var uS;function LR(e,t){var n=uh(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(uS=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+uh(e,Math.max(0,t+a-1))[0]}function Q1(e,t){var n=uh(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const K1={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Q1(e*100,t),r:Q1,s:LR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function q1(e){return e}var Z1=Array.prototype.map,J1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function RR(e){var t=e.grouping===void 0||e.thousands===void 0?q1:TR(Z1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?q1:bR(Z1.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=lc(h);var d=h.fill,w=h.align,b=h.sign,L=h.symbol,I=h.zero,y=h.width,T=h.comma,v=h.precision,F=h.trim,$=h.type;$==="n"?(T=!0,$="g"):K1[$]||(v===void 0&&(v=12),F=!0,$="g"),(I||d==="0"&&w==="=")&&(I=!0,d="0",w="=");var ee=L==="$"?n:L==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",_e=L==="$"?r:/[%p]/.test($)?o:"",se=K1[$],ot=/[defgprs%]/.test($);v=v===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function Ie(Fe){var Ke=ee,Je=_e,Qe,et,bt;if($==="c")Je=se(Fe)+Je,Fe="";else{Fe=+Fe;var nt=Fe<0||1/Fe<0;if(Fe=isNaN(Fe)?u:se(Math.abs(Fe),v),F&&(Fe=AR(Fe)),nt&&+Fe==0&&b!=="+"&&(nt=!1),Ke=(nt?b==="("?b:l:b==="-"||b==="("?"":b)+Ke,Je=($==="s"?J1[8+uS/3]:"")+Je+(nt&&b==="("?")":""),ot){for(Qe=-1,et=Fe.length;++Qe<et;)if(bt=Fe.charCodeAt(Qe),48>bt||bt>57){Je=(bt===46?i+Fe.slice(Qe+1):Fe.slice(Qe))+Je,Fe=Fe.slice(0,Qe);break}}}T&&!I&&(Fe=t(Fe,1/0));var ve=Ke.length+Fe.length+Je.length,Ve=ve<y?new Array(y-ve+1).join(d):"";switch(T&&I&&(Fe=t(Ve+Fe,Ve.length?y-Je.length:1/0),Ve=""),w){case"<":Fe=Ke+Fe+Je+Ve;break;case"=":Fe=Ke+Ve+Fe+Je;break;case"^":Fe=Ve.slice(0,ve=Ve.length>>1)+Ke+Fe+Je+Ve.slice(ve);break;default:Fe=Ve+Ke+Fe+Je;break}return a(Fe)}return Ie.toString=function(){return h+""},Ie}function m(h,d){var w=f((h=lc(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(ss(d)/3)))*3,L=Math.pow(10,-b),I=J1[8+b/3];return function(y){return w(L*y)+I}}return{format:f,formatPrefix:m}}var id,fg,cS;OR({thousands:",",grouping:[3],currency:["$",""]});function OR(e){return id=RR(e),fg=id.format,cS=id.formatPrefix,id}function NR(e){return Math.max(0,-ss(Math.abs(e)))}function PR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ss(t)/3)))*3-ss(Math.abs(e)))}function kR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ss(t)-ss(e))+1}function IR(e,t,n,r){var i=UL(e,t,n),a;switch(r=lc(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=PR(i,o))&&(r.precision=a),cS(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=kR(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=NR(i))&&(r.precision=a-(r.type==="%")*2);break}}return fg(r)}function fS(e){var t=e.domain;return e.ticks=function(n){var r=t();return Y0(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return IR(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],l=r[a],u,f,m=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);m-- >0;){if(f=Q0(o,l,n),f===u)return r[i]=o,r[a]=l,t(r);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;u=f}return e},e}function Uo(){var e=SR();return e.copy=function(){return lS(e,Uo())},J_.apply(e,arguments),fS(e)}function DR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function ex(e){return Math.log(e)}function tx(e){return Math.exp(e)}function MR(e){return-Math.log(-e)}function jR(e){return-Math.exp(-e)}function FR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $R(e){return e===10?FR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function BR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nx(e){return(t,n)=>-e(-t,n)}function GR(e){const t=e(ex,tx),n=t.domain;let r=10,i,a;function o(){return i=BR(r),a=$R(r),n()[0]<0?(i=nx(i),a=nx(a),e(MR,jR)):e(ex,tx),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const u=n();let f=u[0],m=u[u.length-1];const h=m<f;h&&([f,m]=[m,f]);let d=i(f),w=i(m),b,L;const I=l==null?10:+l;let y=[];if(!(r%1)&&w-d<I){if(d=Math.floor(d),w=Math.ceil(w),f>0){for(;d<=w;++d)for(b=1;b<r;++b)if(L=d<0?b/a(-d):b*a(d),!(L<f)){if(L>m)break;y.push(L)}}else for(;d<=w;++d)for(b=r-1;b>=1;--b)if(L=d>0?b/a(-d):b*a(d),!(L<f)){if(L>m)break;y.push(L)}y.length*2<I&&(y=Y0(f,m,I))}else y=Y0(d,w,Math.min(w-d,I)).map(a);return h?y.reverse():y},t.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=lc(u)).precision==null&&(u.trim=!0),u=fg(u)),l===1/0)return u;const f=Math.max(1,r*l/t.ticks().length);return m=>{let h=m/a(Math.round(i(m)));return h*r<r-.5&&(h*=r),h<=f?u(m):""}},t.nice=()=>n(DR(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function dg(){const e=GR(sS()).domain([1,10]);return e.copy=()=>lS(e,dg()).base(e.base()),J_.apply(e,arguments),e}function zR(){var e=0,t=1,n,r,i,a,o=Pa,l=!1,u;function f(h){return h==null||isNaN(h=+h)?u:o(i===0?.5:(h=(a(h)-n)*i,l?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),f):[e,t]},f.clamp=function(h){return arguments.length?(l=!!h,f):l},f.interpolator=function(h){return arguments.length?(o=h,f):o};function m(h){return function(d){var w,b;return arguments.length?([w,b]=d,o=h(w,b),f):[o(0),o(1)]}}return f.range=m(kh),f.rangeRound=m(iS),f.unknown=function(h){return arguments.length?(u=h,f):u},function(h){return a=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),f}}function UR(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dS(){var e=fS(zR()(Pa));return e.copy=function(){return UR(e,dS())},HL.apply(e,arguments)}oS(Va(-100,.75,.35),Va(80,1.5,.8));var VR=oS(Va(260,.75,.35),Va(80,1.5,.8));Va();const HR="_scatter_lrznx_2",WR={scatter:HR};hg.propTypes={points:Ze.array.isRequired,colors:Ze.array,width:Ze.number.isRequired,height:Ze.number.isRequired,onScatter:Ze.func,onView:Ze.func,onSelect:Ze.func,onHover:Ze.func};const XR=e=>dg().domain([100,1e6]).range([6,1]).clamp(!0)(e),YR=e=>dg().domain([100,1e6]).range([.7,.2]).clamp(!0)(e);function hg({points:e,colors:t,width:n,height:r,onScatter:i,onView:a,onSelect:o,onHover:l}){const u=D.useRef(),f=D.useRef([-1,1]),m=D.useRef([-1,1]),h=Uo().domain(f.current),d=Uo().domain(m.current);return D.useEffect(()=>{if(e&&e.length){const w=XR(e.length),b=YR(e.length);let L=[250/255,128/255,114/255,1],I=e;if(t!=null&&t.length){I=e.map(($,ee)=>[$[0],$[1],t[ee]]);const v=FL(t,$=>$).map($=>$[0]).sort(($,ee)=>$-ee),F=dS(VR).domain(PL(v).reverse());L=v.map($=>oh(F($)).hex())}const y={canvas:u.current,width:n,height:r,pointSize:w,opacity:b,pointColor:L,pointColorHover:[.1,.1,.1,.5],xScale:h,yScale:d};t!=null&&t.length&&(y.colorBy="valueA");const T=bL(y);return T.draw(I),a&&a(h,d),T.subscribe("view",({camera:v,view:F,xScale:$,yScale:ee})=>{f.current=$.domain(),m.current=ee.domain(),a&&a(f.current,m.current)}),T.subscribe("select",({points:v})=>{o&&o(v)}),T.subscribe("deselect",()=>{o&&o([])}),T.subscribe("pointOver",v=>{l&&l(v)}),T.subscribe("pointOut",()=>{l&&l(null)}),i&&i(T),()=>{T.destroy()}}},[e,t]),g.jsx("canvas",{className:WR.scatter,ref:u})}const ad=({points:e,fill:t,stroke:n,size:r,symbol:i,xDomain:a,yDomain:o,width:l,height:u})=>{const f=D.useRef();return D.useEffect(()=>{if(a&&o){const m=Uo().domain(a).range([0,l]),h=Uo().domain(o).range([u,0]),d=I=>I/(.1+a[1]-a[0]),b=f.current.getContext("2d");b.clearRect(0,0,l,u),b.fillStyle=t,b.strokeStyle=n,b.font=`${d(r)}px monospace`,b.globalAlpha=.75;let L=d(r);if(!e.length)return;e.map(I=>{I&&(t&&b.fillRect(m(I[0])-L/2,h(I[1])-L/2,L,L),n&&b.strokeRect(m(I[0])-L/2,h(I[1])-L/2,L,L),i&&b.fillText(i,m(I[0])-L/3.2,h(I[1])+L/3.2))})}},[e,t,n,r,a,o,l,u]),g.jsx("canvas",{className:"annotation-plot",ref:f,width:l,height:u})},No=({points:e,hulls:t,fill:n,stroke:r,size:i,symbol:a,xDomain:o,yDomain:l,width:u,height:f})=>{const m=D.useRef();return D.useEffect(()=>{if(o&&l){const h=Uo().domain(o).range([0,u]),d=Uo().domain(l).range([f,0]),w=I=>I/(.1+o[1]-o[0]),L=m.current.getContext("2d");if(L.clearRect(0,0,u,f),L.fillStyle=n,L.strokeStyle=r,L.font=`${w(i)}px monospace`,L.globalAlpha=.75,w(i),!t.length||!e.length)return;t.forEach(I=>{I&&(L.beginPath(),I.forEach((y,T)=>{T===0?L.moveTo(h(e[y][0]),d(e[y][1])):L.lineTo(h(e[y][0]),d(e[y][1]))}),L.lineTo(h(e[I[0]][0]),d(e[I[0]][1])),n&&L.fill(),r&&L.stroke())})}},[e,t,n,r,i,o,l,u,f]),g.jsx("canvas",{className:"hull-plot",ref:m,width:u,height:f})},$i=500,Bi=500,pr="/api";function QR(){var nn;const[e,t]=D.useState(null),{dataset:n,scope:r}=Rh(),i=hs(),a=[{id:0,name:"Selected"},{id:1,name:"Search"},{id:2,name:"Clusters"},{id:3,name:"Tags"}],[o,l]=D.useState(2);D.useEffect(()=>{fetch(`${pr}/datasets/${n}/meta`).then(Z=>Z.json()).then(Z=>{console.log("dataset",Z),t(Z)})},[n,t]);const[u,f]=D.useState([]);D.useEffect(()=>{fetch(`${pr}/datasets/${n}/scopes`).then(Z=>Z.json()).then(Z=>{f(Z)})},[n,f]);const[m,h]=D.useState(null);D.useEffect(()=>{fetch(`${pr}/datasets/${n}/scopes/${r}`).then(Z=>Z.json()).then(Z=>{console.log("scope",Z),h(Z)})},[n,r,h]);const[d,w]=D.useState(null),[b,L]=D.useState(null),[I,y]=D.useState([]),[T,v]=D.useState([]),[F,$]=D.useState(d==null?void 0:d.id),[ee,_e]=D.useState([]);D.useEffect(()=>{fetch(`${pr}/datasets/${n}/embeddings`).then(Z=>Z.json()).then(Z=>{_e(Z)})},[n,_e]),D.useEffect(()=>{m&&(w(ee.find(Z=>Z.id==m.embedding_id)),fetch(`${pr}/datasets/${n}/umaps/${m.umap_id}`).then(Z=>Z.json()).then(Z=>{console.log("umap",Z),L(Z)}),fetch(`${pr}/datasets/${n}/clusters/${m.cluster_id}/labels/${m.cluster_labels_id}`).then(Z=>Z.json()).then(Z=>{console.log("labels",Z),v(Z)}),fetch(`${pr}/datasets/${n}/clusters/${m.cluster_id}/indices`).then(Z=>Z.json()).then(Z=>{console.log("cluster indices",Z),y(Z)}))},[n,m,ee,L,v,w,$]);const se=D.useMemo(()=>I.map(Z=>Z.cluster),[I]);D.useEffect(()=>{d&&$(d.id)},[d,$]);const ot=Z=>{console.log("selected",Z),$(Z)},[Ie,Fe]=D.useState([]),[Ke,Je]=D.useState(!1);D.useEffect(()=>{b&&fetch(`${pr}/datasets/${e.id}/umaps/${b.id}/points`).then(Z=>Z.json()).then(Z=>{console.log("umap points",Z),Fe(Z.map(gt=>[gt.x,gt.y]))})},[e,b]);const Qe=D.useCallback((Z,gt,mn=[])=>{fetch(`${pr}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:n,indices:Z})}).then(ln=>ln.json()).then(ln=>{if(!e)return;let ii=ln.map((qi,Zi)=>({index:Z[Zi],...qi}));gt(ii)})},[e,n]),[et,bt]=D.useState({}),[nt,ve]=D.useState([-1,1]),[Ve,Ge]=D.useState([-1,1]),Te=D.useCallback((Z,gt)=>{ve(Z),Ge(gt)},[ve,Ge]),[qe,Tt]=D.useState([]),Mt=D.useCallback(Z=>{console.log("handle selected",Z),Tt(Z),l(0)},[Tt,l]),[jt,Qt]=D.useState(null),[Ut,Dt]=D.useState(null);D.useEffect(()=>{jt!=null?Qe([jt],Z=>{Dt(Z[0])}):Dt(null)},[jt,Dt,Qe]);const[Jt,hn]=D.useState(null);D.useEffect(()=>{if(Ut&&I.length&&T.length){const Z=Ut.index,gt=I[Z],mn=T[gt==null?void 0:gt.cluster];hn({cluster:gt.cluster,...mn})}else hn(null)},[Ut,I,T,hn]);const[Sn,qt]=D.useState([]);D.useEffect(()=>{jt!=null?qt([Ie[jt]]):qt([])},[jt,Ie]);const[It,mt]=D.useState({});D.useEffect(()=>{fetch(`${pr}/tags?dataset=${n}`).then(Z=>Z.json()).then(Z=>mt(Z))},[n]);const yt=D.useMemo(()=>{const Z=[];for(const gt in It)Z.push(gt);return Z},[It]),[Et,_t]=D.useState(yt[0]),[Pt,Vt]=D.useState([]);D.useEffect(()=>{if(It[Et]){const Z=It[Et].map(gt=>Ie[gt]);Vt(Z)}else Vt([]),et&&et.config&&(et==null||et.zoomToOrigin({transition:!0,transitionDuration:1500}))},[It,Et,Ie,et,Vt]);const[Ht,wn]=D.useState([]),[Yn,E]=D.useState([]),Ct=D.useCallback(Z=>{fetch(`${pr}/search/nn?dataset=${n}&query=${Z}&embedding_id=${F}`).then(gt=>gt.json()).then(gt=>{E(gt.distances),wn(gt.indices),et==null||et.zoomToPoints(gt.indices,{transition:!0,padding:.2,transitionDuration:1500})})},[F,n,et,E,wn]),[$t,Le]=D.useState([]);D.useEffect(()=>{const Z=Ht.map(gt=>Ie[gt]);Le(Z)},[Ht,Ie]);const[at,ft]=D.useState(null),[Oe,Rt]=D.useState([]);D.useEffect(()=>{if(at){const Z=at.indices.map(gt=>Ie[gt]);Rt(Z)}else Rt([]),et&&et.config&&(et==null||et.zoomToOrigin({transition:!0,transitionDuration:1500}))},[at,Ie,et,Rt]);const[Bt,dt]=D.useState((at==null?void 0:at.label)||"");D.useEffect(()=>{dt((at==null?void 0:at.label)||"")},[at]);const tn=D.useCallback(Z=>{et==null||et.zoomToPoints([Z],{transition:!0,padding:.9,transitionDuration:1500})},[et]),Ee=D.useCallback(Z=>{Qt(Z)},[Qt]),ze=D.useCallback((Z,gt)=>{console.log("update label",Z,gt),fetch(`${pr}/datasets/${n}/clusters/${m.cluster_id}/labels/${m.cluster_labels_id}/label/${Z}?label=${gt}`).then(mn=>mn.json()).then(mn=>{fetch(`${pr}/datasets/${n}/clusters/${m.cluster_id}/labels/${m.cluster_labels_id}`).then(ln=>ln.json()).then(ln=>{console.log("got new labels",ln),v(ln)}).catch(console.error)}).catch(console.error)},[n,m]),At=D.useCallback(()=>{ft(null),v([]),Fe([])},[]);return e?g.jsxs("div",{className:"dataset--explore",children:[g.jsxs("div",{className:"column",children:[g.jsxs("div",{className:"first-row summary",children:[g.jsxs("div",{className:"scope-card",children:[g.jsxs("h3",{children:[n,": ",g.jsx("select",{className:"scope-selector",onChange:Z=>{At(),i(`/datasets/${e==null?void 0:e.id}/explore/${Z.target.value}`)},children:u.map((Z,gt)=>g.jsx("option",{value:Z.id,selected:Z.id===(m==null?void 0:m.id),children:Z.label||Z.id},gt))}),g.jsx(wi,{to:`/datasets/${e==null?void 0:e.id}/setup/${m==null?void 0:m.id}`,children:"Configure"})]}),g.jsx("span",{children:m==null?void 0:m.description}),g.jsxs("span",{children:["Embeddings: ",d==null?void 0:d.model_id]}),g.jsxs("span",{children:[T==null?void 0:T.length," clusters"]})]}),g.jsx("div",{className:"dataset-card",children:g.jsxs("span",{children:[e==null?void 0:e.length," rows"]})})]}),g.jsxs("div",{className:"second-row",children:[g.jsx("div",{className:"umap-container",children:g.jsx("div",{className:"scatters",style:{width:$i,height:Bi},children:Ie.length?g.jsxs(g.Fragment,{children:[g.jsx(hg,{points:Ie,colors:se,loading:Ke,width:$i,height:Bi,onScatter:bt,onView:Te,onSelect:Mt,onHover:Ee}),Jt&&Jt.hull&&!m.ignore_hulls?g.jsx(No,{points:Ie,hulls:[Jt==null?void 0:Jt.hull],fill:"lightgray",xDomain:nt,yDomain:Ve,width:$i,height:Bi}):null,at&&at.hull&&!m.ignore_hulls?g.jsx(No,{points:Ie,hulls:[at==null?void 0:at.hull],fill:"darkgray",xDomain:nt,yDomain:Ve,width:$i,height:Bi}):null,T.length&&!m.ignore_hulls?g.jsx(No,{points:Ie,hulls:T.map(Z=>Z.hull),stroke:"lightgray",xDomain:nt,yDomain:Ve,width:$i,height:Bi}):null,g.jsx(ad,{points:$t,fill:"black",size:"8",xDomain:nt,yDomain:Ve,width:$i,height:Bi}),g.jsx(ad,{points:Oe,fill:"darkred",size:"8",xDomain:nt,yDomain:Ve,width:$i,height:Bi}),g.jsx(ad,{points:Pt,symbol:Et,size:"20",xDomain:nt,yDomain:Ve,width:$i,height:Bi}),g.jsx(ad,{points:Sn,stroke:"black",fill:"orange",size:"16",xDomain:nt,yDomain:Ve,width:$i,height:Bi})]}):null})}),g.jsxs("div",{className:"hovered-point",children:[Ut&&Object.keys(Ut).map(Z=>g.jsxs("span",{children:[g.jsxs("span",{className:"key",children:[Z,":"]}),g.jsx("span",{className:"value",children:Ut[Z]})]},Z)),Jt?g.jsxs("span",{children:[g.jsxs("span",{className:"key",children:["Cluster ",Jt.index,":"]}),g.jsx("span",{className:"value",children:Jt.label})]}):null]})]})]}),g.jsx("div",{className:"column",children:g.jsxs("div",{className:"second-row tab-tables",children:[g.jsx("div",{className:"tab-header",children:a.map(Z=>g.jsx("button",{onClick:()=>l(Z.id),className:Z.id===o?"tab-active":"tab-inactive",children:Z.name},Z.id))}),o===0?g.jsxs("div",{className:"tab-content tab-selected",children:[g.jsxs("span",{children:["Selected: ",qe==null?void 0:qe.length,(qe==null?void 0:qe.length)>0?g.jsx("button",{className:"deselect",onClick:()=>{Tt([]),et==null||et.select([]),et==null||et.zoomToOrigin({transition:!0,transitionDuration:1500})},children:"X"}):null]}),(qe==null?void 0:qe.length)>0?g.jsx(Ro,{indices:qe,clusterIndices:I,clusterLabels:T,tagset:It,dataset:e,maxRows:150,onTagset:Z=>mt(Z),onHover:Ee,onClick:tn}):null]}):null,o===1?g.jsxs("div",{className:"tab-content tab-neighbors",children:[g.jsx("div",{className:"search-box",children:g.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),Ct(Z.target.elements.searchBox.value),l(1)},children:[g.jsx("input",{type:"text",id:"searchBox"}),g.jsx("button",{type:"submit",children:"Similarity Search"}),g.jsx("br",{}),g.jsx("label",{htmlFor:"embeddingModel"}),g.jsx("select",{id:"embeddingModel",onChange:Z=>ot(Z.target.value),value:F,children:ee.map((Z,gt)=>g.jsxs("option",{value:Z.id,children:[Z.id," - ",Z.model_id]},gt))})]})}),g.jsxs("span",{children:[Ht.length?g.jsxs("span",{children:["Nearest Neighbors: ",Ht.length," (capped at 150) "]}):null,Ht.length>0?g.jsx("button",{className:"deselect",onClick:()=>{wn([]),document.getElementById("searchBox").value=""},children:"X"}):null]}),Ht.length>0?g.jsx(Ro,{indices:Ht,distances:Yn,clusterIndices:I,clusterLabels:T,tagset:It,dataset:e,onTagset:Z=>mt(Z),onHover:Ee,onClick:tn}):null]}):null,o===2?g.jsxs("div",{className:"tab-content tab-cluster",children:[g.jsx("div",{className:"clusters-select",children:g.jsxs("select",{onChange:Z=>{const gt=T.find(mn=>mn.index===+Z.target.value);gt&&ft(gt)},value:at==null?void 0:at.index,children:[g.jsx("option",{value:"",children:"Select a cluster"}),T.map((Z,gt)=>g.jsxs("option",{value:Z.index,children:[Z.index,": ",Z.label]},gt))]})}),g.jsxs("div",{className:"cluster-selected",children:[at?g.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),ze(at.index,Bt)},children:[g.jsx("input",{type:"text",id:"new-label",value:Bt,onChange:Z=>dt(Z.target.value)}),g.jsx("button",{type:"submit",children:"Update Label"})]}):null,g.jsxs("span",{children:[at==null?void 0:at.indices.length," ",at!=null&&at.indices.length?"Rows":"",at?g.jsx("button",{className:"deselect",onClick:()=>{ft(null)},children:"X"}):null]})]}),g.jsx("div",{className:"cluster-table",children:at!=null&&at.indices?g.jsx(Ro,{indices:at==null?void 0:at.indices,clusterIndices:I,clusterLabels:T,dataset:e,tagset:It,onTagset:Z=>mt(Z),onHover:Ee,onClick:tn}):null})]}):null,o===3?g.jsxs("div",{className:"tab-content tab-tag",children:[g.jsxs("div",{className:"tags-box",children:[g.jsxs("div",{className:"tags-select",children:["Tags: ",yt.map(Z=>g.jsxs("button",{className:"dataset--tag-link",onClick:()=>{_t(Z),l(3),et==null||et.zoomToPoints(It[Z],{transition:!0,padding:.2,transitionDuration:1500})},children:[Z,"(",It[Z].length,")"]},Z))]}),g.jsx("div",{className:"new-tag",children:g.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const gt=Z.target.elements.newTag.value;fetch(`${pr}/tags/new?dataset=${n}&tag=${gt}`).then(mn=>mn.json()).then(mn=>{console.log("new tag",mn),mt(mn)})},children:[g.jsx("input",{type:"text",id:"newTag"}),g.jsx("button",{type:"submit",children:"New Tag"})]})})]}),g.jsxs("span",{children:[Et," ",(nn=It[Et])==null?void 0:nn.length,Et?g.jsx("button",{className:"deselect",onClick:()=>{_t(null)},children:"X"}):null]}),It[Et]?g.jsx(Ro,{indices:It[Et],clusterIndices:I,clusterLabels:T,tagset:It,dataset:e,onTagset:Z=>mt(Z),onHover:Ee,onClick:tn}):null]}):null]})})]}):g.jsx("div",{children:"Loading..."})}const rx={"embeddings-form":"_embeddings-form_pr4jx_2","embeddings-list":"_embeddings-list_pr4jx_13"},wu="/api";hS.propTypes={dataset:Ze.shape({id:Ze.string.isRequired}).isRequired,textColumn:Ze.string.isRequired,embedding:Ze.object,umaps:Ze.array,clusters:Ze.array,onNew:Ze.func.isRequired,onChange:Ze.func.isRequired};function hS({dataset:e,textColumn:t,embedding:n,umaps:r,clusters:i,onNew:a,onChange:o}){const[l,u]=D.useState([]),[f,m]=D.useState(null),{startJob:h}=Ti(e,m,`${wu}/jobs/embed`),{startJob:d}=Ti(e,m,`${wu}/jobs/delete/embedding`),{startJob:w}=Ti(e,m,`${wu}/jobs/rerun`),[b,L]=D.useState([]);D.useEffect(()=>{fetch(`${wu}/embedding_models`).then(v=>v.json()).then(L).catch(console.error)},[]);const I=(v,F)=>{fetch(`${wu}/datasets/${v}/embeddings`).then($=>$.json()).then($=>{F($)})};D.useEffect(()=>{I(e==null?void 0:e.id,v=>{u(v),a(v)})},[e,u,a]),D.useEffect(()=>{(f==null?void 0:f.status)==="completed"&&I(e.id,v=>{u(v);let F;f.job_name=="embed"?F=v.find($=>$.id==f.run_id):f.job_name=="rm"&&(F=v[v.length-1]),a(v,F)})},[f,e,u,a]);const y=v=>{v.preventDefault();const F=v.target,$=new FormData(F),ee=b.find(ot=>ot.id===$.get("modelName")),_e=$.get("prefix");let se={text_column:t,model_id:ee.id,prefix:_e};h(se)},T=v=>{w({job_id:v==null?void 0:v.id})};return g.jsxs("div",{children:[g.jsxs("div",{className:rx["embeddings-form"],children:["Embedding on column: ",g.jsx("b",{children:t}),g.jsxs("form",{onSubmit:y,children:[g.jsxs("label",{htmlFor:"modelName",children:["Model:",g.jsx("select",{id:"modelName",name:"modelName",disabled:!!f,children:b.map((v,F)=>g.jsxs("option",{value:v.id,children:[v.provider,": ",v.name]},F))})]}),g.jsx("textarea",{name:"prefix",placeholder:`Optional prefix to prepend to each ${t}`,disabled:!!f}),g.jsx("button",{type:"submit",disabled:!!f,children:"New Embedding"})]})]}),g.jsx(Xo,{job:f,clearJob:()=>{m(null)},rerunJob:T}),g.jsx("div",{className:rx["embeddings-list"],children:l.map((v,F)=>g.jsxs("div",{className:"item",children:[g.jsx("input",{type:"radio",id:`embedding${F}`,name:"embedding",value:v.id,checked:v.id===(n==null?void 0:n.id),onChange:()=>o(v)}),g.jsx("label",{htmlFor:`embedding${F}`,children:g.jsxs("span",{children:[g.jsxs("span",{children:[v.id," - ",v.model_id," "]}),g.jsx("br",{}),g.jsxs("span",{children:["Dimensions: ",v.dimensions]}),g.jsx("br",{}),v.prefix?g.jsxs("span",{children:["Prefix: ",v.prefix,g.jsx("br",{})]}):null,g.jsxs("span",{children:["[",r.filter($=>$.embedding_id==v.id).length," umaps,",i.filter($=>r.filter(ee=>ee.embedding_id==v.id).map(ee=>ee.id).indexOf($.umap_id)>=0).length," clusters ]"]}),g.jsx("button",{onClick:()=>d({embedding_id:v.id}),disabled:f&&f.status!=="completed",children:""})]})})]},F))})]})}const ix={"umaps-list":"_umaps-list_p5rgt_1","umaps-item":"_umaps-item_p5rgt_9"},od="/api";mS.propTypes={dataset:Ze.shape({id:Ze.string.isRequired}).isRequired,umap:Ze.object,embedding:Ze.object,clusters:Ze.array.isRequired,onNew:Ze.func.isRequired,onChange:Ze.func.isRequired};function mS({dataset:e,umap:t,embedding:n,clusters:r,onNew:i,onChange:a}){const[o,l]=D.useState(null),{startJob:u}=Ti(e,l,`${od}/jobs/umap`),{startJob:f}=Ti(e,l,`${od}/jobs/delete/umap`),[m,h]=D.useState([]);function d(b,L){fetch(`${od}/datasets/${b}/umaps`).then(I=>I.json()).then(I=>{const y=I.map(T=>({...T,url:`${od}/files/${b}/umaps/${T.id}.png`}));L(y.reverse())})}D.useEffect(()=>{d(e.id,b=>{h(b),i(b)})},[e,i]),D.useEffect(()=>{(o==null?void 0:o.status)=="completed"&&d(e.id,b=>{h(b);let L;o.job_name=="umap"?L=b.find(I=>I.id==o.run_id):o.job_name=="rm"&&(L=b[0]),i(b,L)})},[o,e,h,i]);const w=D.useCallback(b=>{b.preventDefault();const L=b.target,I=new FormData(L),y=I.get("neighbors"),T=I.get("min_dist");u({embedding_id:n==null?void 0:n.id,neighbors:y,min_dist:T})},[u,n]);return g.jsxs("div",{className:"dataset--umaps-new",children:[g.jsxs("form",{onSubmit:w,children:[g.jsxs("label",{children:["Neighbors:",g.jsx("input",{type:"number",name:"neighbors",defaultValue:"25",disabled:!!o})]}),g.jsxs("label",{children:["Min Dist:",g.jsx("input",{type:"text",name:"min_dist",defaultValue:"0.1",disabled:!!o})]}),g.jsx("button",{type:"submit",disabled:!!o,children:"New UMAP"})]}),g.jsx(Xo,{job:o,clearJob:()=>l(null)}),g.jsx("div",{className:ix["umaps-list"],children:m.filter(b=>b.embedding_id==(n==null?void 0:n.id)).map((b,L)=>g.jsxs("div",{className:`${ix["umaps-item"]} item`,children:[g.jsx("input",{type:"radio",id:`umap${L}`,name:"umap",value:b,checked:b.id===(t==null?void 0:t.id),onChange:()=>a(b)}),g.jsxs("label",{htmlFor:`umap${L}`,children:[b.id,g.jsx("br",{}),"Neighbors: ",b.neighbors,g.jsx("br",{}),"Min Dist: ",b.min_dist,g.jsx("br",{}),"[",r.filter(I=>I.umap_id==b.id).length," clusters]",g.jsx("br",{}),g.jsx("img",{src:b.url,alt:b.id}),g.jsx("button",{onClick:()=>f({umap_id:b.id}),disabled:o&&o.status!=="completed",children:""})]})]},L))})]})}const ld="/api";pS.propTypes={dataset:Ze.shape({id:Ze.string.isRequired}).isRequired,cluster:Ze.object,umap:Ze.object,clusters:Ze.array,onNew:Ze.func.isRequired,onChange:Ze.func.isRequired};function pS({dataset:e,cluster:t,umap:n,onNew:r,onChange:i}){const[a,o]=D.useState(null),{startJob:l}=Ti(e,o,`${ld}/jobs/cluster`),{startJob:u}=Ti(e,o,`${ld}/jobs/delete/cluster`),[f,m]=D.useState([]);function h(w,b){fetch(`${ld}/datasets/${w}/clusters`).then(L=>L.json()).then(L=>{const I=L.map(y=>({...y,url:`${ld}/files/${w}/clusters/${y.id}.png`}));b(I.reverse())})}D.useEffect(()=>{h(e.id,w=>{m(w),r(w)})},[e,r]),D.useEffect(()=>{(a==null?void 0:a.status)=="completed"&&h(e.id,w=>{m(w);let b;a.job_name=="cluster"?b=w.find(L=>L.id==a.run_id):a.job_name=="rm"&&(b=w[0]),r(w,b)})},[a,e,m,r]);const d=D.useCallback(w=>{w.preventDefault();const b=w.target,L=new FormData(b),I=L.get("samples"),y=L.get("min_samples");l({umap_id:n.id,samples:I,min_samples:y})},[l,n]);return g.jsxs("div",{className:"dataset--clusters-new",children:[g.jsxs("form",{onSubmit:w=>d(w,n),children:[g.jsxs("label",{children:["Samples:",g.jsx("input",{type:"number",name:"samples",defaultValue:e.length<1e3?5:25,disabled:!!a||!n})]}),g.jsxs("label",{children:["Min Samples:",g.jsx("input",{type:"number",name:"min_samples",defaultValue:"5",disabled:!!a||!n})]}),g.jsx("button",{type:"submit",disabled:!!a||!n,children:"New Clusters"})]}),g.jsx(Xo,{job:a,clearJob:()=>o(null)}),g.jsx("div",{className:"dataset--setup-clusters-list",children:n&&f.filter(w=>w.umap_id==n.id).map((w,b)=>g.jsxs("div",{className:"item dataset--setup-clusters-item",children:[g.jsx("input",{type:"radio",id:`cluster${b}`,name:"cluster",value:t,checked:w.id===(t==null?void 0:t.id),onChange:()=>i(w)}),g.jsxs("label",{htmlFor:`cluster${b}`,children:[w.id,g.jsx("br",{}),"Clusters: ",w.n_clusters,g.jsx("br",{}),"Noise points: ",w.n_noise,g.jsx("br",{}),"Samples: ",w.samples,g.jsx("br",{}),"Min Samples: ",w.min_samples,g.jsx("br",{}),g.jsx("img",{src:w.url,alt:w.id}),g.jsx("br",{}),g.jsx("button",{onClick:()=>u({cluster_id:w.id}),children:""})]})]},b))})]})}const Tu="/api";vS.propTypes={dataset:Ze.shape({id:Ze.string.isRequired}).isRequired,cluster:Ze.object,selectedLabelId:Ze.string,onChange:Ze.func.isRequired,onLabels:Ze.func,onLabelIds:Ze.func,onHoverLabel:Ze.func,onClickLabel:Ze.func};function vS({dataset:e,cluster:t,selectedLabelId:n,onChange:r,onLabels:i,onLabelIds:a,onHoverLabel:o,onClickLabel:l}){const[u,f]=D.useState(null),{startJob:m}=Ti(e,f,`${Tu}/jobs/cluster_label`);Ti(e,f,`${Tu}/jobs/rerun`);const[h,d]=D.useState([]);D.useEffect(()=>{fetch(`${Tu}/chat_models`).then(v=>v.json()).then(v=>{d(v)}).catch(v=>{console.log(v),d([])})},[]);const[w,b]=D.useState([]),[L,I]=D.useState([]);D.useEffect(()=>{console.log("in cluster labels",e,t,n),e&&t&&n?fetch(`${Tu}/datasets/${e.id}/clusters/${t.id}/labels/${n}`).then(v=>v.json()).then(v=>{I(v)}).catch(v=>{console.log(v),I([])}):I([])},[n,I,e,t,w]),D.useEffect(()=>{t?fetch(`${Tu}/datasets/${e.id}/clusters/${t.id}/labels_available`).then(v=>v.json()).then(v=>{if(console.log("cluster changed, set label models fetched",t.id,v,u),u){let F;if((u==null?void 0:u.job_name)=="label"){let $=u.run_id.split("-")[3];F=v.find(ee=>ee==$),console.log("label_id",$,F)}else u.job_name=="rm"&&(F=v[0]);a(v.map($=>({cluster_id:t.id,id:$})),F)}else a(v.map(F=>({cluster_id:t.id,id:F})));b(v)}).catch(v=>{console.log(v),b([]),a([])}):(b([]),a([]))},[e,t,u,b,a]),D.useEffect(()=>{L!=null&&L.length&&i(L)},[L,i]);const y=D.useCallback(v=>{v.preventDefault();const F=v.target,$=new FormData(F),ee=$.get("chatModel"),_e=e.text_column,se=t==null?void 0:t.id,ot=$.get("context");m({chat_id:ee,cluster_id:se,text_column:_e,context:ot})},[e,t,m]);function T(v){rerunJob({job_id:v==null?void 0:v.id})}return g.jsxs("div",{className:"dataset--setup-cluster-labels-content",children:[g.jsxs("div",{className:"dataset--slides-new",children:[g.jsxs("p",{children:["Automatically create labels for each cluster",t?` in ${t.cluster_id}`:""," using a chat model. "]}),g.jsxs("form",{onSubmit:y,children:[g.jsxs("label",{children:["Chat Model:",g.jsx("select",{id:"chatModel",name:"chatModel",disabled:!!u,children:h.filter(v=>(w==null?void 0:w.indexOf(v.id))<0).map((v,F)=>g.jsxs("option",{value:v.id,children:[v.provider," - ",v.name]},F))})]}),g.jsx("textarea",{name:"context",placeholder:"Optional context for system prompt",disabled:!!u||!t}),g.jsx("button",{type:"submit",disabled:!!u||!t,children:"Auto Label"})]}),g.jsx(Xo,{job:u,clearJob:()=>f(null),killJob:f,rerunJob:T})]}),t?g.jsxs("div",{className:"dataset--setup-cluster-labels-list",children:[g.jsxs("label",{children:["Use Labels: ",w.length>1?g.jsx("select",{name:"model",value:n,onChange:v=>r(v.target.value),children:w.map((v,F)=>g.jsx("option",{value:v,children:v},F))}):g.jsx("span",{children:w[0]})]}),g.jsx("div",{className:"dataset--setup-labels-list",children:g.jsx(Kv,{data:L.map((v,F)=>({index:F,label:v.label,items:v.indices.length})),onHover:v=>o(L[v]),onClick:v=>l(L[v])})})]}):null]})}const Xp="/api";gS.propTypes={dataset:Ze.shape({id:Ze.string.isRequired}).isRequired,scope:Ze.object,umap:Ze.object,embedding:Ze.object,cluster:Ze.object,clusterLabelId:Ze.string,onNew:Ze.func.isRequired,onChange:Ze.func.isRequired};function gS({dataset:e,scope:t,umap:n,embedding:r,cluster:i,clusterLabelId:a,onNew:o,onChange:l}){const u=hs();D.useEffect(()=>{e&&fetch(`${Xp}/datasets/${e.id}/scopes`).then(m=>m.json()).then(m=>{const h=m.sort((d,w)=>d.id.localeCompare(w.id));o(h)})},[e,o]);const f=D.useCallback(m=>{if(m.preventDefault(),!n||!i)return;const h=m.target,d=new FormData(h),w={embedding_id:r.id,umap_id:n.id,cluster_id:i.id,cluster_labels_id:a,label:d.get("label"),description:d.get("description")},b=d.get("action");console.log("action",b),b=="save"&&(w.id=t.id),fetch(`${Xp}/datasets/${e.id}/scopes/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}).then(L=>L.json()).then(L=>{const I=L;fetch(`${Xp}/datasets/${e.id}/scopes`).then(y=>y.json()).then(y=>{o(y),l(y.find(T=>T.id==I.id))}),u(`/datasets/${e.id}/setup/${L.id}`)}).catch(L=>{console.error("Error saving scope:",L)})},[e,t,i,a,n,r,u,o,l]);return g.jsxs("div",{className:"setup-scope",children:[g.jsxs("div",{className:"dataset--setup-save-box-title",children:["Embedding: ",r==null?void 0:r.id," - ",r==null?void 0:r.model_id,g.jsx("br",{}),"Umap: ",n==null?void 0:n.id,g.jsx("br",{}),"Cluster: ",i==null?void 0:i.id,g.jsx("br",{}),"Labels: ",a]}),g.jsx("div",{className:"dataset--setup-save-box-boxes",children:i?g.jsx("div",{className:"box-item",children:g.jsx("img",{src:i.url,alt:i.id})}):n?g.jsx("div",{className:"box-item",children:g.jsx("img",{src:n.url,alt:n.id})}):g.jsx("div",{className:"empty-box"})}),g.jsx("div",{className:"dataset--setup-save-box-nav",children:g.jsxs("form",{onSubmit:f,children:[g.jsxs("label",{children:["Label:",g.jsx("input",{type:"text",name:"label",defaultValue:t?t.label:""})]}),g.jsxs("label",{children:["Description:",g.jsx("input",{type:"text",name:"description",defaultValue:t?t.description:""})]}),g.jsx("input",{type:"hidden",name:"action",value:""}),t?g.jsxs("div",{className:"previous-scope",children:[g.jsx("h4",{children:"Previous Scope Settings"}),"Embedding: ",t.embedding_id,g.jsx("br",{}),"Umap: ",t.umap_id,g.jsx("br",{}),"Cluster: ",t.cluster_id,g.jsx("br",{}),"Labels: ",t.cluster_labels_id,g.jsx("br",{})]}):null,t?g.jsxs("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="save"},children:["Overwrite ",t.name]}):null,g.jsx("button",{type:"submit",disabled:!i,onClick:()=>{document.querySelector('input[name="action"]').value="new"},children:"New scope"})]})})]})}const KR="_stage_vrgan_1",qR="_content_vrgan_13",ZR="_complete_vrgan_17",JR="_active_vrgan_30",sd={stage:KR,content:qR,complete:ZR,active:JR};function bu({active:e,complete:t,title:n,children:r}){return g.jsxs("div",{className:`${sd.stage} ${e?sd.active:""} ${t?sd.complete:""}`,children:[g.jsx("h3",{children:n}),g.jsx("div",{className:sd.content,children:r})]})}const Cu="/api";function ax(){const[e,t]=D.useState(null),{dataset:n,scope:r}=Rh(),i=hs(),a=500,o=500;D.useEffect(()=>{fetch(`${Cu}/datasets/${n}/meta`).then(Ee=>Ee.json()).then(Ee=>t(Ee))},[n]);const l=D.useMemo(()=>e?e.text_column||e.columns[0]:"",[e]),u=D.useCallback(Ee=>{const ze=Ee.target.value;console.log("setting column",ze),fetch(`${Cu}/datasets/${n}/meta/update?key=text_column&value=${ze}`).then(At=>At.json()).then(At=>{t(At)})},[n]),[f,m]=D.useState([]),[h,d]=D.useState(f[0]);D.useEffect(()=>{f!=null&&f.length&&!h&&d(f[0])},[f,h]);const[w,b]=D.useState([]),[L,I]=D.useState(null),[y,T]=D.useState(null);D.useEffect(()=>{if(w.length&&h){const Ee=w.filter(At=>At.embedding_id==h.id),ze=Ee.find(At=>At.id==y);I(y&&ze?ze:Ee[0])}},[y,w,h]);const[v,F]=D.useState([]),[$,ee]=D.useState(null),[_e,se]=D.useState(null);D.useEffect(()=>{if(v.length&&L){const Ee=v.filter(At=>At.umap_id==L.id),ze=Ee.find(At=>At.cluster_id==_e);ee(_e&&ze?ze:Ee[0])}else ee(null)},[_e,v,L,ee]);const[ot,Ie]=D.useState("default"),[Fe,Ke]=D.useState("default"),[Je,Qe]=D.useState([]);D.useEffect(()=>{var Ee,ze;if(Je&&$){const At=Je.filter(nn=>nn.cluster_id==$.id);Fe&&At?At.find(nn=>nn.id==Fe)?Ie(Fe):Ie((Ee=At[0])==null?void 0:Ee.id):Ie((ze=Je[0])==null?void 0:ze.id)}else Ie(null)},[$,Fe,Je,Ie]);const[et,bt]=D.useState([]),[nt,ve]=D.useState(null);D.useEffect(()=>{if(r&&(et!=null&&et.length)){const Ee=et.find(ze=>ze.id==r);console.log("finding the scope",Ee),Ee&&(ve(Ee),d(f.find(ze=>ze.id==Ee.embedding_id)),T(Ee.umap_id),se(Ee.cluster_id),Ke(Ee.cluster_labels_id))}else ve(null)},[r,et,f]);const[Ve,Ge]=D.useState([]),Te=D.useCallback(Ee=>{Ge(Ee)},[Ge]),[qe,Tt]=D.useState({}),[Mt,jt]=D.useState([-1,1]),[Qt,Ut]=D.useState([-1,1]),Dt=D.useCallback((Ee,ze)=>{jt(Ee),Ut(ze)},[jt,Ut]),Jt=D.useCallback((Ee,ze,At=[])=>{fetch(`${Cu}/indexed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e.id,indices:Ee})}).then(nn=>nn.json()).then(nn=>{if(!e)return;let Z=nn.map((gt,mn)=>({index:Ee[mn],...gt}));ze(Z)})},[e,n]),[hn,Sn]=D.useState(null),qt=D.useCallback(Ee=>{Sn(Ee)},[Sn]),[It,mt]=D.useState(null);D.useEffect(()=>{hn>=0&&hn!=null?Jt([hn],Ee=>{mt(Ee[0])}):mt(null)},[hn,mt,Jt]);const[yt,Et]=D.useState([]),[_t,Pt]=D.useState([]);D.useEffect(()=>{$?fetch(`${Cu}/datasets/${n}/clusters/${$.id}/indices`).then(Ee=>Ee.json()).then(Ee=>{Et(Ee)}):Et([])},[$,Et,n]);const Vt=D.useMemo(()=>yt.map(Ee=>Ee.cluster),[yt]),[Ht,wn]=D.useState(null),[Yn,E]=D.useState(null),[Ct,$t]=D.useState(null);D.useEffect(()=>{if(It&&yt.length&&_t.length){const Ee=It.index,ze=yt[Ee],At=_t[ze==null?void 0:ze.cluster];E({...At,cluster:ze.cluster})}else E(null)},[It,yt,_t,E]);const[Le,at]=D.useState([]);D.useEffect(()=>{L?fetch(`${Cu}/datasets/${e.id}/umaps/${L.id}/points`).then(Ee=>Ee.json()).then(Ee=>{at(Ee.map(ze=>[ze.x,ze.y]))}):(console.log("set points empty"),at([]))},[e,L]);const[ft,Oe]=D.useState(1);D.useEffect(()=>{Oe(h?L?$?ot?nt?6:5:4:3:2:1),console.log("SCOPE",nt,h,L,$,ot)},[h,L,$,ot,nt]);const Rt=D.useCallback((Ee,ze)=>{m(Ee),ze&&d(ze)},[m,d]),Bt=D.useCallback((Ee,ze)=>{b(Ee),ze&&I(ze),Ee.filter(At=>At.embedding_id==(h==null?void 0:h.id)).length||I(null)},[b,I,h]),dt=D.useCallback((Ee,ze)=>{F(Ee),ze&&ee(ze),Ee.filter(At=>At.umap_id==(L==null?void 0:L.id)).length||ee(null)},[F,ee,L]),tn=D.useCallback((Ee,ze)=>{Qe(Ee),ze&&Ke(ze),Ee.filter(At=>At.cluster_id==($==null?void 0:$.id)).length||(Ke("default"),Pt([]))},[Qe,Ke,$]);return e?g.jsxs("div",{className:"dataset--setup",children:[g.jsxs("div",{className:"dataset--setup-summary",children:[g.jsx("h3",{children:n}),g.jsxs("div",{className:"dataset--setup-info",children:[g.jsxs("div",{className:"dataset--setup-info-content",children:[nt?g.jsxs(wi,{to:`/datasets/${e==null?void 0:e.id}/explore/${nt==null?void 0:nt.id}`,children:[" Explore ",nt.label," (",nt.id,") ",g.jsx("br",{})]}):null,e.length," rows ",g.jsx("br",{}),"Columns: ",e.columns.join(", "),g.jsxs("div",{className:"dataset--details-text-column",children:["Set Text Column:",g.jsx("select",{value:l,onChange:u,children:e.columns.map((Ee,ze)=>g.jsx("option",{value:Ee,children:Ee},ze))})]})]}),g.jsxs("div",{className:"dataset--setup-meta",children:[g.jsx("div",{className:"dataset--setup-scopes-list",children:et?g.jsxs("select",{className:"scope-selector",onChange:Ee=>i(`/datasets/${e==null?void 0:e.id}/setup/${Ee.target.value}`),children:[g.jsx("option",{value:"",children:"New scope"}),et.map((Ee,ze)=>g.jsx("option",{value:Ee.id,selected:Ee.id===(nt==null?void 0:nt.id),children:Ee.label||Ee.id},ze))]}):null}),g.jsxs("div",{className:"job-history",children:[g.jsx(wi,{to:`/datasets/${e==null?void 0:e.id}/jobs`,children:" Job history"}),g.jsx("br",{})]})]})]})]}),g.jsxs("div",{className:"dataset--setup-layout",children:[g.jsxs("div",{className:"dataset--setup-left-column",children:[g.jsx(bu,{active:ft==1,complete:ft>1,title:"1. Embeddings",children:g.jsx(hS,{dataset:e,textColumn:l,embedding:h,umaps:w,clusters:v,onNew:Rt,onChange:d})}),g.jsx(bu,{active:ft==2,complete:ft>2,title:"2. UMAP",children:g.jsx(mS,{dataset:e,umap:L,embedding:h,clusters:v,onNew:Bt,onChange:I})}),g.jsx(bu,{active:ft==3,complete:ft>3,title:"3. Clusters",children:g.jsx(pS,{dataset:e,cluster:$,umap:L,onNew:dt,onChange:ee})}),g.jsx(bu,{active:ft==4,complete:ft>4,title:"4. Auto-Label Clusters",children:g.jsx(vS,{dataset:e,cluster:$,selectedLabelId:ot,onChange:Ke,onLabelIds:tn,onLabels:Pt,onHoverLabel:$t,onClickLabel:Ee=>{console.log("CLUSTER",Ee),wn(Ee)}})}),g.jsx(bu,{active:ft==5,complete:ft>5,title:"5. Save Scope",children:g.jsx(gS,{dataset:e,scope:nt,embedding:h,umap:L,cluster:$,clusterLabelId:ot,onNew:bt,onChange:ve})})]}),g.jsxs("div",{className:"dataset--setup-right-column",children:[g.jsx("div",{className:"dataset--setup-preview",children:Ht?g.jsxs("div",{children:[g.jsxs("b",{children:["Cluster ",Ht.index,": ",Ht.label]}),g.jsx(Ro,{dataset:e,indices:Ht.indices,datasetId:n,maxRows:100})]}):g.jsxs("div",{children:[g.jsx("b",{children:"Dataset Preview"}),g.jsx(Ro,{dataset:e,indices:VL(0,100),datasetId:n,maxRows:100})]})}),g.jsxs("div",{className:"dataset--setup-umap",children:[Le.length?g.jsx(hg,{points:Le,colors:Vt,width:a,height:o,onScatter:Tt,onView:Dt,onSelect:Te,onHover:qt}):null,Yn&&Yn.hull?g.jsx(No,{points:Le,hulls:[Yn.hull],fill:"lightgray",xDomain:Mt,yDomain:Qt,width:a,height:o}):null,Ht&&Ht.hull?g.jsx(No,{points:Le,hulls:[Ht.hull],fill:"red",stroke:"black",xDomain:Mt,yDomain:Qt,width:a,height:o}):null,Ct&&Ct.hull?g.jsx(No,{points:Le,hulls:[Ct.hull],fill:"orange",stroke:"black",xDomain:Mt,yDomain:Qt,width:a,height:o}):null,_t.length?g.jsx(No,{points:Le,hulls:_t.map(Ee=>Ee.hull),stroke:"lightgray",xDomain:Mt,yDomain:Qt,width:a,height:o}):null]}),g.jsxs("div",{className:"dataset--hovered",children:[It&&Object.keys(It).map(Ee=>g.jsxs("span",{children:[g.jsxs("span",{className:"key",children:[Ee,":"]}),g.jsx("span",{className:"value",children:It[Ee]})]},Ee)),Yn?g.jsxs("span",{children:[g.jsx("span",{className:"key",children:"Cluster:"}),g.jsx("span",{className:"value",children:Yn.label})]}):null]})]})]})]}):g.jsx("div",{children:"Loading..."})}const ox="/api";function eO(){const[e,t]=D.useState(null),{dataset:n}=Rh();D.useEffect(()=>{fetch(`${ox}/datasets/${n}/meta`).then(a=>a.json()).then(t).catch(console.error)},[n,t]);const[r,i]=D.useState([]);return D.useEffect(()=>{fetch(`${ox}/jobs/all?dataset=${n}`).then(a=>a.json()).then(a=>{console.log(a),a.sort((o,l)=>+new Date(l.last_update)-+new Date(o.last_update)),console.log("jobs list",a.map(o=>o.last_update)),i(a)}).catch(console.error)},[n,i]),g.jsxs("div",{className:"jobs-page",children:[g.jsxs("div",{className:"jobs-header",children:[g.jsxs("h2",{children:[e==null?void 0:e.id," jobs"]}),g.jsxs(wi,{to:`/datasets/${n}/setup`,children:["Setup ",e==null?void 0:e.id]})]}),g.jsx("div",{className:"jobs-list",children:r.map(a=>g.jsxs("div",{className:"job",children:[g.jsx("span",{children:g.jsx(wi,{to:`/datasets/${n}/jobs/${a.id}`,children:"Job Details"})}),g.jsx("span",{className:"job-name",children:a.job_name}),g.jsxs("span",{className:"job-status",style:{fontWeight:"bold",padding:"5px"},children:[a.status=="completed"?"":"",a.status=="error"?"":"",a.status=="running"?"":""]}),g.jsx("span",{className:"job-id",style:{fontSize:"10px",padding:"5px"},children:a.id}),g.jsx("span",{children:g.jsx("code",{children:a.command})})]},a.id))})]})}const ud="/api";function tO(){const[e,t]=D.useState(null),{dataset:n,job:r}=Rh(),i=hs(),[a,o]=D.useState(null),l=D.useCallback(h=>{console.log("new job",h),h&&i(`/datasets/${n}/jobs/${h.id}`)},[n,i]),{startJob:u}=Ti(e,l,`${ud}/jobs/rerun`);D.useEffect(()=>{fetch(`${ud}/datasets/${n}/meta`).then(h=>h.json()).then(t).catch(console.error)},[n,t]),D.useEffect(()=>{fetch(`${ud}/jobs/job?dataset=${n}&job_id=${r}`).then(h=>h.json()).then(h=>{console.log("job",h),o(h),(h==null?void 0:h.status)==="running"&&Qv(e,o,h.id,200)}).catch(console.error)},[n,r,o,e]);function f(h){fetch(`${ud}/jobs/kill?dataset=${n}&job_id=${h.id}`).then(d=>d.json()).then(d=>{console.log("killed job",d),o(d)}).catch(console.error)}function m(h){u({job_id:h==null?void 0:h.id})}return g.jsxs("div",{className:"jobs-page",children:[g.jsx("h2",{children:g.jsx(wi,{to:`/datasets/${n}/jobs`,children:"Job List"})}),g.jsxs("h3",{children:[e==null?void 0:e.id," job ",a==null?void 0:a.id]}),a?g.jsxs("div",{children:[g.jsx("span",{className:"job-status",style:{fontWeight:"bold",padding:"5px"},children:a.status}),g.jsx(Xo,{job:a,rerunJob:m,killJob:f})]}):null]})}const nO=()=>g.jsx("nav",{children:g.jsx("ul",{children:g.jsx("li",{children:g.jsx(wi,{to:"/",children:"Latent Scope"})})})});var rO={VITE_API_URL:"/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const yS=rO;console.log("ENV",yS);const iO=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function aO(){return g.jsxs(EC,{basename:yS.BASE_NAME,children:[g.jsx(nO,{}),g.jsx("div",{className:"page",children:g.jsxs(mC,{children:[g.jsx(bo,{path:"/",element:g.jsx(NC,{})}),g.jsx(bo,{path:"/datasets/:dataset/explore/:scope",element:iO()?g.jsx(TC,{}):g.jsx(QR,{})}),g.jsx(bo,{path:"/datasets/:dataset/setup",element:g.jsx(ax,{})}),g.jsx(bo,{path:"/datasets/:dataset/setup/:scope",element:g.jsx(ax,{})}),g.jsx(bo,{path:"/datasets/:dataset/jobs",element:g.jsx(eO,{})}),g.jsx(bo,{path:"/datasets/:dataset/jobs/:job",element:g.jsx(tO,{})})]})})]})}Yp.createRoot(document.getElementById("root")).render(g.jsx(vx.StrictMode,{children:g.jsx(aO,{})}));
